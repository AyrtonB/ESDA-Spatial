
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>d3-force &#8212; Spatial Analysis for Energy</title>
    
  <link rel="stylesheet" href="../../../../../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  <img src="../../../../../../_static/logo.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Spatial Analysis for Energy</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Intro.html">
   UCL Energy Systems &amp; Data Analytics - Spatial Module
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/03-Working-with-Vector-Data.html">
   Working with Vector Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/04-Working-with-Raster-Data.html">
   Working with Raster Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Extensions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../extensions/01-Mapping-with-ggplot.html">
   Mapping with ggplot
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Setup.html">
   Set-Up Instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Jupyter-Anaconda.html">
   What is Jupyter/Anaconda?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/ESDA%20Course.html">
   ESDA Course
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-d3-force-2.0.1-31750eee8c43535301d571195bf9683beda534e2-integrity/node_modules/d3-force/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing">
   Installing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api-reference">
   API Reference
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#simulation">
     Simulation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#forces">
     Forces
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#centering">
       Centering
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#collision">
       Collision
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#links">
       Links
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#many-body">
       Many-Body
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#positioning">
       Positioning
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="d3-force">
<h1>d3-force<a class="headerlink" href="#d3-force" title="Permalink to this headline">¶</a></h1>
<p>This module implements a <a class="reference external" href="https://en.wikipedia.org/wiki/Verlet_integration">velocity Verlet</a> numerical integrator for simulating physical forces on particles. The simulation is simplified: it assumes a constant unit time step Δ<em>t</em> = 1 for each step, and a constant unit mass <em>m</em> = 1 for all particles. As a result, a force <em>F</em> acting on a particle is equivalent to a constant acceleration <em>a</em> over the time interval Δ<em>t</em>, and can be simulated simply by adding to the particle’s velocity, which is then added to the particle’s position.</p>
<p>In the domain of information visualization, physical simulations are useful for studying <a class="reference external" href="http://bl.ocks.org/mbostock/ad70335eeef6d167bc36fd3c04378048">networks</a> and <a class="reference external" href="http://bl.ocks.org/mbostock/95aa92e2f4e8345aaa55a4a94d41ce37">hierarchies</a>!</p>
<p><a class="reference external" href="http://bl.ocks.org/mbostock/ad70335eeef6d167bc36fd3c04378048"><img alt="Force Dragging III" src="https://raw.githubusercontent.com/d3/d3-force/master/img/graph.png" width="420" height="219"></a><a class="reference external" href="http://bl.ocks.org/mbostock/95aa92e2f4e8345aaa55a4a94d41ce37"><img alt="Force-Directed Tree" src="https://raw.githubusercontent.com/d3/d3-force/master/img/tree.png" width="420" height="219"></a></p>
<p>You can also simulate circles (disks) with collision, such as for <a class="reference external" href="http://www.nytimes.com/interactive/2012/09/06/us/politics/convention-word-counts.html">bubble charts</a> or <a class="reference external" href="http://bl.ocks.org/mbostock/6526445e2b44303eebf21da3b6627320">beeswarm plots</a>:</p>
<p><a class="reference external" href="http://bl.ocks.org/mbostock/31ce330646fa8bcb7289ff3b97aab3f5"><img alt="Collision Detection" src="https://raw.githubusercontent.com/d3/d3-force/master/img/collide.png" width="420" height="219"></a><a class="reference external" href="http://bl.ocks.org/mbostock/6526445e2b44303eebf21da3b6627320"><img alt="Beeswarm" src="https://raw.githubusercontent.com/d3/d3-force/master/img/beeswarm.png" width="420" height="219"></a></p>
<p>You can even use it as a rudimentary physics engine, say to simulate cloth:</p>
<p><a class="reference external" href="http://bl.ocks.org/mbostock/1b64ec067fcfc51e7471d944f51f1611"><img alt="Force-Directed Lattice" src="https://raw.githubusercontent.com/d3/d3-force/master/img/lattice.png" width="480" height="250"></a></p>
<p>To use this module, create a <a class="reference external" href="#simulation">simulation</a> for an array of <a class="reference external" href="#simulation_nodes">nodes</a>, and compose the desired <a class="reference external" href="#simulation_force">forces</a>. Then <a class="reference external" href="#simulation_on">listen</a> for tick events to render the nodes as they update in your preferred graphics system, such as Canvas or SVG.</p>
<div class="section" id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<p>If you use NPM, <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">d3-force</span></code>. Otherwise, download the <a class="reference external" href="https://github.com/d3/d3-force/releases/latest">latest release</a>. You can also load directly from <a class="reference external" href="https://d3js.org">d3js.org</a>, either as a <a class="reference external" href="https://d3js.org/d3-force.v2.min.js">standalone library</a> or as part of <a class="reference external" href="https://github.com/d3/d3">D3</a>. AMD, CommonJS, and vanilla environments are supported. In vanilla, a <code class="docutils literal notranslate"><span class="pre">d3_force</span></code> global is exported:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://d3js.org/d3-dispatch.v1.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://d3js.org/d3-quadtree.v1.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://d3js.org/d3-timer.v1.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://d3js.org/d3-force.v2.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="kd">var</span> <span class="nx">simulation</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">forceSimulation</span><span class="p">(</span><span class="nx">nodes</span><span class="p">);</span>

<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><a class="reference external" href="https://beta.observablehq.com/&#64;mbostock/d3-force-directed-graph">Try d3-force in your browser.</a></p>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<div class="section" id="simulation">
<h3>Simulation<a class="headerlink" href="#simulation" title="Permalink to this headline">¶</a></h3>
<p><a name="forceSimulation" href="#forceSimulation">#</a> d3.<b>forceSimulation</b>([<i>nodes</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js">&lt;&gt;</a></p>
<p>Creates a new simulation with the specified array of <a class="reference external" href="#simulation_nodes"><em>nodes</em></a> and no <a class="reference external" href="#simulation_force">forces</a>. If <em>nodes</em> is not specified, it defaults to the empty array. The simulator <a class="reference external" href="#simulation_restart">starts</a> automatically; use <a class="reference external" href="#simulation_on"><em>simulation</em>.on</a> to listen for tick events as the simulation runs. If you wish to run the simulation manually instead, call <a class="reference external" href="#simulation_stop"><em>simulation</em>.stop</a>, and then call <a class="reference external" href="#simulation_tick"><em>simulation</em>.tick</a> as desired.</p>
<p><a name="simulation_restart" href="#simulation_restart">#</a> <i>simulation</i>.<b>restart</b>() <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L86">&lt;&gt;</a></p>
<p>Restarts the simulation’s internal timer and returns the simulation. In conjunction with <a class="reference external" href="#simulation_alphaTarget"><em>simulation</em>.alphaTarget</a> or <a class="reference external" href="#simulation_alpha"><em>simulation</em>.alpha</a>, this method can be used to “reheat” the simulation during interaction, such as when dragging a node, or to resume the simulation after temporarily pausing it with <a class="reference external" href="#simulation_stop"><em>simulation</em>.stop</a>.</p>
<p><a name="simulation_stop" href="#simulation_stop">#</a> <i>simulation</i>.<b>stop</b>() <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L90">&lt;&gt;</a></p>
<p>Stops the simulation’s internal timer, if it is running, and returns the simulation. If the timer is already stopped, this method does nothing. This method is useful for running the simulation manually; see <a class="reference external" href="#simulation_tick"><em>simulation</em>.tick</a>.</p>
<p><a name="simulation_tick" href="#simulation_tick">#</a> <i>simulation</i>.<b>tick</b>([<i>iterations</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L38">&lt;&gt;</a></p>
<p>Manually steps the simulation by the specified number of <em>iterations</em>, and returns the simulation. If <em>iterations</em> is not specified, it defaults to 1 (single step).</p>
<p>For each iteration, it increments the current <a class="reference external" href="#simulation_alpha"><em>alpha</em></a> by (<a class="reference external" href="#simulation_alphaTarget"><em>alphaTarget</em></a> - <em>alpha</em>) × <a class="reference external" href="#simulation_alphaDecay"><em>alphaDecay</em></a>; then invokes each registered <a class="reference external" href="#simulation_force">force</a>, passing the new <em>alpha</em>; then decrements each <a class="reference external" href="#simulation_nodes">node</a>’s velocity by <em>velocity</em> × <a class="reference external" href="#simulation_velocityDecay"><em>velocityDecay</em></a>; lastly increments each node’s position by <em>velocity</em>.</p>
<p>This method does not dispatch <a class="reference external" href="#simulation_on">events</a>; events are only dispatched by the internal timer when the simulation is started automatically upon <a class="reference external" href="#forceSimulation">creation</a> or by calling <a class="reference external" href="#simulation_restart"><em>simulation</em>.restart</a>. The natural number of ticks when the simulation is started is ⌈<em>log</em>(<a class="reference external" href="#simulation_alphaMin"><em>alphaMin</em></a>) / <em>log</em>(1 - <a class="reference external" href="#simulation_alphaDecay"><em>alphaDecay</em></a>)⌉; by default, this is 300.</p>
<p>This method can be used in conjunction with <a class="reference external" href="#simulation_stop"><em>simulation</em>.stop</a> to compute a <a class="reference external" href="https://bl.ocks.org/mbostock/1667139">static force layout</a>. For large graphs, static layouts should be computed <a class="reference external" href="https://bl.ocks.org/mbostock/01ab2e85e8727d6529d20391c0fd9a16">in a web worker</a> to avoid freezing the user interface.</p>
<p><a name="simulation_nodes" href="#simulation_nodes">#</a> <i>simulation</i>.<b>nodes</b>([<i>nodes</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L94">&lt;&gt;</a></p>
<p>If <em>nodes</em> is specified, sets the simulation’s nodes to the specified array of objects, initializing their positions and velocities if necessary, and then <a class="reference external" href="#force_initialize">re-initializes</a> any bound <a class="reference external" href="#simulation_force">forces</a>; returns the simulation. If <em>nodes</em> is not specified, returns the simulation’s array of nodes as specified to the <a class="reference external" href="#forceSimulation">constructor</a>.</p>
<p>Each <em>node</em> must be an object. The following properties are assigned by the simulation:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> - the node’s zero-based index into <em>nodes</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code> - the node’s current <em>x</em>-position</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y</span></code> - the node’s current <em>y</em>-position</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vx</span></code> - the node’s current <em>x</em>-velocity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vy</span></code> - the node’s current <em>y</em>-velocity</p></li>
</ul>
<p>The position ⟨<em>x</em>,<em>y</em>⟩ and velocity ⟨<em>vx</em>,<em>vy</em>⟩ may be subsequently modified by <a class="reference external" href="#forces">forces</a> and by the simulation. If either <em>vx</em> or <em>vy</em> is NaN, the velocity is initialized to ⟨0,0⟩. If either <em>x</em> or <em>y</em> is NaN, the position is initialized in a <a class="reference external" href="http://bl.ocks.org/mbostock/11478058">phyllotaxis arrangement</a>, so chosen to ensure a deterministic, uniform distribution around the origin.</p>
<p>To fix a node in a given position, you may specify two additional properties:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fx</span></code> - the node’s fixed <em>x</em>-position</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fy</span></code> - the node’s fixed <em>y</em>-position</p></li>
</ul>
<p>At the end of each <a class="reference external" href="#simulation_tick">tick</a>, after the application of any forces, a node with a defined <em>node</em>.fx has <em>node</em>.x reset to this value and <em>node</em>.vx set to zero; likewise, a node with a defined <em>node</em>.fy has <em>node</em>.y reset to this value and <em>node</em>.vy set to zero. To unfix a node that was previously fixed, set <em>node</em>.fx and <em>node</em>.fy to null, or delete these properties.</p>
<p>If the specified array of <em>nodes</em> is modified, such as when nodes are added to or removed from the simulation, this method must be called again with the new (or changed) array to notify the simulation and bound forces of the change; the simulation does not make a defensive copy of the specified array.</p>
<p><a name="simulation_alpha" href="#simulation_alpha">#</a> <i>simulation</i>.<b>alpha</b>([<i>alpha</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L98">&lt;&gt;</a></p>
<p>If <em>alpha</em> is specified, sets the current alpha to the specified number in the range [0,1] and returns this simulation. If <em>alpha</em> is not specified, returns the current alpha value, which defaults to 1.</p>
<p><a name="simulation_alphaMin" href="#simulation_alphaMin">#</a> <i>simulation</i>.<b>alphaMin</b>([<i>min</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L102">&lt;&gt;</a></p>
<p>If <em>min</em> is specified, sets the minimum <em>alpha</em> to the specified number in the range [0,1] and returns this simulation. If <em>min</em> is not specified, returns the current minimum <em>alpha</em> value, which defaults to 0.001. The simulation’s internal timer stops when the current <a class="reference external" href="#simulation_alpha"><em>alpha</em></a> is less than the minimum <em>alpha</em>. The default <a class="reference external" href="#simulation_alphaDecay">alpha decay rate</a> of ~0.0228 corresponds to 300 iterations.</p>
<p><a name="simulation_alphaDecay" href="#simulation_alphaDecay">#</a> <i>simulation</i>.<b>alphaDecay</b>([<i>decay</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L106">&lt;&gt;</a></p>
<p>If <em>decay</em> is specified, sets the <a class="reference external" href="#simulation_alpha"><em>alpha</em></a> decay rate to the specified number in the range [0,1] and returns this simulation. If <em>decay</em> is not specified, returns the current <em>alpha</em> decay rate, which defaults to 0.0228… = 1 - <em>pow</em>(0.001, 1 / 300) where 0.001 is the default <a class="reference external" href="#simulation_alphaMin">minimum <em>alpha</em></a>.</p>
<p>The alpha decay rate determines how quickly the current alpha interpolates towards the desired <a class="reference external" href="#simulation_alphaTarget">target <em>alpha</em></a>; since the default target <em>alpha</em> is zero, by default this controls how quickly the simulation cools. Higher decay rates cause the simulation to stabilize more quickly, but risk getting stuck in a local minimum; lower values cause the simulation to take longer to run, but typically converge on a better layout. To have the simulation run forever at the current <em>alpha</em>, set the <em>decay</em> rate to zero; alternatively, set a <a class="reference external" href="#simulation_alphaTarget">target <em>alpha</em></a> greater than the <a class="reference external" href="#simulation_alphaMin">minimum <em>alpha</em></a>.</p>
<p><a name="simulation_alphaTarget" href="#simulation_alphaTarget">#</a> <i>simulation</i>.<b>alphaTarget</b>([<i>target</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L110">&lt;&gt;</a></p>
<p>If <em>target</em> is specified, sets the current target <a class="reference external" href="#simulation_alpha"><em>alpha</em></a> to the specified number in the range [0,1] and returns this simulation. If <em>target</em> is not specified, returns the current target alpha value, which defaults to 0.</p>
<p><a name="simulation_velocityDecay" href="#simulation_velocityDecay">#</a> <i>simulation</i>.<b>velocityDecay</b>([<i>decay</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L114">&lt;&gt;</a></p>
<p>If <em>decay</em> is specified, sets the velocity decay factor to the specified number in the range [0,1] and returns this simulation. If <em>decay</em> is not specified, returns the current velocity decay factor, which defaults to 0.4. The decay factor is akin to atmospheric friction; after the application of any forces during a <a class="reference external" href="#simulation_tick">tick</a>, each node’s velocity is multiplied by 1 - <em>decay</em>. As with lowering the <a class="reference external" href="#simulation_alphaDecay">alpha decay rate</a>, less velocity decay may converge on a better solution, but risks numerical instabilities and oscillation.</p>
<p><a name="simulation_force" href="#simulation_force">#</a> <i>simulation</i>.<b>force</b>(<i>name</i>[, <i>force</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L118">&lt;&gt;</a></p>
<p>If <em>force</em> is specified, assigns the <a class="reference external" href="#forces">force</a> for the specified <em>name</em> and returns this simulation. If <em>force</em> is not specified, returns the force with the specified name, or undefined if there is no such force. (By default, new simulations have no forces.) For example, to create a new simulation to layout a graph, you might say:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">simulation</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">forceSimulation</span><span class="p">(</span><span class="nx">nodes</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">force</span><span class="p">(</span><span class="s2">&quot;charge&quot;</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">forceManyBody</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">force</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">forceLink</span><span class="p">(</span><span class="nx">links</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">force</span><span class="p">(</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">forceCenter</span><span class="p">());</span>
</pre></div>
</div>
<p>To remove the force with the given <em>name</em>, pass null as the <em>force</em>. For example, to remove the charge force:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">simulation</span><span class="p">.</span><span class="nx">force</span><span class="p">(</span><span class="s2">&quot;charge&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
</pre></div>
</div>
<p><a name="simulation_find" href="#simulation_find">#</a> <i>simulation</i>.<b>find</b>(<i>x</i>, <i>y</i>[, <i>radius</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L122">&lt;&gt;</a></p>
<p>Returns the node closest to the position ⟨<em>x</em>,<em>y</em>⟩ with the given search <em>radius</em>. If <em>radius</em> is not specified, it defaults to infinity. If there is no node within the search area, returns undefined.</p>
<p><a name="simulation_on" href="#simulation_on">#</a> <i>simulation</i>.<b>on</b>(<i>typenames</i>, [<i>listener</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L145">&lt;&gt;</a></p>
<p>If <em>listener</em> is specified, sets the event <em>listener</em> for the specified <em>typenames</em> and returns this simulation. If an event listener was already registered for the same type and name, the existing listener is removed before the new listener is added. If <em>listener</em> is null, removes the current event listeners for the specified <em>typenames</em>, if any. If <em>listener</em> is not specified, returns the first currently-assigned listener matching the specified <em>typenames</em>, if any. When a specified event is dispatched, each <em>listener</em> will be invoked with the <code class="docutils literal notranslate"><span class="pre">this</span></code> context as the simulation.</p>
<p>The <em>typenames</em> is a string containing one or more <em>typename</em> separated by whitespace. Each <em>typename</em> is a <em>type</em>, optionally followed by a period (<code class="docutils literal notranslate"><span class="pre">.</span></code>) and a <em>name</em>, such as <code class="docutils literal notranslate"><span class="pre">tick.foo</span></code> and <code class="docutils literal notranslate"><span class="pre">tick.bar</span></code>; the name allows multiple listeners to be registered for the same <em>type</em>. The <em>type</em> must be one of the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tick</span></code> - after each tick of the simulation’s internal timer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">end</span></code> - after the simulation’s timer stops when <em>alpha</em> &lt; <a class="reference external" href="#simulation_alphaMin"><em>alphaMin</em></a>.</p></li>
</ul>
<p>Note that <em>tick</em> events are not dispatched when <a class="reference external" href="#simulation_tick"><em>simulation</em>.tick</a> is called manually; events are only dispatched by the internal timer and are intended for interactive rendering of the simulation. To affect the simulation, register <a class="reference external" href="#simulation_force">forces</a> instead of modifying nodes’ positions or velocities inside a tick event listener.</p>
<p>See <a class="reference external" href="https://github.com/d3/d3-dispatch#dispatch_on"><em>dispatch</em>.on</a> for details.</p>
</div>
<div class="section" id="forces">
<h3>Forces<a class="headerlink" href="#forces" title="Permalink to this headline">¶</a></h3>
<p>A <em>force</em> is simply a function that modifies nodes’ positions or velocities; in this context, a <em>force</em> can apply a classical physical force such as electrical charge or gravity, or it can resolve a geometric constraint, such as keeping nodes within a bounding box or keeping linked nodes a fixed distance apart. For example, a simple positioning force that moves nodes towards the origin ⟨0,0⟩ might be implemented as:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">force</span><span class="p">(</span><span class="nx">alpha</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">alpha</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">node</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="nx">node</span><span class="p">.</span><span class="nx">vx</span> <span class="o">-=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
    <span class="nx">node</span><span class="p">.</span><span class="nx">vy</span> <span class="o">-=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Forces typically read the node’s current position ⟨<em>x</em>,<em>y</em>⟩ and then add to (or subtract from) the node’s velocity ⟨<em>vx</em>,<em>vy</em>⟩. However, forces may also “peek ahead” to the anticipated next position of the node, ⟨<em>x</em> + <em>vx</em>,<em>y</em> + <em>vy</em>⟩; this is necessary for resolving geometric constraints through <a class="reference external" href="https://en.wikipedia.org/wiki/Relaxation_(iterative_method)">iterative relaxation</a>. Forces may also modify the position directly, which is sometimes useful to avoid adding energy to the simulation, such as when recentering the simulation in the viewport.</p>
<p>Simulations typically compose multiple forces as desired. This module provides several for your enjoyment:</p>
<ul class="simple">
<li><p><a class="reference external" href="#centering">Centering</a></p></li>
<li><p><a class="reference external" href="#collision">Collision</a></p></li>
<li><p><a class="reference external" href="#links">Links</a></p></li>
<li><p><a class="reference external" href="#many-body">Many-Body</a></p></li>
<li><p><a class="reference external" href="#positioning">Positioning</a></p></li>
</ul>
<p>Forces may optionally implement <a class="reference external" href="#force_initialize"><em>force</em>.initialize</a> to receive the simulation’s array of nodes.</p>
<p><a name="_force" href="#_force">#</a> <i>force</i>(<i>alpha</i>) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L47">&lt;&gt;</a></p>
<p>Applies this force, optionally observing the specified <em>alpha</em>. Typically, the force is applied to the array of nodes previously passed to <a class="reference external" href="#force_initialize"><em>force</em>.initialize</a>, however, some forces may apply to a subset of nodes, or behave differently. For example, <a class="reference external" href="#links">d3.forceLink</a> applies to the source and target of each link.</p>
<p><a name="force_initialize" href="#force_initialize">#</a> <i>force</i>.<b>initialize</b>(<i>nodes</i>) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/simulation.js#L77">&lt;&gt;</a></p>
<p>Assigns the array of <em>nodes</em> to this force. This method is called when a force is bound to a simulation via <a class="reference external" href="#simulation_force"><em>simulation</em>.force</a> and when the simulation’s nodes change via <a class="reference external" href="#simulation_nodes"><em>simulation</em>.nodes</a>. A force may perform necessary work during initialization, such as evaluating per-node parameters, to avoid repeatedly performing work during each application of the force.</p>
<div class="section" id="centering">
<h4>Centering<a class="headerlink" href="#centering" title="Permalink to this headline">¶</a></h4>
<p>The centering force translates nodes uniformly so that the mean position of all nodes (the center of mass if all nodes have equal weight) is at the given position ⟨<a class="reference external" href="#center_x"><em>x</em></a>,<a class="reference external" href="#center_y"><em>y</em></a>⟩. This force modifies the positions of nodes on each application; it does not modify velocities, as doing so would typically cause the nodes to overshoot and oscillate around the desired center. This force helps keeps nodes in the center of the viewport, and unlike the <a class="reference external" href="#positioning">positioning force</a>, it does not distort their relative positions.</p>
<p><a name="forceCenter" href="#forceCenter">#</a> d3.<b>forceCenter</b>([<i>x</i>, <i>y</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/center.js#L1">&lt;&gt;</a></p>
<p>Creates a new centering force with the specified <a class="reference external" href="#center_x"><em>x</em>-</a> and <a class="reference external" href="#center_y"><em>y</em>-</a> coordinates. If <em>x</em> and <em>y</em> are not specified, they default to ⟨0,0⟩.</p>
<p><a name="center_x" href="#center_x">#</a> <i>center</i>.<b>x</b>([<i>x</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/center.js#L27">&lt;&gt;</a></p>
<p>If <em>x</em> is specified, sets the <em>x</em>-coordinate of the centering position to the specified number and returns this force. If <em>x</em> is not specified, returns the current <em>x</em>-coordinate, which defaults to zero.</p>
<p><a name="center_y" href="#center_y">#</a> <i>center</i>.<b>y</b>([<i>y</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/center.js#L31">&lt;&gt;</a></p>
<p>If <em>y</em> is specified, sets the <em>y</em>-coordinate of the centering position to the specified number and returns this force. If <em>y</em> is not specified, returns the current <em>y</em>-coordinate, which defaults to zero.</p>
</div>
<div class="section" id="collision">
<h4>Collision<a class="headerlink" href="#collision" title="Permalink to this headline">¶</a></h4>
<p>The collision force treats nodes as circles with a given <a class="reference external" href="#collide_radius">radius</a>, rather than points, and prevents nodes from overlapping. More formally, two nodes <em>a</em> and <em>b</em> are separated so that the distance between <em>a</em> and <em>b</em> is at least <em>radius</em>(<em>a</em>) + <em>radius</em>(<em>b</em>). To reduce jitter, this is by default a “soft” constraint with a configurable <a class="reference external" href="#collide_strength">strength</a> and <a class="reference external" href="#collide_iterations">iteration count</a>.</p>
<p><a name="forceCollide" href="#forceCollide">#</a> d3.<b>forceCollide</b>([<i>radius</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/collide.js">&lt;&gt;</a></p>
<p>Creates a new circle collision force with the specified <a class="reference external" href="#collide_radius"><em>radius</em></a>. If <em>radius</em> is not specified, it defaults to the constant one for all nodes.</p>
<p><a name="collide_radius" href="#collide_radius">#</a> <i>collide</i>.<b>radius</b>([<i>radius</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/collide.js#L86">&lt;&gt;</a></p>
<p>If <em>radius</em> is specified, sets the radius accessor to the specified number or function, re-evaluates the radius accessor for each node, and returns this force. If <em>radius</em> is not specified, returns the current radius accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">radius</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The radius accessor is invoked for each <a class="reference external" href="#simulation_nodes">node</a> in the simulation, being passed the <em>node</em> and its zero-based <em>index</em>. The resulting number is then stored internally, such that the radius of each node is only recomputed when the force is initialized or when this method is called with a new <em>radius</em>, and not on every application of the force.</p>
<p><a name="collide_strength" href="#collide_strength">#</a> <i>collide</i>.<b>strength</b>([<i>strength</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/collide.js#L82">&lt;&gt;</a></p>
<p>If <em>strength</em> is specified, sets the force strength to the specified number in the range [0,1] and returns this force. If <em>strength</em> is not specified, returns the current strength which defaults to 0.7.</p>
<p>Overlapping nodes are resolved through iterative relaxation. For each node, the other nodes that are anticipated to overlap at the next tick (using the anticipated positions ⟨<em>x</em> + <em>vx</em>,<em>y</em> + <em>vy</em>⟩) are determined; the node’s velocity is then modified to push the node out of each overlapping node. The change in velocity is dampened by the force’s strength such that the resolution of simultaneous overlaps can be blended together to find a stable solution.</p>
<p><a name="collide_iterations" href="#collide_iterations">#</a> <i>collide</i>.<b>iterations</b>([<i>iterations</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/collide.js#L78">&lt;&gt;</a></p>
<p>If <em>iterations</em> is specified, sets the number of iterations per application to the specified number and returns this force. If <em>iterations</em> is not specified, returns the current iteration count which defaults to 1. Increasing the number of iterations greatly increases the rigidity of the constraint and avoids partial overlap of nodes, but also increases the runtime cost to evaluate the force.</p>
</div>
<div class="section" id="links">
<h4>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h4>
<p>The link force pushes linked nodes together or apart according to the desired <a class="reference external" href="#link_distance">link distance</a>. The strength of the force is proportional to the difference between the linked nodes’ distance and the target distance, similar to a spring force.</p>
<p><a name="forceLink" href="#forceLink">#</a> d3.<b>forceLink</b>([<i>links</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/link.js">&lt;&gt;</a></p>
<p>Creates a new link force with the specified <em>links</em> and default parameters. If <em>links</em> is not specified, it defaults to the empty array.</p>
<p><a name="link_links" href="#link_links">#</a> <i>link</i>.<b>links</b>([<i>links</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/link.js#L92">&lt;&gt;</a></p>
<p>If <em>links</em> is specified, sets the array of links associated with this force, recomputes the <a class="reference external" href="#link_distance">distance</a> and <a class="reference external" href="#link_strength">strength</a> parameters for each link, and returns this force. If <em>links</em> is not specified, returns the current array of links, which defaults to the empty array.</p>
<p>Each link is an object with the following properties:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code> - the link’s source node; see <a class="reference external" href="#simulation_nodes"><em>simulation</em>.nodes</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">target</span></code> - the link’s target node; see <a class="reference external" href="#simulation_nodes"><em>simulation</em>.nodes</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> - the zero-based index into <em>links</em>, assigned by this method</p></li>
</ul>
<p>For convenience, a link’s source and target properties may be initialized using numeric or string identifiers rather than object references; see <a class="reference external" href="#link_id"><em>link</em>.id</a>. When the link force is <a class="reference external" href="#force_initialize">initialized</a> (or re-initialized, as when the nodes or links change), any <em>link</em>.source or <em>link</em>.target property which is <em>not</em> an object is replaced by an object reference to the corresponding <em>node</em> with the given identifier.</p>
<p>If the specified array of <em>links</em> is modified, such as when links are added to or removed from the simulation, this method must be called again with the new (or changed) array to notify the force of the change; the force does not make a defensive copy of the specified array.</p>
<p><a name="link_id" href="#link_id">#</a> <i>link</i>.<b>id</b>([<i>id</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/link.js#L96">&lt;&gt;</a></p>
<p>If <em>id</em> is specified, sets the node id accessor to the specified function and returns this force. If <em>id</em> is not specified, returns the current node id accessor, which defaults to the numeric <em>node</em>.index:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">id</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">index</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The default id accessor allows each link’s source and target to be specified as a zero-based index into the <a class="reference external" href="#simulation_nodes">nodes</a> array. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;Carol&quot;</span><span class="p">}</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">links</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="o">:</span> <span class="mf">1</span><span class="p">},</span> <span class="c1">// Alice → Bob</span>
  <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">}</span> <span class="c1">// Bob → Carol</span>
<span class="p">];</span>
</pre></div>
</div>
<p>Now consider a different id accessor that returns a string:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">id</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With this accessor, you can use named sources and targets:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;Carol&quot;</span><span class="p">}</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">links</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="o">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="o">:</span> <span class="s2">&quot;Carol&quot;</span><span class="p">}</span>
<span class="p">];</span>
</pre></div>
</div>
<p>This is particularly useful when representing graphs in JSON, as JSON does not allow references. See <a class="reference external" href="http://bl.ocks.org/mbostock/f584aa36df54c451c94a9d0798caed35">this example</a>.</p>
<p>The id accessor is invoked for each node whenever the force is initialized, as when the <a class="reference external" href="#simulation_nodes">nodes</a> or <a class="reference external" href="#link_links">links</a> change, being passed the node and its zero-based index.</p>
<p><a name="link_distance" href="#link_distance">#</a> <i>link</i>.<b>distance</b>([<i>distance</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/link.js#L108">&lt;&gt;</a></p>
<p>If <em>distance</em> is specified, sets the distance accessor to the specified number or function, re-evaluates the distance accessor for each link, and returns this force. If <em>distance</em> is not specified, returns the current distance accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">distance</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">30</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The distance accessor is invoked for each <a class="reference external" href="#link_links">link</a>, being passed the <em>link</em> and its zero-based <em>index</em>. The resulting number is then stored internally, such that the distance of each link is only recomputed when the force is initialized or when this method is called with a new <em>distance</em>, and not on every application of the force.</p>
<p><a name="link_strength" href="#link_strength">#</a> <i>link</i>.<b>strength</b>([<i>strength</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/link.js#L104">&lt;&gt;</a></p>
<p>If <em>strength</em> is specified, sets the strength accessor to the specified number or function, re-evaluates the strength accessor for each link, and returns this force. If <em>strength</em> is not specified, returns the current strength accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">strength</span><span class="p">(</span><span class="nx">link</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">1</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">count</span><span class="p">(</span><span class="nx">link</span><span class="p">.</span><span class="nx">source</span><span class="p">),</span> <span class="nx">count</span><span class="p">(</span><span class="nx">link</span><span class="p">.</span><span class="nx">target</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Where <em>count</em>(<em>node</em>) is a function that returns the number of links with the given node as a source or target. This default was chosen because it automatically reduces the strength of links connected to heavily-connected nodes, improving stability.</p>
<p>The strength accessor is invoked for each <a class="reference external" href="#link_links">link</a>, being passed the <em>link</em> and its zero-based <em>index</em>. The resulting number is then stored internally, such that the strength of each link is only recomputed when the force is initialized or when this method is called with a new <em>strength</em>, and not on every application of the force.</p>
<p><a name="link_iterations" href="#link_iterations">#</a> <i>link</i>.<b>iterations</b>([<i>iterations</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/link.js#L100">&lt;&gt;</a></p>
<p>If <em>iterations</em> is specified, sets the number of iterations per application to the specified number and returns this force. If <em>iterations</em> is not specified, returns the current iteration count which defaults to 1. Increasing the number of iterations greatly increases the rigidity of the constraint and is useful for <a class="reference external" href="http://bl.ocks.org/mbostock/1b64ec067fcfc51e7471d944f51f1611">complex structures such as lattices</a>, but also increases the runtime cost to evaluate the force.</p>
</div>
<div class="section" id="many-body">
<h4>Many-Body<a class="headerlink" href="#many-body" title="Permalink to this headline">¶</a></h4>
<p>The many-body (or <em>n</em>-body) force applies mutually amongst all <a class="reference external" href="#simulation_nodes">nodes</a>. It can be used to simulate gravity (attraction) if the <a class="reference external" href="#manyBody_strength">strength</a> is positive, or electrostatic charge (repulsion) if the strength is negative. This implementation uses quadtrees and the <a class="reference external" href="https://en.wikipedia.org/wiki/Barnes%E2%80%93Hut_simulation">Barnes–Hut approximation</a> to greatly improve performance; the accuracy can be customized using the <a class="reference external" href="#manyBody_theta">theta</a> parameter.</p>
<p>Unlike links, which only affect two linked nodes, the charge force is global: every node affects every other node, even if they are on disconnected subgraphs.</p>
<p><a name="forceManyBody" href="#forceManyBody">#</a> d3.<b>forceManyBody</b>() <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/manyBody.js">&lt;&gt;</a></p>
<p>Creates a new many-body force with the default parameters.</p>
<p><a name="manyBody_strength" href="#manyBody_strength">#</a> <i>manyBody</i>.<b>strength</b>([<i>strength</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/manyBody.js#L97">&lt;&gt;</a></p>
<p>If <em>strength</em> is specified, sets the strength accessor to the specified number or function, re-evaluates the strength accessor for each node, and returns this force. A positive value causes nodes to attract each other, similar to gravity, while a negative value causes nodes to repel each other, similar to electrostatic charge. If <em>strength</em> is not specified, returns the current strength accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">strength</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">-</span><span class="mf">30</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The strength accessor is invoked for each <a class="reference external" href="#simulation_nodes">node</a> in the simulation, being passed the <em>node</em> and its zero-based <em>index</em>. The resulting number is then stored internally, such that the strength of each node is only recomputed when the force is initialized or when this method is called with a new <em>strength</em>, and not on every application of the force.</p>
<p><a name="manyBody_theta" href="#manyBody_theta">#</a> <i>manyBody</i>.<b>theta</b>([<i>theta</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/manyBody.js#L109">&lt;&gt;</a></p>
<p>If <em>theta</em> is specified, sets the Barnes–Hut approximation criterion to the specified number and returns this force. If <em>theta</em> is not specified, returns the current value, which defaults to 0.9.</p>
<p>To accelerate computation, this force implements the <a class="reference external" href="http://en.wikipedia.org/wiki/Barnes%E2%80%93Hut_simulation">Barnes–Hut approximation</a> which takes O(<em>n</em> log <em>n</em>) per application where <em>n</em> is the number of <a class="reference external" href="#simulation_nodes">nodes</a>. For each application, a <a class="reference external" href="https://github.com/d3/d3-quadtree">quadtree</a> stores the current node positions; then for each node, the combined force of all other nodes on the given node is computed. For a cluster of nodes that is far away, the charge force can be approximated by treating the cluster as a single, larger node. The <em>theta</em> parameter determines the accuracy of the approximation: if the ratio <em>w</em> / <em>l</em> of the width <em>w</em> of the quadtree cell to the distance <em>l</em> from the node to the cell’s center of mass is less than <em>theta</em>, all nodes in the given cell are treated as a single node rather than individually.</p>
<p><a name="manyBody_distanceMin" href="#manyBody_distanceMin">#</a> <i>manyBody</i>.<b>distanceMin</b>([<i>distance</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/manyBody.js#L101">&lt;&gt;</a></p>
<p>If <em>distance</em> is specified, sets the minimum distance between nodes over which this force is considered. If <em>distance</em> is not specified, returns the current minimum distance, which defaults to 1. A minimum distance establishes an upper bound on the strength of the force between two nearby nodes, avoiding instability. In particular, it avoids an infinitely-strong force if two nodes are exactly coincident; in this case, the direction of the force is random.</p>
<p><a name="manyBody_distanceMax" href="#manyBody_distanceMax">#</a> <i>manyBody</i>.<b>distanceMax</b>([<i>distance</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/manyBody.js#L105">&lt;&gt;</a></p>
<p>If <em>distance</em> is specified, sets the maximum distance between nodes over which this force is considered. If <em>distance</em> is not specified, returns the current maximum distance, which defaults to infinity. Specifying a finite maximum distance improves performance and produces a more localized layout.</p>
</div>
<div class="section" id="positioning">
<h4>Positioning<a class="headerlink" href="#positioning" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference external" href="#forceX"><em>x</em></a>- and <a class="reference external" href="#forceY"><em>y</em></a>-positioning forces push nodes towards a desired position along the given dimension with a configurable strength. The <a class="reference external" href="#forceRadial"><em>radial</em></a> force is similar, except it pushes nodes towards the closest point on a given circle. The strength of the force is proportional to the one-dimensional distance between the node’s position and the target position. While these forces can be used to position individual nodes, they are intended primarily for global forces that apply to all (or most) nodes.</p>
<p><a name="forceX" href="#forceX">#</a> d3.<b>forceX</b>([<i>x</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/x.js">&lt;&gt;</a></p>
<p>Creates a new positioning force along the <em>x</em>-axis towards the given position <a class="reference external" href="#x_x"><em>x</em></a>. If <em>x</em> is not specified, it defaults to 0.</p>
<p><a name="x_strength" href="#x_strength">#</a> <i>x</i>.<b>strength</b>([<i>strength</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/x.js#L32">&lt;&gt;</a></p>
<p>If <em>strength</em> is specified, sets the strength accessor to the specified number or function, re-evaluates the strength accessor for each node, and returns this force. The <em>strength</em> determines how much to increment the node’s <em>x</em>-velocity: (<a class="reference external" href="#x_x"><em>x</em></a> - <em>node</em>.x) × <em>strength</em>. For example, a value of 0.1 indicates that the node should move a tenth of the way from its current <em>x</em>-position to the target <em>x</em>-position with each application. Higher values moves nodes more quickly to the target position, often at the expense of other forces or constraints. A value outside the range [0,1] is not recommended.</p>
<p>If <em>strength</em> is not specified, returns the current strength accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">strength</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">0.1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The strength accessor is invoked for each <a class="reference external" href="#simulation_nodes">node</a> in the simulation, being passed the <em>node</em> and its zero-based <em>index</em>. The resulting number is then stored internally, such that the strength of each node is only recomputed when the force is initialized or when this method is called with a new <em>strength</em>, and not on every application of the force.</p>
<p><a name="x_x" href="#x_x">#</a> <i>x</i>.<b>x</b>([<i>x</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/x.js#L36">&lt;&gt;</a></p>
<p>If <em>x</em> is specified, sets the <em>x</em>-coordinate accessor to the specified number or function, re-evaluates the <em>x</em>-accessor for each node, and returns this force. If <em>x</em> is not specified, returns the current <em>x</em>-accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">x</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <em>x</em>-accessor is invoked for each <a class="reference external" href="#simulation_nodes">node</a> in the simulation, being passed the <em>node</em> and its zero-based <em>index</em>. The resulting number is then stored internally, such that the target <em>x</em>-coordinate of each node is only recomputed when the force is initialized or when this method is called with a new <em>x</em>, and not on every application of the force.</p>
<p><a name="forceY" href="#forceY">#</a> d3.<b>forceY</b>([<i>y</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/y.js">&lt;&gt;</a></p>
<p>Creates a new positioning force along the <em>y</em>-axis towards the given position <a class="reference external" href="#y_y"><em>y</em></a>. If <em>y</em> is not specified, it defaults to 0.</p>
<p><a name="y_strength" href="#y_strength">#</a> <i>y</i>.<b>strength</b>([<i>strength</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/y.js#L32">&lt;&gt;</a></p>
<p>If <em>strength</em> is specified, sets the strength accessor to the specified number or function, re-evaluates the strength accessor for each node, and returns this force. The <em>strength</em> determines how much to increment the node’s <em>y</em>-velocity: (<a class="reference external" href="#y_y"><em>y</em></a> - <em>node</em>.y) × <em>strength</em>. For example, a value of 0.1 indicates that the node should move a tenth of the way from its current <em>y</em>-position to the target <em>y</em>-position with each application. Higher values moves nodes more quickly to the target position, often at the expense of other forces or constraints. A value outside the range [0,1] is not recommended.</p>
<p>If <em>strength</em> is not specified, returns the current strength accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">strength</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">0.1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The strength accessor is invoked for each <a class="reference external" href="#simulation_nodes">node</a> in the simulation, being passed the <em>node</em> and its zero-based <em>index</em>. The resulting number is then stored internally, such that the strength of each node is only recomputed when the force is initialized or when this method is called with a new <em>strength</em>, and not on every application of the force.</p>
<p><a name="y_y" href="#y_y">#</a> <i>y</i>.<b>y</b>([<i>y</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/y.js#L36">&lt;&gt;</a></p>
<p>If <em>y</em> is specified, sets the <em>y</em>-coordinate accessor to the specified number or function, re-evaluates the <em>y</em>-accessor for each node, and returns this force. If <em>y</em> is not specified, returns the current <em>y</em>-accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">y</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <em>y</em>-accessor is invoked for each <a class="reference external" href="#simulation_nodes">node</a> in the simulation, being passed the <em>node</em> and its zero-based <em>index</em>. The resulting number is then stored internally, such that the target <em>y</em>-coordinate of each node is only recomputed when the force is initialized or when this method is called with a new <em>y</em>, and not on every application of the force.</p>
<p><a name="forceRadial" href="#forceRadial">#</a> d3.<b>forceRadial</b>(<i>radius</i>[, <i>x</i>][, <i>y</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/radial.js">&lt;&gt;</a></p>
<p><a class="reference external" href="https://bl.ocks.org/mbostock/cd98bf52e9067e26945edd95e8cf6ef9"><img alt="Radial Force" src="https://raw.githubusercontent.com/d3/d3-force/master/img/radial.png" width="420" height="219"></a></p>
<p>Creates a new positioning force towards a circle of the specified <a class="reference external" href="#radial_radius"><em>radius</em></a> centered at ⟨<a class="reference external" href="#radial_x"><em>x</em></a>,<a class="reference external" href="#radial_y"><em>y</em></a>⟩. If <em>x</em> and <em>y</em> are not specified, they default to ⟨0,0⟩.</p>
<p><a name="radial_strength" href="#radial_strength">#</a> <i>radial</i>.<b>strength</b>([<i>strength</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/radial.js">&lt;&gt;</a></p>
<p>If <em>strength</em> is specified, sets the strength accessor to the specified number or function, re-evaluates the strength accessor for each node, and returns this force. The <em>strength</em> determines how much to increment the node’s <em>x</em>- and <em>y</em>-velocity. For example, a value of 0.1 indicates that the node should move a tenth of the way from its current position to the closest point on the circle with each application. Higher values moves nodes more quickly to the target position, often at the expense of other forces or constraints. A value outside the range [0,1] is not recommended.</p>
<p>If <em>strength</em> is not specified, returns the current strength accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">strength</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">0.1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The strength accessor is invoked for each <a class="reference external" href="#simulation_nodes">node</a> in the simulation, being passed the <em>node</em> and its zero-based <em>index</em>. The resulting number is then stored internally, such that the strength of each node is only recomputed when the force is initialized or when this method is called with a new <em>strength</em>, and not on every application of the force.</p>
<p><a name="radial_radius" href="#radial_radius">#</a> <i>radial</i>.<b>radius</b>([<i>radius</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/radial.js">&lt;&gt;</a></p>
<p>If <em>radius</em> is specified, sets the circle <em>radius</em> to the specified number or function, re-evaluates the <em>radius</em> accessor for each node, and returns this force. If <em>radius</em> is not specified, returns the current <em>radius</em> accessor.</p>
<p>The <em>radius</em> accessor is invoked for each <a class="reference external" href="#simulation_nodes">node</a> in the simulation, being passed the <em>node</em> and its zero-based <em>index</em>. The resulting number is then stored internally, such that the target radius of each node is only recomputed when the force is initialized or when this method is called with a new <em>radius</em>, and not on every application of the force.</p>
<p><a name="radial_x" href="#radial_x">#</a> <i>radial</i>.<b>x</b>([<i>x</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/radial.js">&lt;&gt;</a></p>
<p>If <em>x</em> is specified, sets the <em>x</em>-coordinate of the circle center to the specified number and returns this force. If <em>x</em> is not specified, returns the current <em>x</em>-coordinate of the center, which defaults to zero.</p>
<p><a name="radial_y" href="#radial_y">#</a> <i>radial</i>.<b>y</b>([<i>y</i>]) <a class="reference external" href="https://github.com/d3/d3-force/blob/master/src/radial.js">&lt;&gt;</a></p>
<p>If <em>y</em> is specified, sets the <em>y</em>-coordinate of the circle center to the specified number and returns this force. If <em>y</em> is not specified, returns the current <em>y</em>-coordinate of the center, which defaults to zero.</p>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AyrtonB/ESDA-Spatial",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-d3-force-2.0.1-31750eee8c43535301d571195bf9683beda534e2-integrity/node_modules/d3-force"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ayrton Bourn, Santiago De La Fuente, Clem Attwood, Joanna Kuleszo, Camilo Perico<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../../../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>