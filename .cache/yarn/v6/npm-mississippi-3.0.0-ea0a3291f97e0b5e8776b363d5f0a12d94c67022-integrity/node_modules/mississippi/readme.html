
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mississippi &#8212; Spatial Analysis for Energy</title>
    
  <link rel="stylesheet" href="../../../../../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  <img src="../../../../../../_static/logo.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Spatial Analysis for Energy</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Intro.html">
   UCL Energy Systems &amp; Data Analytics - Spatial Module
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/03-Working-with-Vector-Data.html">
   Working with Vector Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/04-Working-with-Raster-Data.html">
   Working with Raster Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Extensions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../extensions/01-Mapping-with-ggplot.html">
   Mapping with ggplot
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Setup.html">
   Set-Up Instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Jupyter-Anaconda.html">
   What is Jupyter/Anaconda?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/ESDA%20Course.html">
   ESDA Course
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-mississippi-3.0.0-ea0a3291f97e0b5e8776b363d5f0a12d94c67022-integrity/node_modules/mississippi/readme.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   usage
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#methods">
   methods
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pipe">
     pipe
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#miss-pipe-stream1-stream2-stream3-cb">
       <code class="docutils literal notranslate">
        <span class="pre">
         miss.pipe(stream1,
        </span>
        <span class="pre">
         stream2,
        </span>
        <span class="pre">
         stream3,
        </span>
        <span class="pre">
         ...,
        </span>
        <span class="pre">
         cb)
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#original-module">
       original module
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example">
       example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#each">
     each
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#miss-each-stream-each-done">
       <code class="docutils literal notranslate">
        <span class="pre">
         miss.each(stream,
        </span>
        <span class="pre">
         each,
        </span>
        <span class="pre">
         [done])
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       original module
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pipeline">
     pipeline
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#var-pipeline-miss-pipeline-stream1-stream2-stream3">
       <code class="docutils literal notranslate">
        <span class="pre">
         var
        </span>
        <span class="pre">
         pipeline
        </span>
        <span class="pre">
         =
        </span>
        <span class="pre">
         miss.pipeline(stream1,
        </span>
        <span class="pre">
         stream2,
        </span>
        <span class="pre">
         stream3,
        </span>
        <span class="pre">
         ...)
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id3">
       original module
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#duplex">
     duplex
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#var-duplex-miss-duplex-writable-readable-opts">
       <code class="docutils literal notranslate">
        <span class="pre">
         var
        </span>
        <span class="pre">
         duplex
        </span>
        <span class="pre">
         =
        </span>
        <span class="pre">
         miss.duplex([writable,
        </span>
        <span class="pre">
         readable,
        </span>
        <span class="pre">
         opts])
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id5">
       original module
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id6">
       example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#through">
     through
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#var-transformer-miss-through-options-transformfunction-flushfunction">
       <code class="docutils literal notranslate">
        <span class="pre">
         var
        </span>
        <span class="pre">
         transformer
        </span>
        <span class="pre">
         =
        </span>
        <span class="pre">
         miss.through([options,
        </span>
        <span class="pre">
         transformFunction,
        </span>
        <span class="pre">
         flushFunction])
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id7">
       original module
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id8">
       example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#from">
     from
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#miss-from-opts-read">
       <code class="docutils literal notranslate">
        <span class="pre">
         miss.from([opts],
        </span>
        <span class="pre">
         read)
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id9">
       original module
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id10">
       example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#to">
     to
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#miss-to-options-write-flush">
       <code class="docutils literal notranslate">
        <span class="pre">
         miss.to([options],
        </span>
        <span class="pre">
         write,
        </span>
        <span class="pre">
         [flush])
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id11">
       original module
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id12">
       example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#concat">
     concat
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#var-concat-miss-concat-cb">
       <code class="docutils literal notranslate">
        <span class="pre">
         var
        </span>
        <span class="pre">
         concat
        </span>
        <span class="pre">
         =
        </span>
        <span class="pre">
         miss.concat(cb)
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id13">
       original module
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id14">
       example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#finished">
     finished
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#miss-finished-stream-cb">
       <code class="docutils literal notranslate">
        <span class="pre">
         miss.finished(stream,
        </span>
        <span class="pre">
         cb)
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id15">
       original module
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id16">
       example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parallel">
     parallel
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#miss-parallel-concurrency-each">
       <code class="docutils literal notranslate">
        <span class="pre">
         miss.parallel(concurrency,
        </span>
        <span class="pre">
         each)
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id17">
       original module
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id18">
       example
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#see-also">
   see also
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   license
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="mississippi">
<h1>mississippi<a class="headerlink" href="#mississippi" title="Permalink to this headline">¶</a></h1>
<p>a collection of useful stream utility modules. learn how the modules work using this and then pick the ones you want and use them individually</p>
<p>the goal of the modules included in mississippi is to make working with streams easy without sacrificing speed, error handling or composability.</p>
<div class="section" id="usage">
<h2>usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">miss</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mississippi&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="methods">
<h2>methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#pipe">pipe</a></p></li>
<li><p><a class="reference external" href="#each">each</a></p></li>
<li><p><a class="reference external" href="#pipeline">pipeline</a></p></li>
<li><p><a class="reference external" href="#duplex">duplex</a></p></li>
<li><p><a class="reference external" href="#through">through</a></p></li>
<li><p><a class="reference external" href="#from">from</a></p></li>
<li><p><a class="reference external" href="#to">to</a></p></li>
<li><p><a class="reference external" href="#concat">concat</a></p></li>
<li><p><a class="reference external" href="#finished">finished</a></p></li>
<li><p><a class="reference external" href="#parallel">parallel</a></p></li>
</ul>
<div class="section" id="pipe">
<h3>pipe<a class="headerlink" href="#pipe" title="Permalink to this headline">¶</a></h3>
<div class="section" id="miss-pipe-stream1-stream2-stream3-cb">
<h4><code class="docutils literal notranslate"><span class="pre">miss.pipe(stream1,</span> <span class="pre">stream2,</span> <span class="pre">stream3,</span> <span class="pre">...,</span> <span class="pre">cb)</span></code><a class="headerlink" href="#miss-pipe-stream1-stream2-stream3-cb" title="Permalink to this headline">¶</a></h4>
<p>Pipes streams together and destroys all of them if one of them closes. Calls <code class="docutils literal notranslate"><span class="pre">cb</span></code> with <code class="docutils literal notranslate"><span class="pre">(error)</span></code> if there was an error in any of the streams.</p>
<p>When using standard <code class="docutils literal notranslate"><span class="pre">source.pipe(destination)</span></code> the source will <em>not</em> be destroyed if the destination emits close or error. You are also not able to provide a callback to tell when the pipe has finished.</p>
<p><code class="docutils literal notranslate"><span class="pre">miss.pipe</span></code> does these two things for you, ensuring you handle stream errors 100% of the time (unhandled errors are probably the most common bug in most node streams code)</p>
</div>
<div class="section" id="original-module">
<h4>original module<a class="headerlink" href="#original-module" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">miss.pipe</span></code> is provided by <a class="reference external" href="https://www.npmjs.com/package/pump"><code class="docutils literal notranslate"><span class="pre">require('pump')</span></code></a></p>
</div>
<div class="section" id="example">
<h4>example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// lets do a simple file copy</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">read</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;./original.zip&#39;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">write</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="s1">&#39;./copy.zip&#39;</span><span class="p">)</span>

<span class="c1">// use miss.pipe instead of read.pipe(write)</span>
<span class="nx">miss</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">read</span><span class="p">,</span> <span class="nx">write</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Copy error!&#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Copied successfully&#39;</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="each">
<h3>each<a class="headerlink" href="#each" title="Permalink to this headline">¶</a></h3>
<div class="section" id="miss-each-stream-each-done">
<h4><code class="docutils literal notranslate"><span class="pre">miss.each(stream,</span> <span class="pre">each,</span> <span class="pre">[done])</span></code><a class="headerlink" href="#miss-each-stream-each-done" title="Permalink to this headline">¶</a></h4>
<p>Iterate the data in <code class="docutils literal notranslate"><span class="pre">stream</span></code> one chunk at a time. Your <code class="docutils literal notranslate"><span class="pre">each</span></code> function will be called with <code class="docutils literal notranslate"><span class="pre">(data,</span> <span class="pre">next)</span></code> where data is a data chunk and next is a callback. Call <code class="docutils literal notranslate"><span class="pre">next</span></code> when you are ready to consume the next chunk.</p>
<p>Optionally you can call <code class="docutils literal notranslate"><span class="pre">next</span></code> with an error to destroy the stream. You can also pass the optional third argument, <code class="docutils literal notranslate"><span class="pre">done</span></code>, which is a function that will be called with <code class="docutils literal notranslate"><span class="pre">(err)</span></code> when the stream ends. The <code class="docutils literal notranslate"><span class="pre">err</span></code> argument will be populated with an error if the stream emitted an error.</p>
</div>
<div class="section" id="id1">
<h4>original module<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">miss.each</span></code> is provided by <a class="reference external" href="https://www.npmjs.com/package/stream-each"><code class="docutils literal notranslate"><span class="pre">require('stream-each')</span></code></a></p>
</div>
<div class="section" id="id2">
<h4>example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">split</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;split2&#39;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">newLineSeparatedNumbers</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;numbers.txt&#39;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">pipeline</span> <span class="o">=</span> <span class="nx">miss</span><span class="p">.</span><span class="nx">pipeline</span><span class="p">(</span><span class="nx">newLineSeparatedNumbers</span><span class="p">,</span> <span class="nx">split</span><span class="p">())</span>
<span class="nx">miss</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">pipeline</span><span class="p">,</span> <span class="nx">eachLine</span><span class="p">,</span> <span class="nx">done</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mf">0</span>

<span class="kd">function</span> <span class="nx">eachLine</span> <span class="p">(</span><span class="nx">line</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">sum</span> <span class="o">+=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">line</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
  <span class="nx">next</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">done</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;sum is&#39;</span><span class="p">,</span> <span class="nx">sum</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pipeline">
<h3>pipeline<a class="headerlink" href="#pipeline" title="Permalink to this headline">¶</a></h3>
<div class="section" id="var-pipeline-miss-pipeline-stream1-stream2-stream3">
<h4><code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">pipeline</span> <span class="pre">=</span> <span class="pre">miss.pipeline(stream1,</span> <span class="pre">stream2,</span> <span class="pre">stream3,</span> <span class="pre">...)</span></code><a class="headerlink" href="#var-pipeline-miss-pipeline-stream1-stream2-stream3" title="Permalink to this headline">¶</a></h4>
<p>Builds a pipeline from all the transform streams passed in as arguments by piping them together and returning a single stream object that lets you write to the first stream and read from the last stream.</p>
<p>If you are pumping object streams together use <code class="docutils literal notranslate"><span class="pre">pipeline</span> <span class="pre">=</span> <span class="pre">miss.pipeline.obj(s1,</span> <span class="pre">s2,</span> <span class="pre">...)</span></code>.</p>
<p>If any of the streams in the pipeline emits an error or gets destroyed, or you destroy the stream it returns, all of the streams will be destroyed and cleaned up for you.</p>
</div>
<div class="section" id="id3">
<h4>original module<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">miss.pipeline</span></code> is provided by <a class="reference external" href="https://www.npmjs.com/package/pumpify"><code class="docutils literal notranslate"><span class="pre">require('pumpify')</span></code></a></p>
</div>
<div class="section" id="id4">
<h4>example<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// first create some transform streams (note: these two modules are fictional)</span>
<span class="kd">var</span> <span class="nx">imageResize</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;image-resizer-stream&#39;</span><span class="p">)({</span><span class="nx">width</span><span class="o">:</span> <span class="mf">400</span><span class="p">})</span>
<span class="kd">var</span> <span class="nx">pngOptimizer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;png-optimizer-stream&#39;</span><span class="p">)({</span><span class="nx">quality</span><span class="o">:</span> <span class="mf">60</span><span class="p">})</span>

<span class="c1">// instead of doing a.pipe(b), use pipelin</span>
<span class="kd">var</span> <span class="nx">resizeAndOptimize</span> <span class="o">=</span> <span class="nx">miss</span><span class="p">.</span><span class="nx">pipeline</span><span class="p">(</span><span class="nx">imageResize</span><span class="p">,</span> <span class="nx">pngOptimizer</span><span class="p">)</span>
<span class="c1">// `resizeAndOptimize` is a transform stream. when you write to it, it writes</span>
<span class="c1">// to `imageResize`. when you read from it, it reads from `pngOptimizer`.</span>
<span class="c1">// it handles piping all the streams together for you</span>

<span class="c1">// use it like any other transform stream</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">read</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;./image.png&#39;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">write</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="s1">&#39;./resized-and-optimized.png&#39;</span><span class="p">)</span>

<span class="nx">miss</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">read</span><span class="p">,</span> <span class="nx">resizeAndOptimize</span><span class="p">,</span> <span class="nx">write</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Image processing error!&#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Image processed successfully&#39;</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="duplex">
<h3>duplex<a class="headerlink" href="#duplex" title="Permalink to this headline">¶</a></h3>
<div class="section" id="var-duplex-miss-duplex-writable-readable-opts">
<h4><code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">duplex</span> <span class="pre">=</span> <span class="pre">miss.duplex([writable,</span> <span class="pre">readable,</span> <span class="pre">opts])</span></code><a class="headerlink" href="#var-duplex-miss-duplex-writable-readable-opts" title="Permalink to this headline">¶</a></h4>
<p>Take two separate streams, a writable and a readable, and turn them into a single <a class="reference external" href="https://nodejs.org/api/stream.html#stream_class_stream_duplex">duplex (readable and writable) stream</a>.</p>
<p>The returned stream will emit data from the readable. When you write to it it writes to the writable.</p>
<p>You can either choose to supply the writable and the readable at the time you create the stream, or you can do it later using the <code class="docutils literal notranslate"><span class="pre">.setWritable</span></code> and <code class="docutils literal notranslate"><span class="pre">.setReadable</span></code> methods and data written to the stream in the meantime will be buffered for you.</p>
</div>
<div class="section" id="id5">
<h4>original module<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">miss.duplex</span></code> is provided by <a class="reference external" href="https://www.npmjs.com/package/duplexify"><code class="docutils literal notranslate"><span class="pre">require('duplexify')</span></code></a></p>
</div>
<div class="section" id="id6">
<h4>example<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// lets spawn a process and take its stdout and stdin and combine them into 1 stream</span>
<span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;child_process&#39;</span><span class="p">)</span>

<span class="c1">// @- tells it to read from stdin, --data-binary sets &#39;raw&#39; binary mode</span>
<span class="kd">var</span> <span class="nx">curl</span> <span class="o">=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">spawn</span><span class="p">(</span><span class="s1">&#39;curl -X POST --data-binary @- http://foo.com&#39;</span><span class="p">)</span>

<span class="c1">// duplexCurl will write to stdin and read from stdout</span>
<span class="kd">var</span> <span class="nx">duplexCurl</span> <span class="o">=</span> <span class="nx">miss</span><span class="p">.</span><span class="nx">duplex</span><span class="p">(</span><span class="nx">curl</span><span class="p">.</span><span class="nx">stdin</span><span class="p">,</span> <span class="nx">curl</span><span class="p">.</span><span class="nx">stdout</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="through">
<h3>through<a class="headerlink" href="#through" title="Permalink to this headline">¶</a></h3>
<div class="section" id="var-transformer-miss-through-options-transformfunction-flushfunction">
<h4><code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">transformer</span> <span class="pre">=</span> <span class="pre">miss.through([options,</span> <span class="pre">transformFunction,</span> <span class="pre">flushFunction])</span></code><a class="headerlink" href="#var-transformer-miss-through-options-transformfunction-flushfunction" title="Permalink to this headline">¶</a></h4>
<p>Make a custom <a class="reference external" href="https://nodejs.org/docs/latest/api/stream.html#stream_class_stream_transform">transform stream</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">options</span></code> object is passed to the internal transform stream and can be used to create an <code class="docutils literal notranslate"><span class="pre">objectMode</span></code> stream (or use the shortcut <code class="docutils literal notranslate"><span class="pre">miss.through.obj([...])</span></code>)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">transformFunction</span></code> is called when data is available for the writable side and has the signature <code class="docutils literal notranslate"><span class="pre">(chunk,</span> <span class="pre">encoding,</span> <span class="pre">cb)</span></code>. Within the function, add data to the readable side any number of times with <code class="docutils literal notranslate"><span class="pre">this.push(data)</span></code>. Call <code class="docutils literal notranslate"><span class="pre">cb()</span></code> to indicate processing of the <code class="docutils literal notranslate"><span class="pre">chunk</span></code> is complete. Or to easily emit a single error or chunk, call <code class="docutils literal notranslate"><span class="pre">cb(err,</span> <span class="pre">chunk)</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">flushFunction</span></code>, with signature <code class="docutils literal notranslate"><span class="pre">(cb)</span></code>, is called just before the stream is complete and should be used to wrap up stream processing.</p>
</div>
<div class="section" id="id7">
<h4>original module<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">miss.through</span></code> is provided by <a class="reference external" href="https://www.npmjs.com/package/through2"><code class="docutils literal notranslate"><span class="pre">require('through2')</span></code></a></p>
</div>
<div class="section" id="id8">
<h4>example<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">read</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;./boring_lowercase.txt&#39;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">write</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="s1">&#39;./AWESOMECASE.TXT&#39;</span><span class="p">)</span>

<span class="c1">// Leaving out the options object</span>
<span class="kd">var</span> <span class="nx">uppercaser</span> <span class="o">=</span> <span class="nx">miss</span><span class="p">.</span><span class="nx">through</span><span class="p">(</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">,</span> <span class="nx">enc</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">cb</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">chunk</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">toUpperCase</span><span class="p">())</span>
  <span class="p">},</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">cb</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;ONE LAST BIT OF UPPERCASE&#39;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">)</span>

<span class="nx">miss</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">read</span><span class="p">,</span> <span class="nx">uppercaser</span><span class="p">,</span> <span class="nx">write</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Trouble uppercasing!&#39;</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Splendid uppercasing!&#39;</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="from">
<h3>from<a class="headerlink" href="#from" title="Permalink to this headline">¶</a></h3>
<div class="section" id="miss-from-opts-read">
<h4><code class="docutils literal notranslate"><span class="pre">miss.from([opts],</span> <span class="pre">read)</span></code><a class="headerlink" href="#miss-from-opts-read" title="Permalink to this headline">¶</a></h4>
<p>Make a custom <a class="reference external" href="https://nodejs.org/docs/latest/api/stream.html#stream_class_stream_readable">readable stream</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">opts</span></code> contains the options to pass on to the ReadableStream constructor e.g. for creating a readable object stream (or use the shortcut <code class="docutils literal notranslate"><span class="pre">miss.from.obj([...])</span></code>).</p>
<p>Returns a readable stream that calls <code class="docutils literal notranslate"><span class="pre">read(size,</span> <span class="pre">next)</span></code> when data is requested from the stream.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">size</span></code> is the recommended amount of data (in bytes) to retrieve.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">next(err,</span> <span class="pre">chunk)</span></code> should be called when you’re ready to emit more data.</p></li>
</ul>
</div>
<div class="section" id="id9">
<h4>original module<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">miss.from</span></code> is provided by <a class="reference external" href="https://www.npmjs.com/package/from2"><code class="docutils literal notranslate"><span class="pre">require('from2')</span></code></a></p>
</div>
<div class="section" id="id10">
<h4>example<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">fromString</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">miss</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">size</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// if there&#39;s no more content</span>
    <span class="c1">// left in the string, close the stream.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mf">0</span><span class="p">)</span> <span class="k">return</span> <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">)</span>

    <span class="c1">// Pull in a new chunk of text,</span>
    <span class="c1">// removing it from the string.</span>
    <span class="kd">var</span> <span class="nx">chunk</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="nx">size</span><span class="p">)</span>
    <span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span>

    <span class="c1">// Emit &quot;chunk&quot; from the stream.</span>
    <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">chunk</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">}</span>

<span class="c1">// pipe &quot;hello world&quot; out</span>
<span class="c1">// to stdout.</span>
<span class="nx">fromString</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="to">
<h3>to<a class="headerlink" href="#to" title="Permalink to this headline">¶</a></h3>
<div class="section" id="miss-to-options-write-flush">
<h4><code class="docutils literal notranslate"><span class="pre">miss.to([options],</span> <span class="pre">write,</span> <span class="pre">[flush])</span></code><a class="headerlink" href="#miss-to-options-write-flush" title="Permalink to this headline">¶</a></h4>
<p>Make a custom <a class="reference external" href="https://nodejs.org/docs/latest/api/stream.html#stream_class_stream_writable">writable stream</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">opts</span></code> contains the options to pass on to the WritableStream constructor e.g. for creating a writable object stream (or use the shortcut <code class="docutils literal notranslate"><span class="pre">miss.to.obj([...])</span></code>).</p>
<p>Returns a writable stream that calls <code class="docutils literal notranslate"><span class="pre">write(data,</span> <span class="pre">enc,</span> <span class="pre">cb)</span></code> when data is written to the stream.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code> is the received data to write the destination.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enc</span></code> encoding of the piece of data received.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cb(err,</span> <span class="pre">data)</span></code> should be called when you’re ready to write more data, or encountered an error.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">flush(cb)</span></code> is called before <code class="docutils literal notranslate"><span class="pre">finish</span></code> is emitted and allows for cleanup steps to occur.</p>
</div>
<div class="section" id="id11">
<h4>original module<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">miss.to</span></code> is provided by <a class="reference external" href="https://www.npmjs.com/package/flush-write-stream"><code class="docutils literal notranslate"><span class="pre">require('flush-write-stream')</span></code></a></p>
</div>
<div class="section" id="id12">
<h4>example<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="nx">miss</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">write</span><span class="p">,</span> <span class="nx">flush</span><span class="p">)</span>

<span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;finish&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;finished&#39;</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">ws</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">end</span><span class="p">()</span>

<span class="kd">function</span> <span class="nx">write</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">enc</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// i am your normal ._write method</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;writing&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
  <span class="nx">cb</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">flush</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// i am called before finish is emitted</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">cb</span><span class="p">,</span> <span class="mf">1000</span><span class="p">)</span> <span class="c1">// wait 1 sec</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you run the above it will produce the following output</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">writing</span> <span class="n">hello</span>
<span class="n">writing</span> <span class="n">world</span>
<span class="p">(</span><span class="n">nothing</span> <span class="n">happens</span> <span class="k">for</span> <span class="mi">1</span> <span class="n">sec</span><span class="p">)</span>
<span class="n">finished</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="concat">
<h3>concat<a class="headerlink" href="#concat" title="Permalink to this headline">¶</a></h3>
<div class="section" id="var-concat-miss-concat-cb">
<h4><code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">concat</span> <span class="pre">=</span> <span class="pre">miss.concat(cb)</span></code><a class="headerlink" href="#var-concat-miss-concat-cb" title="Permalink to this headline">¶</a></h4>
<p>Returns a writable stream that concatenates all data written to the stream and calls a callback with the single result.</p>
<p>Calling <code class="docutils literal notranslate"><span class="pre">miss.concat(cb)</span></code> returns a writable stream. <code class="docutils literal notranslate"><span class="pre">cb</span></code> is called when the writable stream is finished, e.g. when all data is done being written to it. <code class="docutils literal notranslate"><span class="pre">cb</span></code> is called with a single argument, <code class="docutils literal notranslate"><span class="pre">(data)</span></code>, which will contain the result of concatenating all the data written to the stream.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">miss.concat</span></code> will not handle stream errors for you. To handle errors, use <code class="docutils literal notranslate"><span class="pre">miss.pipe</span></code> or handle the <code class="docutils literal notranslate"><span class="pre">error</span></code> event manually.</p>
</div>
<div class="section" id="id13">
<h4>original module<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">miss.concat</span></code> is provided by <a class="reference external" href="https://www.npmjs.com/package/concat-stream"><code class="docutils literal notranslate"><span class="pre">require('concat-stream')</span></code></a></p>
</div>
<div class="section" id="id14">
<h4>example<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">readStream</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;cat.png&#39;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">concatStream</span> <span class="o">=</span> <span class="nx">miss</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">gotPicture</span><span class="p">)</span>

<span class="kd">function</span> <span class="nx">callback</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">miss</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">readStream</span><span class="p">,</span> <span class="nx">concatStream</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>

<span class="kd">function</span> <span class="nx">gotPicture</span><span class="p">(</span><span class="nx">imageBuffer</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// imageBuffer is all of `cat.png` as a node.js Buffer</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">handleError</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// handle your error appropriately here, e.g.:</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="c1">// print the error to STDERR</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span> <span class="c1">// exit program with non-zero exit code</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="finished">
<h3>finished<a class="headerlink" href="#finished" title="Permalink to this headline">¶</a></h3>
<div class="section" id="miss-finished-stream-cb">
<h4><code class="docutils literal notranslate"><span class="pre">miss.finished(stream,</span> <span class="pre">cb)</span></code><a class="headerlink" href="#miss-finished-stream-cb" title="Permalink to this headline">¶</a></h4>
<p>Waits for <code class="docutils literal notranslate"><span class="pre">stream</span></code> to finish or error and then calls <code class="docutils literal notranslate"><span class="pre">cb</span></code> with <code class="docutils literal notranslate"><span class="pre">(err)</span></code>. <code class="docutils literal notranslate"><span class="pre">cb</span></code> will only be called once. <code class="docutils literal notranslate"><span class="pre">err</span></code> will be null if the stream finished without error, or else it will be populated with the error from the streams <code class="docutils literal notranslate"><span class="pre">error</span></code> event.</p>
<p>This function is useful for simplifying stream handling code as it lets you handle success or error conditions in a single code path. It’s used internally <code class="docutils literal notranslate"><span class="pre">miss.pipe</span></code>.</p>
</div>
<div class="section" id="id15">
<h4>original module<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">miss.finished</span></code> is provided by <a class="reference external" href="https://www.npmjs.com/package/end-of-stream"><code class="docutils literal notranslate"><span class="pre">require('end-of-stream')</span></code></a></p>
</div>
<div class="section" id="id16">
<h4>example<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">copySource</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;./movie.mp4&#39;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">copyDest</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="s1">&#39;./movie-copy.mp4&#39;</span><span class="p">)</span>

<span class="nx">copySource</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">copyDest</span><span class="p">)</span>

<span class="nx">miss</span><span class="p">.</span><span class="nx">finished</span><span class="p">(</span><span class="nx">copyDest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;write failed&#39;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;write success&#39;</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parallel">
<h3>parallel<a class="headerlink" href="#parallel" title="Permalink to this headline">¶</a></h3>
<div class="section" id="miss-parallel-concurrency-each">
<h4><code class="docutils literal notranslate"><span class="pre">miss.parallel(concurrency,</span> <span class="pre">each)</span></code><a class="headerlink" href="#miss-parallel-concurrency-each" title="Permalink to this headline">¶</a></h4>
<p>This works like <code class="docutils literal notranslate"><span class="pre">through</span></code> except you can process items in parallel, while still preserving the original input order.</p>
<p>This is handy if you wanna take advantage of node’s async I/O and process streams of items in batches. With this module you can build your very own streaming parallel job queue.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">miss.parallel</span></code> preserves input ordering, if you don’t need that then you can use <a class="reference external" href="https://github.com/almost/through2-concurrent">through2-concurrent</a> instead, which is very similar to this otherwise.</p>
</div>
<div class="section" id="id17">
<h4>original module<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">miss.parallel</span></code> is provided by <a class="reference external" href="https://npmjs.org/parallel-transform"><code class="docutils literal notranslate"><span class="pre">require('parallel-transform')</span></code></a></p>
</div>
<div class="section" id="id18">
<h4>example<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<p>This example fetches the GET HTTP headers for a stream of input URLs 5 at a time in parallel.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">getResponse</span> <span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">request</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span>
  <span class="nx">r</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">cb</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
  <span class="p">})</span>
  <span class="nx">r</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">re</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">cb</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nx">url</span><span class="o">:</span> <span class="nx">item</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">date</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="nx">status</span><span class="o">:</span> <span class="nx">re</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">,</span> <span class="nx">headers</span><span class="o">:</span> <span class="nx">re</span><span class="p">.</span><span class="nx">headers</span><span class="p">})</span>
    <span class="nx">r</span><span class="p">.</span><span class="nx">abort</span><span class="p">()</span>
  <span class="p">})</span>
<span class="p">}</span>

<span class="nx">miss</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;./urls.txt&#39;</span><span class="p">),</span> <span class="c1">// one url per line</span>
  <span class="nx">split</span><span class="p">(),</span>
  <span class="nx">miss</span><span class="p">.</span><span class="nx">parallel</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span> <span class="nx">getResponse</span><span class="p">),</span>
  <span class="nx">miss</span><span class="p">.</span><span class="nx">through</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">enc</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">row</span><span class="p">))</span>
    <span class="nx">next</span><span class="p">()</span>
  <span class="p">})</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="see-also">
<h2>see also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/substack/stream-handbook">substack/stream-handbook</a></p></li>
<li><p><a class="reference external" href="https://nodejs.org/api/stream.html">nodejs.org/api/stream.html</a></p></li>
<li><p><a class="reference external" href="https://github.com/thejmazz/awesome-nodejs-streams">awesome-nodejs-streams</a></p></li>
</ul>
</div>
<div class="section" id="license">
<h2>license<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>Licensed under the BSD 2-clause license.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AyrtonB/ESDA-Spatial",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-mississippi-3.0.0-ea0a3291f97e0b5e8776b363d5f0a12d94c67022-integrity/node_modules/mississippi"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ayrton Bourn, Santiago De La Fuente, Clem Attwood, Joanna Kuleszo, Camilo Perico<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../../../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>