
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>window.fetch polyfill &#8212; Spatial Analysis for Energy</title>
    
  <link rel="stylesheet" href="../../../../../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  <img src="../../../../../../_static/logo.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Spatial Analysis for Energy</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Intro.html">
   UCL Energy Systems &amp; Data Analytics - Spatial Module
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/03-Working-with-Vector-Data.html">
   Working with Vector Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/04-Working-with-Raster-Data.html">
   Working with Raster Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Extensions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../extensions/01-Mapping-with-ggplot.html">
   Mapping with ggplot
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Setup.html">
   Set-Up Instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Jupyter-Anaconda.html">
   What is Jupyter/Anaconda?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/ESDA%20Course.html">
   ESDA Course
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-whatwg-fetch-3.2.0-8e134f701f0a4ab5fda82626f113e2b647fd16dc-integrity/node_modules/whatwg-fetch/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#table-of-contents">
   Table of Contents
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#read-this-first">
   Read this first
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#importing">
     Importing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#html">
     HTML
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#json">
     JSON
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#response-metadata">
     Response metadata
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-form">
     Post form
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-json">
     Post JSON
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#file-upload">
     File upload
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#caveats">
     Caveats
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#handling-http-error-statuses">
       Handling HTTP error statuses
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sending-cookies">
       Sending cookies
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#receiving-cookies">
       Receiving cookies
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#redirect-modes">
       Redirect modes
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#obtaining-the-response-url">
       Obtaining the Response URL
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#aborting-requests">
       Aborting requests
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#browser-support">
   Browser Support
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="window-fetch-polyfill">
<h1>window.fetch polyfill<a class="headerlink" href="#window-fetch-polyfill" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">fetch()</span></code> function is a Promise-based mechanism for programmatically making
web requests in the browser. This project is a polyfill that implements a subset
of the standard <a class="reference external" href="https://fetch.spec.whatwg.org">Fetch specification</a>, enough to make <code class="docutils literal notranslate"><span class="pre">fetch</span></code> a viable
replacement for most uses of XMLHttpRequest in traditional web applications.</p>
<div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#read-this-first">Read this first</a></p></li>
<li><p><a class="reference external" href="#installation">Installation</a></p></li>
<li><p><a class="reference external" href="#usage">Usage</a></p>
<ul>
<li><p><a class="reference external" href="#importing">Importing</a></p></li>
<li><p><a class="reference external" href="#html">HTML</a></p></li>
<li><p><a class="reference external" href="#json">JSON</a></p></li>
<li><p><a class="reference external" href="#response-metadata">Response metadata</a></p></li>
<li><p><a class="reference external" href="#post-form">Post form</a></p></li>
<li><p><a class="reference external" href="#post-json">Post JSON</a></p></li>
<li><p><a class="reference external" href="#file-upload">File upload</a></p></li>
<li><p><a class="reference external" href="#caveats">Caveats</a></p>
<ul>
<li><p><a class="reference external" href="#handling-http-error-statuses">Handling HTTP error statuses</a></p></li>
<li><p><a class="reference external" href="#sending-cookies">Sending cookies</a></p></li>
<li><p><a class="reference external" href="#receiving-cookies">Receiving cookies</a></p></li>
<li><p><a class="reference external" href="#redirect-modes">Redirect modes</a></p></li>
<li><p><a class="reference external" href="#obtaining-the-response-url">Obtaining the Response URL</a></p></li>
<li><p><a class="reference external" href="#aborting-requests">Aborting requests</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference external" href="#browser-support">Browser Support</a></p></li>
</ul>
</div>
<div class="section" id="read-this-first">
<h2>Read this first<a class="headerlink" href="#read-this-first" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>If you believe you found a bug with how <code class="docutils literal notranslate"><span class="pre">fetch</span></code> behaves in your browser,
please <strong>don’t open an issue in this repository</strong> unless you are testing in
an old version of a browser that doesn’t support <code class="docutils literal notranslate"><span class="pre">window.fetch</span></code> natively.
This project is a <em>polyfill</em>, and since all modern browsers now implement the
<code class="docutils literal notranslate"><span class="pre">fetch</span></code> function natively, <strong>no code from this project</strong> actually takes any
effect there. See <a class="reference external" href="#browser-support">Browser support</a> for detailed
information.</p></li>
<li><p>If you have trouble <strong>making a request to another domain</strong> (a different
subdomain or port number also constitutes another domain), please familiarize
yourself with all the intricacies and limitations of <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">CORS</a> requests.
Because CORS requires participation of the server by implementing specific
HTTP response headers, it is often nontrivial to set up or debug. CORS is
exclusively handled by the browser’s internal mechanisms which this polyfill
cannot influence.</p></li>
<li><p>This project <strong>doesn’t work under Node.js environments</strong>. It’s meant for web
browsers only. You should ensure that your application doesn’t try to package
and run this on the server.</p></li>
<li><p>If you have an idea for a new feature of <code class="docutils literal notranslate"><span class="pre">fetch</span></code>, <strong>submit your feature
requests</strong> to the <a class="reference external" href="https://github.com/whatwg/fetch/issues">specification’s repository</a>.
We only add features and APIs that are part of the <a class="reference external" href="https://fetch.spec.whatwg.org">Fetch specification</a>.</p></li>
</ul>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">whatwg</span><span class="o">-</span><span class="n">fetch</span> <span class="o">--</span><span class="n">save</span>
</pre></div>
</div>
<p>As an alternative to using npm, you can obtain <code class="docutils literal notranslate"><span class="pre">fetch.umd.js</span></code> from the
<a class="reference external" href="https://github.com/github/fetch/releases">Releases</a> section. The UMD distribution is compatible with AMD and CommonJS
module loaders, as well as loading directly into a page via <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> tag.</p>
<p>You will also need a Promise polyfill for <a class="reference external" href="http://caniuse.com/#feat=promises">older browsers</a>.
We recommend <a class="reference external" href="https://github.com/taylorhakes/promise-polyfill">taylorhakes/promise-polyfill</a>
for its small size and Promises/A+ compatibility.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>For a more comprehensive API reference that this polyfill supports, refer to
https://github.github.io/fetch/.</p>
<div class="section" id="importing">
<h3>Importing<a class="headerlink" href="#importing" title="Permalink to this headline">¶</a></h3>
<p>Importing will automatically polyfill <code class="docutils literal notranslate"><span class="pre">window.fetch</span></code> and related APIs:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="s1">&#39;whatwg-fetch&#39;</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(...)</span>
</pre></div>
</div>
<p>If for some reason you need to access the polyfill implementation, it is
available via exports:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="p">{</span><span class="nx">fetch</span> <span class="nx">as</span> <span class="nx">fetchPolyfill</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;whatwg-fetch&#39;</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(...)</span>   <span class="c1">// use native browser version</span>
<span class="nx">fetchPolyfill</span><span class="p">(...)</span>  <span class="c1">// use polyfill implementation</span>
</pre></div>
</div>
<p>This approach can be used to, for example, use <a class="reference external" href="#aborting-requests">abort
functionality</a> in browsers that implement a native but
outdated version of fetch that doesn’t support aborting.</p>
<p>For use with webpack, add this package in the <code class="docutils literal notranslate"><span class="pre">entry</span></code> configuration option
before your application entry point:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">entry</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;whatwg-fetch&#39;</span><span class="p">,</span> <span class="p">...]</span>
</pre></div>
</div>
</div>
<div class="section" id="html">
<h3>HTML<a class="headerlink" href="#html" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/users.html&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span>
  <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">body</span>
  <span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="json">
<h3>JSON<a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/users.json&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">()</span>
  <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;parsed json&#39;</span><span class="p">,</span> <span class="nx">json</span><span class="p">)</span>
  <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ex</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;parsing failed&#39;</span><span class="p">,</span> <span class="nx">ex</span><span class="p">)</span>
  <span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="response-metadata">
<h3>Response metadata<a class="headerlink" href="#response-metadata" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/users.json&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">))</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">))</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="post-form">
<h3>Post form<a class="headerlink" href="#post-form" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">)</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
  <span class="nx">body</span><span class="o">:</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">(</span><span class="nx">form</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="post-json">
<h3>Post JSON<a class="headerlink" href="#post-json" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span>
  <span class="p">},</span>
  <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Hubot&#39;</span><span class="p">,</span>
    <span class="nx">login</span><span class="o">:</span> <span class="s1">&#39;hubot&#39;</span><span class="p">,</span>
  <span class="p">})</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="file-upload">
<h3>File upload<a class="headerlink" href="#file-upload" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;input[type=&quot;file&quot;]&#39;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">()</span>
<span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="nx">input</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span>
<span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;hubot&#39;</span><span class="p">)</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/avatars&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
  <span class="nx">body</span><span class="o">:</span> <span class="nx">data</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="caveats">
<h3>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The Promise returned from <code class="docutils literal notranslate"><span class="pre">fetch()</span></code> <strong>won’t reject on HTTP error status</strong>
even if the response is an HTTP 404 or 500. Instead, it will resolve normally,
and it will only reject on network failure or if anything prevented the
request from completing.</p></li>
<li><p>For maximum browser compatibility when it comes to sending &amp; receiving
cookies, always supply the <code class="docutils literal notranslate"><span class="pre">credentials:</span> <span class="pre">'same-origin'</span></code> option instead of
relying on the default. See <a class="reference external" href="#sending-cookies">Sending cookies</a>.</p></li>
<li><p>Not all Fetch standard options are supported in this polyfill. For instance,
<a class="reference external" href="#redirect-modes"><code class="docutils literal notranslate"><span class="pre">redirect</span></code></a> and
<a class="reference external" href="https://github.github.io/fetch/#caveats"><code class="docutils literal notranslate"><span class="pre">cache</span></code></a> directives are ignored.</p></li>
</ul>
<div class="section" id="handling-http-error-statuses">
<h4>Handling HTTP error statuses<a class="headerlink" href="#handling-http-error-statuses" title="Permalink to this headline">¶</a></h4>
<p>To have <code class="docutils literal notranslate"><span class="pre">fetch</span></code> Promise reject on HTTP error statuses, i.e. on any non-2xx
status, define a custom response handler:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">checkStatus</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">&gt;=</span> <span class="mf">200</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">&lt;</span> <span class="mf">300</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">response</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="p">)</span>
    <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="o">=</span> <span class="nx">response</span>
    <span class="k">throw</span> <span class="nx">error</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">parseJSON</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">()</span>
<span class="p">}</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">checkStatus</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">parseJSON</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;request succeeded with JSON response&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
  <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;request failed&#39;</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span>
  <span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="sending-cookies">
<h4>Sending cookies<a class="headerlink" href="#sending-cookies" title="Permalink to this headline">¶</a></h4>
<p>For <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">CORS</a> requests, use <code class="docutils literal notranslate"><span class="pre">credentials:</span> <span class="pre">'include'</span></code> to allow sending credentials
to other domains:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://example.com:1234/users&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">credentials</span><span class="o">:</span> <span class="s1">&#39;include&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<p>The default value for <code class="docutils literal notranslate"><span class="pre">credentials</span></code> is “same-origin”.</p>
<p>The default for <code class="docutils literal notranslate"><span class="pre">credentials</span></code> wasn’t always the same, though. The following
versions of browsers implemented an older version of the fetch specification
where the default was “omit”:</p>
<ul class="simple">
<li><p>Firefox 39-60</p></li>
<li><p>Chrome 42-67</p></li>
<li><p>Safari 10.1-11.1.2</p></li>
</ul>
<p>If you target these browsers, it’s advisable to always specify <code class="docutils literal notranslate"><span class="pre">credentials:</span> <span class="pre">'same-origin'</span></code> explicitly with all fetch requests instead of relying on the
default:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">credentials</span><span class="o">:</span> <span class="s1">&#39;same-origin&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Note: due to <a class="reference external" href="https://github.com/github/fetch/pull/56#issuecomment-68835992">limitations of
XMLHttpRequest</a>,
using <code class="docutils literal notranslate"><span class="pre">credentials:</span> <span class="pre">'omit'</span></code> is not respected for same domains in browsers where
this polyfill is active. Cookies will always be sent to same domains in older
browsers.</p>
</div>
<div class="section" id="receiving-cookies">
<h4>Receiving cookies<a class="headerlink" href="#receiving-cookies" title="Permalink to this headline">¶</a></h4>
<p>As with XMLHttpRequest, the <code class="docutils literal notranslate"><span class="pre">Set-Cookie</span></code> response header returned from the
server is a <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name">forbidden header name</a> and therefore can’t be programmatically
read with <code class="docutils literal notranslate"><span class="pre">response.headers.get()</span></code>. Instead, it’s the browser’s responsibility
to handle new cookies being set (if applicable to the current URL). Unless they
are HTTP-only, new cookies will be available through <code class="docutils literal notranslate"><span class="pre">document.cookie</span></code>.</p>
</div>
<div class="section" id="redirect-modes">
<h4>Redirect modes<a class="headerlink" href="#redirect-modes" title="Permalink to this headline">¶</a></h4>
<p>The Fetch specification defines these values for <a class="reference external" href="https://fetch.spec.whatwg.org/#concept-request-redirect-mode">the <code class="docutils literal notranslate"><span class="pre">redirect</span></code>
option</a>: “follow”
(the default), “error”, and “manual”.</p>
<p>Due to limitations of XMLHttpRequest, only the “follow” mode is available in
browsers where this polyfill is active.</p>
</div>
<div class="section" id="obtaining-the-response-url">
<h4>Obtaining the Response URL<a class="headerlink" href="#obtaining-the-response-url" title="Permalink to this headline">¶</a></h4>
<p>Due to limitations of XMLHttpRequest, the <code class="docutils literal notranslate"><span class="pre">response.url</span></code> value might not be
reliable after HTTP redirects on older browsers.</p>
<p>The solution is to configure the server to set the response HTTP header
<code class="docutils literal notranslate"><span class="pre">X-Request-URL</span></code> to the current URL after any redirect that might have happened.
It should be safe to set it unconditionally.</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ruby on Rails controller example</span>
<span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">[</span><span class="s1">&#39;X-Request-URL&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span>
</pre></div>
</div>
<p>This server workaround is necessary if you need reliable <code class="docutils literal notranslate"><span class="pre">response.url</span></code> in
Firefox &lt; 32, Chrome &lt; 37, Safari, or IE.</p>
</div>
<div class="section" id="aborting-requests">
<h4>Aborting requests<a class="headerlink" href="#aborting-requests" title="Permalink to this headline">¶</a></h4>
<p>This polyfill supports
<a class="reference external" href="https://developers.google.com/web/updates/2017/09/abortable-fetch">the abortable fetch API</a>.
However, aborting a fetch requires use of two additional DOM APIs:
<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController">AbortController</a> and
<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal">AbortSignal</a>.
Typically, browsers that do not support fetch will also not support
AbortController or AbortSignal. Consequently, you will need to include
<a class="reference external" href="https://github.com/mo/abortcontroller-polyfill#readme">an additional polyfill</a>
for these APIs to abort fetches:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="s1">&#39;abortcontroller-polyfill/dist/abortcontroller-polyfill-only&#39;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">fetch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;whatwg-fetch&#39;</span>

<span class="c1">// use native browser implementation if it supports aborting</span>
<span class="kr">const</span> <span class="nx">abortableFetch</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;signal&#39;</span> <span class="k">in</span> <span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">))</span> <span class="o">?</span> <span class="nb">window</span><span class="p">.</span><span class="nx">fetch</span> <span class="o">:</span> <span class="nx">fetch</span>

<span class="kr">const</span> <span class="nx">controller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AbortController</span><span class="p">()</span>

<span class="nx">abortableFetch</span><span class="p">(</span><span class="s1">&#39;/avatars&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">signal</span><span class="o">:</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">signal</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ex</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">ex</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;AbortError&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;request aborted&#39;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="c1">// some time later...</span>
<span class="nx">controller</span><span class="p">.</span><span class="nx">abort</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="browser-support">
<h2>Browser Support<a class="headerlink" href="#browser-support" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Chrome</p></li>
<li><p>Firefox</p></li>
<li><p>Safari 6.1+</p></li>
<li><p>Internet Explorer 10+</p></li>
</ul>
<p>Note: modern browsers such as Chrome, Firefox, Microsoft Edge, and Safari contain native
implementations of <code class="docutils literal notranslate"><span class="pre">window.fetch</span></code>, therefore the code from this polyfill doesn’t
have any effect on those browsers. If you believe you’ve encountered an error
with how <code class="docutils literal notranslate"><span class="pre">window.fetch</span></code> is implemented in any of these browsers, you should file
an issue with that browser vendor instead of this project.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AyrtonB/ESDA-Spatial",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-whatwg-fetch-3.2.0-8e134f701f0a4ab5fda82626f113e2b647fd16dc-integrity/node_modules/whatwg-fetch"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ayrton Bourn, Santiago De La Fuente, Clem Attwood, Joanna Kuleszo, Camilo Perico<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../../../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>