
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>d3-shape &#8212; Spatial Analysis for Energy</title>
    
  <link rel="stylesheet" href="../../../../../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  <img src="../../../../../../_static/logo.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Spatial Analysis for Energy</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Intro.html">
   UCL Energy Systems &amp; Data Analytics - Spatial Module
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/03-Working-with-Vector-Data.html">
   Working with Vector Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/04-Working-with-Raster-Data.html">
   Working with Raster Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Extensions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../extensions/01-Mapping-with-ggplot.html">
   Mapping with ggplot
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Setup.html">
   Set-Up Instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Jupyter-Anaconda.html">
   What is Jupyter/Anaconda?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/ESDA%20Course.html">
   ESDA Course
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-d3-shape-1.3.7-df63801be07bc986bc54f63789b4fe502992b5d7-integrity/node_modules/d3-shape/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing">
   Installing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api-reference">
   API Reference
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#arcs">
     Arcs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pies">
     Pies
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lines">
     Lines
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#areas">
     Areas
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#curves">
     Curves
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#custom-curves">
     Custom Curves
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#links">
     Links
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#symbols">
     Symbols
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#custom-symbol-types">
     Custom Symbol Types
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#stacks">
     Stacks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#stack-orders">
     Stack Orders
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#stack-offsets">
     Stack Offsets
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="d3-shape">
<h1>d3-shape<a class="headerlink" href="#d3-shape" title="Permalink to this headline">¶</a></h1>
<p>Visualizations typically consist of discrete graphical marks, such as <a class="reference external" href="#symbols">symbols</a>, <a class="reference external" href="#arcs">arcs</a>, <a class="reference external" href="#lines">lines</a> and <a class="reference external" href="#areas">areas</a>. While the rectangles of a bar chart may be easy enough to generate directly using <a class="reference external" href="http://www.w3.org/TR/SVG/paths.html#PathData">SVG</a> or <a class="reference external" href="http://www.w3.org/TR/2dcontext/#canvaspathmethods">Canvas</a>, other shapes are complex, such as rounded annular sectors and centripetal Catmull–Rom splines. This module provides a variety of shape generators for your convenience.</p>
<p>As with other aspects of D3, these shapes are driven by data: each shape generator exposes accessors that control how the input data are mapped to a visual representation. For example, you might define a line generator for a time series by <a class="reference external" href="https://github.com/d3/d3-scale">scaling</a> fields of your data to fit the chart:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">line</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">date</span><span class="p">);</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">y</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">y</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span> <span class="p">});</span>
</pre></div>
</div>
<p>This line generator can then be used to compute the <code class="docutils literal notranslate"><span class="pre">d</span></code> attribute of an SVG path element:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">path</span><span class="p">.</span><span class="nx">datum</span><span class="p">(</span><span class="nx">data</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="nx">line</span><span class="p">);</span>
</pre></div>
</div>
<p>Or you can use it to render to a Canvas 2D context:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">line</span><span class="p">.</span><span class="nx">context</span><span class="p">(</span><span class="nx">context</span><span class="p">)(</span><span class="nx">data</span><span class="p">);</span>
</pre></div>
</div>
<p>For more, read <a class="reference external" href="https://medium.com/&#64;mbostock/introducing-d3-shape-73f8367e6d12">Introducing d3-shape</a>.</p>
<div class="section" id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<p>If you use NPM, <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">d3-shape</span></code>. Otherwise, download the <a class="reference external" href="https://github.com/d3/d3-shape/releases/latest">latest release</a>. You can also load directly from <a class="reference external" href="https://d3js.org">d3js.org</a>, either as a <a class="reference external" href="https://d3js.org/d3-shape.v1.min.js">standalone library</a> or as part of <a class="reference external" href="https://github.com/d3/d3">D3</a>. AMD, CommonJS, and vanilla environments are supported. In vanilla, a <code class="docutils literal notranslate"><span class="pre">d3</span></code> global is exported:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://d3js.org/d3-path.v1.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://d3js.org/d3-shape.v1.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">line</span><span class="p">();</span>

<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#arcs">Arcs</a></p></li>
<li><p><a class="reference external" href="#pies">Pies</a></p></li>
<li><p><a class="reference external" href="#lines">Lines</a></p></li>
<li><p><a class="reference external" href="#areas">Areas</a></p></li>
<li><p><a class="reference external" href="#curves">Curves</a></p></li>
<li><p><a class="reference external" href="#custom-curves">Custom Curves</a></p></li>
<li><p><a class="reference external" href="#links">Links</a></p></li>
<li><p><a class="reference external" href="#symbols">Symbols</a></p></li>
<li><p><a class="reference external" href="#custom-symbol-types">Custom Symbol Types</a></p></li>
<li><p><a class="reference external" href="#stacks">Stacks</a></p></li>
</ul>
<div class="section" id="arcs">
<h3>Arcs<a class="headerlink" href="#arcs" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://bl.ocks.org/mbostock/8878e7fd82034f1d63cf"><img alt="Pie Chart" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/pie.png" width="295" height="295"></a><a class="reference external" href="http://bl.ocks.org/mbostock/2394b23da1994fc202e1"><img alt="Donut Chart" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/donut.png" width="295" height="295"></a></p>
<p>The arc generator produces a <a class="reference external" href="https://en.wikipedia.org/wiki/Circular_sector">circular</a> or <a class="reference external" href="https://en.wikipedia.org/wiki/Annulus_(mathematics)">annular</a> sector, as in a pie or donut chart. If the difference between the <a class="reference external" href="#arc_startAngle">start</a> and <a class="reference external" href="#arc_endAngle">end</a> angles (the <em>angular span</em>) is greater than <a class="reference external" href="https://en.wikipedia.org/wiki/Turn_(geometry)#Tau_proposal">τ</a>, the arc generator will produce a complete circle or annulus. If it is less than τ, arcs may have <a class="reference external" href="#arc_cornerRadius">rounded corners</a> and <a class="reference external" href="#arc_padAngle">angular padding</a>. Arcs are always centered at ⟨0,0⟩; use a transform (see: <a class="reference external" href="http://www.w3.org/TR/SVG/coords.html#TransformAttribute">SVG</a>, <a class="reference external" href="http://www.w3.org/TR/2dcontext/#transformations">Canvas</a>) to move the arc to a different position.</p>
<p>See also the <a class="reference external" href="#pies">pie generator</a>, which computes the necessary angles to represent an array of data as a pie or donut chart; these angles can then be passed to an arc generator.</p>
<p><a name="arc" href="#arc">#</a> d3.<b>arc</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/arc.js">Source</a></p>
<p>Constructs a new arc generator with the default settings.</p>
<p><a name="_arc" href="#_arc">#</a> <i>arc</i>(<i>arguments…</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/arc.js">Source</a></p>
<p>Generates an arc for the given <em>arguments</em>. The <em>arguments</em> are arbitrary; they are simply propagated to the arc generator’s accessor functions along with the <code class="docutils literal notranslate"><span class="pre">this</span></code> object. For example, with the default settings, an object with radii and angles is expected:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">arc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">arc</span><span class="p">();</span>

<span class="nx">arc</span><span class="p">({</span>
  <span class="nx">innerRadius</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
  <span class="nx">outerRadius</span><span class="o">:</span> <span class="mf">100</span><span class="p">,</span>
  <span class="nx">startAngle</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
  <span class="nx">endAngle</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mf">2</span>
<span class="p">});</span> <span class="c1">// &quot;M0,-100A100,100,0,0,1,100,0L0,0Z&quot;</span>
</pre></div>
</div>
<p>If the radii and angles are instead defined as constants, you can generate an arc without any arguments:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">arc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">arc</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">innerRadius</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">outerRadius</span><span class="p">(</span><span class="mf">100</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">startAngle</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">endAngle</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mf">2</span><span class="p">);</span>

<span class="nx">arc</span><span class="p">();</span> <span class="c1">// &quot;M0,-100A100,100,0,0,1,100,0L0,0Z&quot;</span>
</pre></div>
</div>
<p>If the arc generator has a <a class="reference external" href="#arc_context">context</a>, then the arc is rendered to this context as a sequence of <a class="reference external" href="http://www.w3.org/TR/2dcontext/#canvaspathmethods">path method</a> calls and this function returns void. Otherwise, a <a class="reference external" href="http://www.w3.org/TR/SVG/paths.html#PathData">path data</a> string is returned.</p>
<p><a name="arc_centroid" href="#arc_centroid">#</a> <i>arc</i>.<b>centroid</b>(<i>arguments…</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/arc.js">Source</a></p>
<p>Computes the midpoint [<em>x</em>, <em>y</em>] of the center line of the arc that would be <a class="reference external" href="#_arc">generated</a> by the given <em>arguments</em>. The <em>arguments</em> are arbitrary; they are simply propagated to the arc generator’s accessor functions along with the <code class="docutils literal notranslate"><span class="pre">this</span></code> object. To be consistent with the generated arc, the accessors must be deterministic, <em>i.e.</em>, return the same value given the same arguments. The midpoint is defined as (<a class="reference external" href="#arc_startAngle">startAngle</a> + <a class="reference external" href="#arc_endAngle">endAngle</a>) / 2 and (<a class="reference external" href="#arc_innerRadius">innerRadius</a> + <a class="reference external" href="#arc_outerRadius">outerRadius</a>) / 2. For example:</p>
<p><a class="reference external" href="http://bl.ocks.org/mbostock/9b5a2fd1ce1a146f27e4"><img alt="Circular Sector Centroids" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/centroid-circular-sector.png" width="250" height="250"></a><a class="reference external" href="http://bl.ocks.org/mbostock/c274877f647361f3df7d"><img alt="Annular Sector Centroids" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/centroid-annular-sector.png" width="250" height="250"></a></p>
<p>Note that this is <strong>not the geometric center</strong> of the arc, which may be outside the arc; this method is merely a convenience for positioning labels.</p>
<p><a name="arc_innerRadius" href="#arc_innerRadius">#</a> <i>arc</i>.<b>innerRadius</b>([<i>radius</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/arc.js">Source</a></p>
<p>If <em>radius</em> is specified, sets the inner radius to the specified function or number and returns this arc generator. If <em>radius</em> is not specified, returns the current inner radius accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">innerRadius</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">innerRadius</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Specifying the inner radius as a function is useful for constructing a stacked polar bar chart, often in conjunction with a <a class="reference external" href="https://github.com/d3/d3-scale#sqrt">sqrt scale</a>. More commonly, a constant inner radius is used for a donut or pie chart. If the outer radius is smaller than the inner radius, the inner and outer radii are swapped. A negative value is treated as zero.</p>
<p><a name="arc_outerRadius" href="#arc_outerRadius">#</a> <i>arc</i>.<b>outerRadius</b>([<i>radius</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/arc.js">Source</a></p>
<p>If <em>radius</em> is specified, sets the outer radius to the specified function or number and returns this arc generator. If <em>radius</em> is not specified, returns the current outer radius accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">outerRadius</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">outerRadius</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Specifying the outer radius as a function is useful for constructing a coxcomb or polar bar chart, often in conjunction with a <a class="reference external" href="https://github.com/d3/d3-scale#sqrt">sqrt scale</a>. More commonly, a constant outer radius is used for a pie or donut chart. If the outer radius is smaller than the inner radius, the inner and outer radii are swapped. A negative value is treated as zero.</p>
<p><a name="arc_cornerRadius" href="#arc_cornerRadius">#</a> <i>arc</i>.<b>cornerRadius</b>([<i>radius</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/arc.js">Source</a></p>
<p>If <em>radius</em> is specified, sets the corner radius to the specified function or number and returns this arc generator. If <em>radius</em> is not specified, returns the current corner radius accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">cornerRadius</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the corner radius is greater than zero, the corners of the arc are rounded using circles of the given radius. For a circular sector, the two outer corners are rounded; for an annular sector, all four corners are rounded. The corner circles are shown in this diagram:</p>
<p><a class="reference external" href="http://bl.ocks.org/mbostock/e5e3680f3079cf5c3437"><img alt="Rounded Circular Sectors" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/rounded-circular-sector.png" width="250" height="250"></a><a class="reference external" href="http://bl.ocks.org/mbostock/f41f50e06a6c04828b6e"><img alt="Rounded Annular Sectors" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/rounded-annular-sector.png" width="250" height="250"></a></p>
<p>The corner radius may not be larger than (<a class="reference external" href="#arc_outerRadius">outerRadius</a> - <a class="reference external" href="#arc_innerRadius">innerRadius</a>) / 2. In addition, for arcs whose angular span is less than π, the corner radius may be reduced as two adjacent rounded corners intersect. This is occurs more often with the inner corners. See the <a class="reference external" href="http://bl.ocks.org/mbostock/b7671cb38efdfa5da3af">arc corners animation</a> for illustration.</p>
<p><a name="arc_startAngle" href="#arc_startAngle">#</a> <i>arc</i>.<b>startAngle</b>([<i>angle</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/arc.js">Source</a></p>
<p>If <em>angle</em> is specified, sets the start angle to the specified function or number and returns this arc generator. If <em>angle</em> is not specified, returns the current start angle accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">startAngle</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">startAngle</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <em>angle</em> is specified in radians, with 0 at -<em>y</em> (12 o’clock) and positive angles proceeding clockwise. If |endAngle - startAngle| ≥ τ, a complete circle or annulus is generated rather than a sector.</p>
<p><a name="arc_endAngle" href="#arc_endAngle">#</a> <i>arc</i>.<b>endAngle</b>([<i>angle</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/arc.js">Source</a></p>
<p>If <em>angle</em> is specified, sets the end angle to the specified function or number and returns this arc generator. If <em>angle</em> is not specified, returns the current end angle accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">endAngle</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">endAngle</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <em>angle</em> is specified in radians, with 0 at -<em>y</em> (12 o’clock) and positive angles proceeding clockwise. If |endAngle - startAngle| ≥ τ, a complete circle or annulus is generated rather than a sector.</p>
<p><a name="arc_padAngle" href="#arc_padAngle">#</a> <i>arc</i>.<b>padAngle</b>([<i>angle</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/arc.js">Source</a></p>
<p>If <em>angle</em> is specified, sets the pad angle to the specified function or number and returns this arc generator. If <em>angle</em> is not specified, returns the current pad angle accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">padAngle</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">padAngle</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The pad angle is converted to a fixed linear distance separating adjacent arcs, defined as <a class="reference external" href="#arc_padRadius">padRadius</a> * padAngle. This distance is subtracted equally from the <a class="reference external" href="#arc_startAngle">start</a> and <a class="reference external" href="#arc_endAngle">end</a> of the arc. If the arc forms a complete circle or annulus, as when |endAngle - startAngle| ≥ τ, the pad angle is ignored.</p>
<p>If the <a class="reference external" href="#arc_innerRadius">inner radius</a> or angular span is small relative to the pad angle, it may not be possible to maintain parallel edges between adjacent arcs. In this case, the inner edge of the arc may collapse to a point, similar to a circular sector. For this reason, padding is typically only applied to annular sectors (<em>i.e.</em>, when innerRadius is positive), as shown in this diagram:</p>
<p><a class="reference external" href="http://bl.ocks.org/mbostock/f37b07b92633781a46f7"><img alt="Padded Circular Sectors" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/padded-circular-sector.png" width="250" height="250"></a><a class="reference external" href="http://bl.ocks.org/mbostock/99f0a6533f7c949cf8b8"><img alt="Padded Annular Sectors" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/padded-annular-sector.png" width="250" height="250"></a></p>
<p>The recommended minimum inner radius when using padding is outerRadius * padAngle / sin(θ), where θ is the angular span of the smallest arc before padding. For example, if the outer radius is 200 pixels and the pad angle is 0.02 radians, a reasonable θ is 0.04 radians, and a reasonable inner radius is 100 pixels. See the <a class="reference external" href="http://bl.ocks.org/mbostock/053fcc2295a445afab07">arc padding animation</a> for illustration.</p>
<p>Often, the pad angle is not set directly on the arc generator, but is instead computed by the <a class="reference external" href="#pies">pie generator</a> so as to ensure that the area of padded arcs is proportional to their value; see <a class="reference external" href="#pie_padAngle"><em>pie</em>.padAngle</a>. See the <a class="reference external" href="http://bl.ocks.org/mbostock/3e961b4c97a1b543fff2">pie padding animation</a> for illustration. If you apply a constant pad angle to the arc generator directly, it tends to subtract disproportionately from smaller arcs, introducing distortion.</p>
<p><a name="arc_padRadius" href="#arc_padRadius">#</a> <i>arc</i>.<b>padRadius</b>([<i>radius</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/arc.js">Source</a></p>
<p>If <em>radius</em> is specified, sets the pad radius to the specified function or number and returns this arc generator. If <em>radius</em> is not specified, returns the current pad radius accessor, which defaults to null, indicating that the pad radius should be automatically computed as sqrt(<a class="reference external" href="#arc_innerRadius">innerRadius</a> * innerRadius + <a class="reference external" href="#arc_outerRadius">outerRadius</a> * outerRadius). The pad radius determines the fixed linear distance separating adjacent arcs, defined as padRadius * <a class="reference external" href="#arc_padAngle">padAngle</a>.</p>
<p><a name="arc_context" href="#arc_context">#</a> <i>arc</i>.<b>context</b>([<i>context</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/arc.js">Source</a></p>
<p>If <em>context</em> is specified, sets the context and returns this arc generator. If <em>context</em> is not specified, returns the current context, which defaults to null. If the context is not null, then the <a class="reference external" href="#_arc">generated arc</a> is rendered to this context as a sequence of <a class="reference external" href="http://www.w3.org/TR/2dcontext/#canvaspathmethods">path method</a> calls. Otherwise, a <a class="reference external" href="http://www.w3.org/TR/SVG/paths.html#PathData">path data</a> string representing the generated arc is returned.</p>
</div>
<div class="section" id="pies">
<h3>Pies<a class="headerlink" href="#pies" title="Permalink to this headline">¶</a></h3>
<p>The pie generator does not produce a shape directly, but instead computes the necessary angles to represent a tabular dataset as a pie or donut chart; these angles can then be passed to an <a class="reference external" href="#arcs">arc generator</a>.</p>
<p><a name="pie" href="#pie">#</a> d3.<b>pie</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/pie.js">Source</a></p>
<p>Constructs a new pie generator with the default settings.</p>
<p><a name="_pie" href="#_pie">#</a> <i>pie</i>(<i>data</i>[, <i>arguments…</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/pie.js">Source</a></p>
<p>Generates a pie for the given array of <em>data</em>, returning an array of objects representing each datum’s arc angles. Any additional <em>arguments</em> are arbitrary; they are simply propagated to the pie generator’s accessor functions along with the <code class="docutils literal notranslate"><span class="pre">this</span></code> object. The length of the returned array is the same as <em>data</em>, and each element <em>i</em> in the returned array corresponds to the element <em>i</em> in the input data. Each object in the returned array has the following properties:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code> - the input datum; the corresponding element in the input data array.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code> - the numeric <a class="reference external" href="#pie_value">value</a> of the arc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> - the zero-based <a class="reference external" href="#pie_sort">sorted index</a> of the arc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">startAngle</span></code> - the <a class="reference external" href="#pie_startAngle">start angle</a> of the arc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">endAngle</span></code> - the <a class="reference external" href="#pie_endAngle">end angle</a> of the arc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">padAngle</span></code> - the <a class="reference external" href="#pie_padAngle">pad angle</a> of the arc.</p></li>
</ul>
<p>This representation is designed to work with the arc generator’s default <a class="reference external" href="#arc_startAngle">startAngle</a>, <a class="reference external" href="#arc_endAngle">endAngle</a> and <a class="reference external" href="#arc_padAngle">padAngle</a> accessors. The angular units are arbitrary, but if you plan to use the pie generator in conjunction with an <a class="reference external" href="#arcs">arc generator</a>, you should specify angles in radians, with 0 at -<em>y</em> (12 o’clock) and positive angles proceeding clockwise.</p>
<p>Given a small dataset of numbers, here is how to compute the arc angles to render this data as a pie chart:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">13</span><span class="p">,</span> <span class="mf">21</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">arcs</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">pie</span><span class="p">()(</span><span class="nx">data</span><span class="p">);</span>
</pre></div>
</div>
<p>The first pair of parens, <code class="docutils literal notranslate"><span class="pre">pie()</span></code>, <a class="reference external" href="#pie">constructs</a> a default pie generator. The second, <code class="docutils literal notranslate"><span class="pre">pie()(data)</span></code>, <a class="reference external" href="#_pie">invokes</a> this generator on the dataset, returning an array of objects:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span><span class="nt">&quot;data&quot;</span><span class="p">:</span>  <span class="mi">1</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span>  <span class="mi">1</span><span class="p">,</span> <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="nt">&quot;startAngle&quot;</span><span class="p">:</span> <span class="mf">6.050474740247008</span><span class="p">,</span> <span class="nt">&quot;endAngle&quot;</span><span class="p">:</span> <span class="mf">6.166830023713296</span><span class="p">,</span> <span class="nt">&quot;padAngle&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;data&quot;</span><span class="p">:</span>  <span class="mi">1</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span>  <span class="mi">1</span><span class="p">,</span> <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="nt">&quot;startAngle&quot;</span><span class="p">:</span> <span class="mf">6.166830023713296</span><span class="p">,</span> <span class="nt">&quot;endAngle&quot;</span><span class="p">:</span> <span class="mf">6.283185307179584</span><span class="p">,</span> <span class="nt">&quot;padAngle&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;data&quot;</span><span class="p">:</span>  <span class="mi">2</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span>  <span class="mi">2</span><span class="p">,</span> <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="nt">&quot;startAngle&quot;</span><span class="p">:</span> <span class="mf">5.817764173314431</span><span class="p">,</span> <span class="nt">&quot;endAngle&quot;</span><span class="p">:</span> <span class="mf">6.050474740247008</span><span class="p">,</span> <span class="nt">&quot;padAngle&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;data&quot;</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span> <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nt">&quot;startAngle&quot;</span><span class="p">:</span> <span class="mf">5.468698322915565</span><span class="p">,</span> <span class="nt">&quot;endAngle&quot;</span><span class="p">:</span> <span class="mf">5.817764173314431</span><span class="p">,</span> <span class="nt">&quot;padAngle&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;data&quot;</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span>  <span class="mi">5</span><span class="p">,</span> <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nt">&quot;startAngle&quot;</span><span class="p">:</span> <span class="mf">4.886921905584122</span><span class="p">,</span> <span class="nt">&quot;endAngle&quot;</span><span class="p">:</span> <span class="mf">5.468698322915565</span><span class="p">,</span> <span class="nt">&quot;padAngle&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;data&quot;</span><span class="p">:</span>  <span class="mi">8</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span>  <span class="mi">8</span><span class="p">,</span> <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nt">&quot;startAngle&quot;</span><span class="p">:</span> <span class="mf">3.956079637853813</span><span class="p">,</span> <span class="nt">&quot;endAngle&quot;</span><span class="p">:</span> <span class="mf">4.886921905584122</span><span class="p">,</span> <span class="nt">&quot;padAngle&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nt">&quot;startAngle&quot;</span><span class="p">:</span> <span class="mf">2.443460952792061</span><span class="p">,</span> <span class="nt">&quot;endAngle&quot;</span><span class="p">:</span> <span class="mf">3.956079637853813</span><span class="p">,</span> <span class="nt">&quot;padAngle&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&quot;startAngle&quot;</span><span class="p">:</span> <span class="mf">0.000000000000000</span><span class="p">,</span> <span class="nt">&quot;endAngle&quot;</span><span class="p">:</span> <span class="mf">2.443460952792061</span><span class="p">,</span> <span class="nt">&quot;padAngle&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Note that the returned array is in the same order as the data, even though this pie chart is <a class="reference external" href="#pie_sortValues">sorted</a> by descending value, starting with the arc for the last datum (value 21) at 12 o’clock.</p>
<p><a name="pie_value" href="#pie_value">#</a> <i>pie</i>.<b>value</b>([<i>value</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/pie.js">Source</a></p>
<p>If <em>value</em> is specified, sets the value accessor to the specified function or number and returns this pie generator. If <em>value</em> is not specified, returns the current value accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">value</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When a pie is <a class="reference external" href="#_pie">generated</a>, the value accessor will be invoked for each element in the input data array, being passed the element <code class="docutils literal notranslate"><span class="pre">d</span></code>, the index <code class="docutils literal notranslate"><span class="pre">i</span></code>, and the array <code class="docutils literal notranslate"><span class="pre">data</span></code> as three arguments. The default value accessor assumes that the input data are numbers, or that they are coercible to numbers using <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/valueOf">valueOf</a>. If your data are not simply numbers, then you should specify an accessor that returns the corresponding numeric value for a given datum. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;number&quot;</span><span class="o">:</span>  <span class="mf">4</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Locke&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;number&quot;</span><span class="o">:</span>  <span class="mf">8</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Reyes&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;number&quot;</span><span class="o">:</span> <span class="mf">15</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Ford&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;number&quot;</span><span class="o">:</span> <span class="mf">16</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Jarrah&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;number&quot;</span><span class="o">:</span> <span class="mf">23</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Shephard&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;number&quot;</span><span class="o">:</span> <span class="mf">42</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Kwon&quot;</span><span class="p">}</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">arcs</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">pie</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">number</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</pre></div>
</div>
<p>This is similar to <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">mapping</a> your data to values before invoking the pie generator:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">arcs</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">pie</span><span class="p">()(</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">number</span><span class="p">;</span> <span class="p">}));</span>
</pre></div>
</div>
<p>The benefit of an accessor is that the input data remains associated with the returned objects, thereby making it easier to access other fields of the data, for example to set the color or to add text labels.</p>
<p><a name="pie_sort" href="#pie_sort">#</a> <i>pie</i>.<b>sort</b>([<i>compare</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/pie.js">Source</a></p>
<p>If <em>compare</em> is specified, sets the data comparator to the specified function and returns this pie generator. If <em>compare</em> is not specified, returns the current data comparator, which defaults to null. If both the data comparator and the value comparator are null, then arcs are positioned in the original input order. Otherwise, the data is sorted according to the data comparator, and the resulting order is used. Setting the data comparator implicitly sets the <a class="reference external" href="#pie_sortValues">value comparator</a> to null.</p>
<p>The <em>compare</em> function takes two arguments <em>a</em> and <em>b</em>, each elements from the input data array. If the arc for <em>a</em> should be before the arc for <em>b</em>, then the comparator must return a number less than zero; if the arc for <em>a</em> should be after the arc for <em>b</em>, then the comparator must return a number greater than zero; returning zero means that the relative order of <em>a</em> and <em>b</em> is unspecified. For example, to sort arcs by their associated name:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">pie</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="p">});</span>
</pre></div>
</div>
<p>Sorting does not affect the order of the <a class="reference external" href="#_pie">generated arc array</a> which is always in the same order as the input data array; it merely affects the computed angles of each arc. The first arc starts at the <a class="reference external" href="#pie_startAngle">start angle</a> and the last arc ends at the <a class="reference external" href="#pie_endAngle">end angle</a>.</p>
<p><a name="pie_sortValues" href="#pie_sortValues">#</a> <i>pie</i>.<b>sortValues</b>([<i>compare</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/pie.js">Source</a></p>
<p>If <em>compare</em> is specified, sets the value comparator to the specified function and returns this pie generator. If <em>compare</em> is not specified, returns the current value comparator, which defaults to descending value. The default value comparator is implemented as:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">compare</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">b</span> <span class="o">-</span> <span class="nx">a</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If both the data comparator and the value comparator are null, then arcs are positioned in the original input order. Otherwise, the data is sorted according to the data comparator, and the resulting order is used. Setting the value comparator implicitly sets the <a class="reference external" href="#pie_sort">data comparator</a> to null.</p>
<p>The value comparator is similar to the <a class="reference external" href="#pie_sort">data comparator</a>, except the two arguments <em>a</em> and <em>b</em> are values derived from the input data array using the <a class="reference external" href="#pie_value">value accessor</a>, not the data elements. If the arc for <em>a</em> should be before the arc for <em>b</em>, then the comparator must return a number less than zero; if the arc for <em>a</em> should be after the arc for <em>b</em>, then the comparator must return a number greater than zero; returning zero means that the relative order of <em>a</em> and <em>b</em> is unspecified. For example, to sort arcs by ascending value:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">pie</span><span class="p">.</span><span class="nx">sortValues</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">;</span> <span class="p">});</span>
</pre></div>
</div>
<p>Sorting does not affect the order of the <a class="reference external" href="#_pie">generated arc array</a> which is always in the same order as the input data array; it merely affects the computed angles of each arc. The first arc starts at the <a class="reference external" href="#pie_startAngle">start angle</a> and the last arc ends at the <a class="reference external" href="#pie_endAngle">end angle</a>.</p>
<p><a name="pie_startAngle" href="#pie_startAngle">#</a> <i>pie</i>.<b>startAngle</b>([<i>angle</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/pie.js">Source</a></p>
<p>If <em>angle</em> is specified, sets the overall start angle of the pie to the specified function or number and returns this pie generator. If <em>angle</em> is not specified, returns the current start angle accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">startAngle</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The start angle here means the <em>overall</em> start angle of the pie, <em>i.e.</em>, the start angle of the first arc. The start angle accessor is invoked once, being passed the same arguments and <code class="docutils literal notranslate"><span class="pre">this</span></code> context as the <a class="reference external" href="#_pie">pie generator</a>. The units of <em>angle</em> are arbitrary, but if you plan to use the pie generator in conjunction with an <a class="reference external" href="#arcs">arc generator</a>, you should specify an angle in radians, with 0 at -<em>y</em> (12 o’clock) and positive angles proceeding clockwise.</p>
<p><a name="pie_endAngle" href="#pie_endAngle">#</a> <i>pie</i>.<b>endAngle</b>([<i>angle</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/pie.js">Source</a></p>
<p>If <em>angle</em> is specified, sets the overall end angle of the pie to the specified function or number and returns this pie generator. If <em>angle</em> is not specified, returns the current end angle accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">endAngle</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The end angle here means the <em>overall</em> end angle of the pie, <em>i.e.</em>, the end angle of the last arc. The end angle accessor is invoked once, being passed the same arguments and <code class="docutils literal notranslate"><span class="pre">this</span></code> context as the <a class="reference external" href="#_pie">pie generator</a>. The units of <em>angle</em> are arbitrary, but if you plan to use the pie generator in conjunction with an <a class="reference external" href="#arcs">arc generator</a>, you should specify an angle in radians, with 0 at -<em>y</em> (12 o’clock) and positive angles proceeding clockwise.</p>
<p>The value of the end angle is constrained to <a class="reference external" href="#pie_startAngle">startAngle</a> ± τ, such that |endAngle - startAngle| ≤ τ.</p>
<p><a name="pie_padAngle" href="#pie_padAngle">#</a> <i>pie</i>.<b>padAngle</b>([<i>angle</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/pie.js">Source</a></p>
<p>If <em>angle</em> is specified, sets the pad angle to the specified function or number and returns this pie generator. If <em>angle</em> is not specified, returns the current pad angle accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">padAngle</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The pad angle here means the angular separation between each adjacent arc. The total amount of padding reserved is the specified <em>angle</em> times the number of elements in the input data array, and at most |endAngle - startAngle|; the remaining space is then divided proportionally by <a class="reference external" href="#pie_value">value</a> such that the relative area of each arc is preserved. See the <a class="reference external" href="http://bl.ocks.org/mbostock/3e961b4c97a1b543fff2">pie padding animation</a> for illustration. The pad angle accessor is invoked once, being passed the same arguments and <code class="docutils literal notranslate"><span class="pre">this</span></code> context as the <a class="reference external" href="#_pie">pie generator</a>. The units of <em>angle</em> are arbitrary, but if you plan to use the pie generator in conjunction with an <a class="reference external" href="#arcs">arc generator</a>, you should specify an angle in radians.</p>
</div>
<div class="section" id="lines">
<h3>Lines<a class="headerlink" href="#lines" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://observablehq.com/&#64;d3/line-chart"><img width="295" height="154" alt="Line Chart" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/line.png"></a></p>
<p>The line generator produces a <a class="reference external" href="https://en.wikipedia.org/wiki/Spline_(mathematics)">spline</a> or <a class="reference external" href="https://en.wikipedia.org/wiki/Polygonal_chain">polyline</a>, as in a line chart. Lines also appear in many other visualization types, such as the links in <a class="reference external" href="https://observablehq.com/&#64;d3/hierarchical-edge-bundling">hierarchical edge bundling</a>.</p>
<p><a name="line" href="#line">#</a> d3.<b>line</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/line.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-line">Examples</a></p>
<p>Constructs a new line generator with the default settings.</p>
<p><a name="_line" href="#_line">#</a> <i>line</i>(<i>data</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/line.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-line">Examples</a></p>
<p>Generates a line for the given array of <em>data</em>. Depending on this line generator’s associated <a class="reference external" href="#line_curve">curve</a>, the given input <em>data</em> may need to be sorted by <em>x</em>-value before being passed to the line generator. If the line generator has a <a class="reference external" href="#line_context">context</a>, then the line is rendered to this context as a sequence of <a class="reference external" href="http://www.w3.org/TR/2dcontext/#canvaspathmethods">path method</a> calls and this function returns void. Otherwise, a <a class="reference external" href="http://www.w3.org/TR/SVG/paths.html#PathData">path data</a> string is returned.</p>
<p><a name="line_x" href="#line_x">#</a> <i>line</i>.<b>x</b>([<i>x</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/line.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-line">Examples</a></p>
<p>If <em>x</em> is specified, sets the x accessor to the specified function or number and returns this line generator. If <em>x</em> is not specified, returns the current x accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">x</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When a line is <a class="reference external" href="#_line">generated</a>, the x accessor will be invoked for each <a class="reference external" href="#line_defined">defined</a> element in the input data array, being passed the element <code class="docutils literal notranslate"><span class="pre">d</span></code>, the index <code class="docutils literal notranslate"><span class="pre">i</span></code>, and the array <code class="docutils literal notranslate"><span class="pre">data</span></code> as three arguments. The default x accessor assumes that the input data are two-element arrays of numbers. If your data are in a different format, or if you wish to transform the data before rendering, then you should specify a custom accessor. For example, if <code class="docutils literal notranslate"><span class="pre">x</span></code> is a <a class="reference external" href="https://github.com/d3/d3-scale#time-scales">time scale</a> and <code class="docutils literal notranslate"><span class="pre">y</span></code> is a <a class="reference external" href="https://github.com/d3/d3-scale#linear-scales">linear scale</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span>var data = [
  {date: new Date(2007, 3, 24), value: 93.24},
  {date: new Date(2007, 3, 25), value: 95.35},
  {date: new Date(2007, 3, 26), value: 98.84},
  {date: new Date(2007, 3, 27), value: 99.92},
  {date: new Date(2007, 3, 30), value: 99.80},
  {date: new Date(2007, 4,  1), value: 99.47},
  …
];

var line = d3.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.value); });
</pre></div>
</div>
<p><a name="line_y" href="#line_y">#</a> <i>line</i>.<b>y</b>([<i>y</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/line.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-line">Examples</a></p>
<p>If <em>y</em> is specified, sets the y accessor to the specified function or number and returns this line generator. If <em>y</em> is not specified, returns the current y accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">y</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">[</span><span class="mf">1</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When a line is <a class="reference external" href="#_line">generated</a>, the y accessor will be invoked for each <a class="reference external" href="#line_defined">defined</a> element in the input data array, being passed the element <code class="docutils literal notranslate"><span class="pre">d</span></code>, the index <code class="docutils literal notranslate"><span class="pre">i</span></code>, and the array <code class="docutils literal notranslate"><span class="pre">data</span></code> as three arguments. The default y accessor assumes that the input data are two-element arrays of numbers. See <a class="reference external" href="#line_x"><em>line</em>.x</a> for more information.</p>
<p><a name="line_defined" href="#line_defined">#</a> <i>line</i>.<b>defined</b>([<i>defined</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/line.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-line">Examples</a></p>
<p>If <em>defined</em> is specified, sets the defined accessor to the specified function or boolean and returns this line generator. If <em>defined</em> is not specified, returns the current defined accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">defined</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The default accessor thus assumes that the input data is always defined. When a line is <a class="reference external" href="#_line">generated</a>, the defined accessor will be invoked for each element in the input data array, being passed the element <code class="docutils literal notranslate"><span class="pre">d</span></code>, the index <code class="docutils literal notranslate"><span class="pre">i</span></code>, and the array <code class="docutils literal notranslate"><span class="pre">data</span></code> as three arguments. If the given element is defined (<em>i.e.</em>, if the defined accessor returns a truthy value for this element), the <a class="reference external" href="#line_x">x</a> and <a class="reference external" href="#line_y">y</a> accessors will subsequently be evaluated and the point will be added to the current line segment. Otherwise, the element will be skipped, the current line segment will be ended, and a new line segment will be generated for the next defined point. As a result, the generated line may have several discrete segments. For example:</p>
<p><a class="reference external" href="http://bl.ocks.org/mbostock/0533f44f2cfabecc5e3a"><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/line-defined.png" width="480" height="250" alt="Line with Missing Data"></a></p>
<p>Note that if a line segment consists of only a single point, it may appear invisible unless rendered with rounded or square <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-linecap">line caps</a>. In addition, some curves such as <a class="reference external" href="#curveCardinalOpen">curveCardinalOpen</a> only render a visible segment if it contains multiple points.</p>
<p><a name="line_curve" href="#line_curve">#</a> <i>line</i>.<b>curve</b>([<i>curve</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/line.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-line">Examples</a></p>
<p>If <em>curve</em> is specified, sets the <a class="reference external" href="#curves">curve factory</a> and returns this line generator. If <em>curve</em> is not specified, returns the current curve factory, which defaults to <a class="reference external" href="#curveLinear">curveLinear</a>.</p>
<p><a name="line_context" href="#line_context">#</a> <i>line</i>.<b>context</b>([<i>context</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/line.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-line">Examples</a></p>
<p>If <em>context</em> is specified, sets the context and returns this line generator. If <em>context</em> is not specified, returns the current context, which defaults to null. If the context is not null, then the <a class="reference external" href="#_line">generated line</a> is rendered to this context as a sequence of <a class="reference external" href="http://www.w3.org/TR/2dcontext/#canvaspathmethods">path method</a> calls. Otherwise, a <a class="reference external" href="http://www.w3.org/TR/SVG/paths.html#PathData">path data</a> string representing the generated line is returned.</p>
<p><a name="lineRadial" href="#lineRadial">#</a> d3.<b>lineRadial</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/lineRadial.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-lineradial">Examples</a></p>
<img alt="Radial Line" width="250" height="250" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/line-radial.png">
<p>Constructs a new radial line generator with the default settings. A radial line generator is equivalent to the standard Cartesian <a class="reference external" href="#line">line generator</a>, except the <a class="reference external" href="#line_x">x</a> and <a class="reference external" href="#line_y">y</a> accessors are replaced with <a class="reference external" href="#lineRadial_angle">angle</a> and <a class="reference external" href="#lineRadial_radius">radius</a> accessors. Radial lines are always positioned relative to ⟨0,0⟩; use a transform (see: <a class="reference external" href="http://www.w3.org/TR/SVG/coords.html#TransformAttribute">SVG</a>, <a class="reference external" href="http://www.w3.org/TR/2dcontext/#transformations">Canvas</a>) to change the origin.</p>
<p><a name="_lineRadial" href="#_lineRadial">#</a> <i>lineRadial</i>(<i>data</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/lineRadial.js#L4">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-lineradial">Examples</a></p>
<p>Equivalent to <a class="reference external" href="#_line"><em>line</em></a>.</p>
<p><a name="lineRadial_angle" href="#lineRadial_angle">#</a> <i>lineRadial</i>.<b>angle</b>([<i>angle</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/lineRadial.js#L7">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-lineradial">Examples</a></p>
<p>Equivalent to <a class="reference external" href="#line_x"><em>line</em>.x</a>, except the accessor returns the angle in radians, with 0 at -<em>y</em> (12 o’clock).</p>
<p><a name="lineRadial_radius" href="#lineRadial_radius">#</a> <i>lineRadial</i>.<b>radius</b>([<i>radius</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/lineRadial.js#L8">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-lineradial">Examples</a></p>
<p>Equivalent to <a class="reference external" href="#line_y"><em>line</em>.y</a>, except the accessor returns the radius: the distance from the origin ⟨0,0⟩.</p>
<p><a name="lineRadial_defined" href="#lineRadial_defined">#</a> <i>lineRadial</i>.<b>defined</b>([<i>defined</i>])</p>
<p>Equivalent to <a class="reference external" href="#line_defined"><em>line</em>.defined</a>.</p>
<p><a name="lineRadial_curve" href="#lineRadial_curve">#</a> <i>lineRadial</i>.<b>curve</b>([<i>curve</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/lineRadial.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-lineradial">Examples</a></p>
<p>Equivalent to <a class="reference external" href="#line_curve"><em>line</em>.curve</a>. Note that <a class="reference external" href="#curveMonotoneX">curveMonotoneX</a> or <a class="reference external" href="#curveMonotoneY">curveMonotoneY</a> are not recommended for radial lines because they assume that the data is monotonic in <em>x</em> or <em>y</em>, which is typically untrue of radial lines.</p>
<p><a name="lineRadial_context" href="#lineRadial_context">#</a> <i>lineRadial</i>.<b>context</b>([<i>context</i>])</p>
<p>Equivalent to <a class="reference external" href="#line_context"><em>line</em>.context</a>.</p>
</div>
<div class="section" id="areas">
<h3>Areas<a class="headerlink" href="#areas" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://observablehq.com/&#64;d3/area-chart"><img alt="Area Chart" width="295" height="154" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/area.png"></a><a class="reference external" href="https://observablehq.com/&#64;d3/stacked-area-chart"><img alt="Stacked Area Chart" width="295" height="154" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/area-stacked.png"></a><a class="reference external" href="https://observablehq.com/&#64;d3/difference-chart"><img alt="Difference Chart" width="295" height="154" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/area-difference.png"></a></p>
<p>The area generator produces an area, as in an area chart. An area is defined by two bounding <a class="reference external" href="#lines">lines</a>, either splines or polylines. Typically, the two lines share the same <a class="reference external" href="#area_x"><em>x</em>-values</a> (<a class="reference external" href="#area_x0">x0</a> = <a class="reference external" href="#area_x1">x1</a>), differing only in <em>y</em>-value (<a class="reference external" href="#area_y0">y0</a> and <a class="reference external" href="#area_y1">y1</a>); most commonly, y0 is defined as a constant representing <a class="reference external" href="http://www.vox.com/2015/11/19/9758062/y-axis-zero-chart">zero</a>. The first line (the <i>topline</i>) is defined by x1 and y1 and is rendered first; the second line (the <i>baseline</i>) is defined by x0 and y0 and is rendered second, with the points in reverse order. With a <a class="reference external" href="#curveLinear">curveLinear</a> <a class="reference external" href="#area_curve">curve</a>, this produces a clockwise polygon.</p>
<p><a name="area" href="#area">#</a> d3.<b>area</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>Constructs a new area generator with the default settings.</p>
<p><a name="_area" href="#_area">#</a> <i>area</i>(<i>data</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>Generates an area for the given array of <em>data</em>. Depending on this area generator’s associated <a class="reference external" href="#area_curve">curve</a>, the given input <em>data</em> may need to be sorted by <em>x</em>-value before being passed to the area generator. If the area generator has a <a class="reference external" href="#line_context">context</a>, then the area is rendered to this context as a sequence of <a class="reference external" href="http://www.w3.org/TR/2dcontext/#canvaspathmethods">path method</a> calls and this function returns void. Otherwise, a <a class="reference external" href="http://www.w3.org/TR/SVG/paths.html#PathData">path data</a> string is returned.</p>
<p><a name="area_x" href="#area_x">#</a> <i>area</i>.<b>x</b>([<i>x</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>If <em>x</em> is specified, sets <a class="reference external" href="#area_x0">x0</a> to <em>x</em> and <a class="reference external" href="#area_x1">x1</a> to null and returns this area generator. If <em>x</em> is not specified, returns the current x0 accessor.</p>
<p><a name="area_x0" href="#area_x0">#</a> <i>area</i>.<b>x0</b>([<i>x</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>If <em>x</em> is specified, sets the x0 accessor to the specified function or number and returns this area generator. If <em>x</em> is not specified, returns the current x0 accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">x</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When an area is <a class="reference external" href="#_area">generated</a>, the x0 accessor will be invoked for each <a class="reference external" href="#area_defined">defined</a> element in the input data array, being passed the element <code class="docutils literal notranslate"><span class="pre">d</span></code>, the index <code class="docutils literal notranslate"><span class="pre">i</span></code>, and the array <code class="docutils literal notranslate"><span class="pre">data</span></code> as three arguments. The default x0 accessor assumes that the input data are two-element arrays of numbers. If your data are in a different format, or if you wish to transform the data before rendering, then you should specify a custom accessor. For example, if <code class="docutils literal notranslate"><span class="pre">x</span></code> is a <a class="reference external" href="https://github.com/d3/d3-scale#time-scales">time scale</a> and <code class="docutils literal notranslate"><span class="pre">y</span></code> is a <a class="reference external" href="https://github.com/d3/d3-scale#linear-scales">linear scale</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span>var data = [
  {date: new Date(2007, 3, 24), value: 93.24},
  {date: new Date(2007, 3, 25), value: 95.35},
  {date: new Date(2007, 3, 26), value: 98.84},
  {date: new Date(2007, 3, 27), value: 99.92},
  {date: new Date(2007, 3, 30), value: 99.80},
  {date: new Date(2007, 4,  1), value: 99.47},
  …
];

var area = d3.area()
    .x(function(d) { return x(d.date); })
    .y1(function(d) { return y(d.value); })
    .y0(y(0));
</pre></div>
</div>
<p><a name="area_x1" href="#area_x1">#</a> <i>area</i>.<b>x1</b>([<i>x</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>If <em>x</em> is specified, sets the x1 accessor to the specified function or number and returns this area generator. If <em>x</em> is not specified, returns the current x1 accessor, which defaults to null, indicating that the previously-computed <a class="reference external" href="#area_x0">x0</a> value should be reused for the x1 value.</p>
<p>When an area is <a class="reference external" href="#_area">generated</a>, the x1 accessor will be invoked for each <a class="reference external" href="#area_defined">defined</a> element in the input data array, being passed the element <code class="docutils literal notranslate"><span class="pre">d</span></code>, the index <code class="docutils literal notranslate"><span class="pre">i</span></code>, and the array <code class="docutils literal notranslate"><span class="pre">data</span></code> as three arguments. See <a class="reference external" href="#area_x0"><em>area</em>.x0</a> for more information.</p>
<p><a name="area_y" href="#area_y">#</a> <i>area</i>.<b>y</b>([<i>y</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>If <em>y</em> is specified, sets <a class="reference external" href="#area_y0">y0</a> to <em>y</em> and <a class="reference external" href="#area_y1">y1</a> to null and returns this area generator. If <em>y</em> is not specified, returns the current y0 accessor.</p>
<p><a name="area_y0" href="#area_y0">#</a> <i>area</i>.<b>y0</b>([<i>y</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>If <em>y</em> is specified, sets the y0 accessor to the specified function or number and returns this area generator. If <em>y</em> is not specified, returns the current y0 accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">y</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When an area is <a class="reference external" href="#_area">generated</a>, the y0 accessor will be invoked for each <a class="reference external" href="#area_defined">defined</a> element in the input data array, being passed the element <code class="docutils literal notranslate"><span class="pre">d</span></code>, the index <code class="docutils literal notranslate"><span class="pre">i</span></code>, and the array <code class="docutils literal notranslate"><span class="pre">data</span></code> as three arguments. See <a class="reference external" href="#area_x0"><em>area</em>.x0</a> for more information.</p>
<p><a name="area_y1" href="#area_y1">#</a> <i>area</i>.<b>y1</b>([<i>y</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>If <em>y</em> is specified, sets the y1 accessor to the specified function or number and returns this area generator. If <em>y</em> is not specified, returns the current y1 accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">y</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">[</span><span class="mf">1</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A null accessor is also allowed, indicating that the previously-computed <a class="reference external" href="#area_y0">y0</a> value should be reused for the y1 value. When an area is <a class="reference external" href="#_area">generated</a>, the y1 accessor will be invoked for each <a class="reference external" href="#area_defined">defined</a> element in the input data array, being passed the element <code class="docutils literal notranslate"><span class="pre">d</span></code>, the index <code class="docutils literal notranslate"><span class="pre">i</span></code>, and the array <code class="docutils literal notranslate"><span class="pre">data</span></code> as three arguments. See <a class="reference external" href="#area_x0"><em>area</em>.x0</a> for more information.</p>
<p><a name="area_defined" href="#area_defined">#</a> <i>area</i>.<b>defined</b>([<i>defined</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>If <em>defined</em> is specified, sets the defined accessor to the specified function or boolean and returns this area generator. If <em>defined</em> is not specified, returns the current defined accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">defined</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The default accessor thus assumes that the input data is always defined. When an area is <a class="reference external" href="#_area">generated</a>, the defined accessor will be invoked for each element in the input data array, being passed the element <code class="docutils literal notranslate"><span class="pre">d</span></code>, the index <code class="docutils literal notranslate"><span class="pre">i</span></code>, and the array <code class="docutils literal notranslate"><span class="pre">data</span></code> as three arguments. If the given element is defined (<em>i.e.</em>, if the defined accessor returns a truthy value for this element), the <a class="reference external" href="#area_x0">x0</a>, <a class="reference external" href="#area_x1">x1</a>, <a class="reference external" href="#area_y0">y0</a> and <a class="reference external" href="#area_y1">y1</a> accessors will subsequently be evaluated and the point will be added to the current area segment. Otherwise, the element will be skipped, the current area segment will be ended, and a new area segment will be generated for the next defined point. As a result, the generated area may have several discrete segments. For example:</p>
<p><a class="reference external" href="http://bl.ocks.org/mbostock/3035090"><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/area-defined.png" width="480" height="250" alt="Area with Missing Data"></a></p>
<p>Note that if an area segment consists of only a single point, it may appear invisible unless rendered with rounded or square <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-linecap">line caps</a>. In addition, some curves such as <a class="reference external" href="#curveCardinalOpen">curveCardinalOpen</a> only render a visible segment if it contains multiple points.</p>
<p><a name="area_curve" href="#area_curve">#</a> <i>area</i>.<b>curve</b>([<i>curve</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>If <em>curve</em> is specified, sets the <a class="reference external" href="#curves">curve factory</a> and returns this area generator. If <em>curve</em> is not specified, returns the current curve factory, which defaults to <a class="reference external" href="#curveLinear">curveLinear</a>.</p>
<p><a name="area_context" href="#area_context">#</a> <i>area</i>.<b>context</b>([<i>context</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>If <em>context</em> is specified, sets the context and returns this area generator. If <em>context</em> is not specified, returns the current context, which defaults to null. If the context is not null, then the <a class="reference external" href="#_area">generated area</a> is rendered to this context as a sequence of <a class="reference external" href="http://www.w3.org/TR/2dcontext/#canvaspathmethods">path method</a> calls. Otherwise, a <a class="reference external" href="http://www.w3.org/TR/SVG/paths.html#PathData">path data</a> string representing the generated area is returned.</p>
<p><a name="area_lineX0" href="#area_lineX0">#</a> <i>area</i>.<b>lineX0</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a>
<br><a name="area_lineY0" href="#area_lineY0">#</a> <i>area</i>.<b>lineY0</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>Returns a new <a class="reference external" href="#lines">line generator</a> that has this area generator’s current <a class="reference external" href="#area_defined">defined accessor</a>, <a class="reference external" href="#area_curve">curve</a> and <a class="reference external" href="#area_context">context</a>. The line’s <a class="reference external" href="#line_x"><em>x</em>-accessor</a> is this area’s <a class="reference external" href="#area_x0"><em>x0</em>-accessor</a>, and the line’s <a class="reference external" href="#line_y"><em>y</em>-accessor</a> is this area’s <a class="reference external" href="#area_y0"><em>y0</em>-accessor</a>.</p>
<p><a name="area_lineX1" href="#area_lineX1">#</a> <i>area</i>.<b>lineX1</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>Returns a new <a class="reference external" href="#lines">line generator</a> that has this area generator’s current <a class="reference external" href="#area_defined">defined accessor</a>, <a class="reference external" href="#area_curve">curve</a> and <a class="reference external" href="#area_context">context</a>. The line’s <a class="reference external" href="#line_x"><em>x</em>-accessor</a> is this area’s <a class="reference external" href="#area_x1"><em>x1</em>-accessor</a>, and the line’s <a class="reference external" href="#line_y"><em>y</em>-accessor</a> is this area’s <a class="reference external" href="#area_y0"><em>y0</em>-accessor</a>.</p>
<p><a name="area_lineY1" href="#area_lineY1">#</a> <i>area</i>.<b>lineY1</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/area.js">Source</a></p>
<p>Returns a new <a class="reference external" href="#lines">line generator</a> that has this area generator’s current <a class="reference external" href="#area_defined">defined accessor</a>, <a class="reference external" href="#area_curve">curve</a> and <a class="reference external" href="#area_context">context</a>. The line’s <a class="reference external" href="#line_x"><em>x</em>-accessor</a> is this area’s <a class="reference external" href="#area_x0"><em>x0</em>-accessor</a>, and the line’s <a class="reference external" href="#line_y"><em>y</em>-accessor</a> is this area’s <a class="reference external" href="#area_y1"><em>y1</em>-accessor</a>.</p>
<p><a name="areaRadial" href="#areaRadial">#</a> d3.<b>areaRadial</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a></p>
<img alt="Radial Area" width="250" height="250" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/area-radial.png">
<p>Constructs a new radial area generator with the default settings. A radial area generator is equivalent to the standard Cartesian <a class="reference external" href="#area">area generator</a>, except the <a class="reference external" href="#area_x">x</a> and <a class="reference external" href="#area_y">y</a> accessors are replaced with <a class="reference external" href="#areaRadial_angle">angle</a> and <a class="reference external" href="#areaRadial_radius">radius</a> accessors. Radial areas are always positioned relative to ⟨0,0⟩; use a transform (see: <a class="reference external" href="http://www.w3.org/TR/SVG/coords.html#TransformAttribute">SVG</a>, <a class="reference external" href="http://www.w3.org/TR/2dcontext/#transformations">Canvas</a>) to change the origin.</p>
<p><a name="_areaRadial" href="#_areaRadial">#</a> <i>areaRadial</i>(<i>data</i>)</p>
<p>Equivalent to <a class="reference external" href="#_area"><em>area</em></a>.</p>
<p><a name="areaRadial_angle" href="#areaRadial_angle">#</a> <i>areaRadial</i>.<b>angle</b>([<i>angle</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a></p>
<p>Equivalent to <a class="reference external" href="#area_x"><em>area</em>.x</a>, except the accessor returns the angle in radians, with 0 at -<em>y</em> (12 o’clock).</p>
<p><a name="areaRadial_startAngle" href="#areaRadial_startAngle">#</a> <i>areaRadial</i>.<b>startAngle</b>([<i>angle</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a></p>
<p>Equivalent to <a class="reference external" href="#area_x0"><em>area</em>.x0</a>, except the accessor returns the angle in radians, with 0 at -<em>y</em> (12 o’clock). Note: typically <a class="reference external" href="#areaRadial_angle">angle</a> is used instead of setting separate start and end angles.</p>
<p><a name="areaRadial_endAngle" href="#areaRadial_endAngle">#</a> <i>areaRadial</i>.<b>endAngle</b>([<i>angle</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a></p>
<p>Equivalent to <a class="reference external" href="#area_x1"><em>area</em>.x1</a>, except the accessor returns the angle in radians, with 0 at -<em>y</em> (12 o’clock). Note: typically <a class="reference external" href="#areaRadial_angle">angle</a> is used instead of setting separate start and end angles.</p>
<p><a name="areaRadial_radius" href="#areaRadial_radius">#</a> <i>areaRadial</i>.<b>radius</b>([<i>radius</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a></p>
<p>Equivalent to <a class="reference external" href="#area_y"><em>area</em>.y</a>, except the accessor returns the radius: the distance from the origin ⟨0,0⟩.</p>
<p><a name="areaRadial_innerRadius" href="#areaRadial_innerRadius">#</a> <i>areaRadial</i>.<b>innerRadius</b>([<i>radius</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a></p>
<p>Equivalent to <a class="reference external" href="#area_y0"><em>area</em>.y0</a>, except the accessor returns the radius: the distance from the origin ⟨0,0⟩.</p>
<p><a name="areaRadial_outerRadius" href="#areaRadial_outerRadius">#</a> <i>areaRadial</i>.<b>outerRadius</b>([<i>radius</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a></p>
<p>Equivalent to <a class="reference external" href="#area_y1"><em>area</em>.y1</a>, except the accessor returns the radius: the distance from the origin ⟨0,0⟩.</p>
<p><a name="areaRadial_defined" href="#areaRadial_defined">#</a> <i>areaRadial</i>.<b>defined</b>([<i>defined</i>])</p>
<p>Equivalent to <a class="reference external" href="#area_defined"><em>area</em>.defined</a>.</p>
<p><a name="areaRadial_curve" href="#areaRadial_curve">#</a> <i>areaRadial</i>.<b>curve</b>([<i>curve</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a></p>
<p>Equivalent to <a class="reference external" href="#area_curve"><em>area</em>.curve</a>. Note that <a class="reference external" href="#curveMonotoneX">curveMonotoneX</a> or <a class="reference external" href="#curveMonotoneY">curveMonotoneY</a> are not recommended for radial areas because they assume that the data is monotonic in <em>x</em> or <em>y</em>, which is typically untrue of radial areas.</p>
<p><a name="areaRadial_context" href="#areaRadial_context">#</a> <i>areaRadial</i>.<b>context</b>([<i>context</i>])</p>
<p>Equivalent to <a class="reference external" href="#line_context"><em>line</em>.context</a>.</p>
<p><a name="areaRadial_lineStartAngle" href="#areaRadial_lineStartAngle">#</a> <i>areaRadial</i>.<b>lineStartAngle</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a>
<br><a name="areaRadial_lineInnerRadius" href="#areaRadial_lineInnerRadius">#</a> <i>areaRadial</i>.<b>lineInnerRadius</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a></p>
<p>Returns a new <a class="reference external" href="#lineRadial">radial line generator</a> that has this radial area generator’s current <a class="reference external" href="#areaRadial_defined">defined accessor</a>, <a class="reference external" href="#areaRadial_curve">curve</a> and <a class="reference external" href="#areaRadial_context">context</a>. The line’s <a class="reference external" href="#lineRadial_angle">angle accessor</a> is this area’s <a class="reference external" href="#areaRadial_startAngle">start angle accessor</a>, and the line’s <a class="reference external" href="#lineRadial_radius">radius accessor</a> is this area’s <a class="reference external" href="#areaRadial_innerRadius">inner radius accessor</a>.</p>
<p><a name="areaRadial_lineEndAngle" href="#areaRadial_lineEndAngle">#</a> <i>areaRadial</i>.<b>lineEndAngle</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a></p>
<p>Returns a new <a class="reference external" href="#lineRadial">radial line generator</a> that has this radial area generator’s current <a class="reference external" href="#areaRadial_defined">defined accessor</a>, <a class="reference external" href="#areaRadial_curve">curve</a> and <a class="reference external" href="#areaRadial_context">context</a>. The line’s <a class="reference external" href="#lineRadial_angle">angle accessor</a> is this area’s <a class="reference external" href="#areaRadial_endAngle">end angle accessor</a>, and the line’s <a class="reference external" href="#lineRadial_radius">radius accessor</a> is this area’s <a class="reference external" href="#areaRadial_innerRadius">inner radius accessor</a>.</p>
<p><a name="areaRadial_lineOuterRadius" href="#areaRadial_lineOuterRadius">#</a> <i>areaRadial</i>.<b>lineOuterRadius</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/areaRadial.js">Source</a></p>
<p>Returns a new <a class="reference external" href="#lineRadial">radial line generator</a> that has this radial area generator’s current <a class="reference external" href="#areaRadial_defined">defined accessor</a>, <a class="reference external" href="#areaRadial_curve">curve</a> and <a class="reference external" href="#areaRadial_context">context</a>. The line’s <a class="reference external" href="#lineRadial_angle">angle accessor</a> is this area’s <a class="reference external" href="#areaRadial_startAngle">start angle accessor</a>, and the line’s <a class="reference external" href="#lineRadial_radius">radius accessor</a> is this area’s <a class="reference external" href="#areaRadial_outerRadius">outer radius accessor</a>.</p>
</div>
<div class="section" id="curves">
<h3>Curves<a class="headerlink" href="#curves" title="Permalink to this headline">¶</a></h3>
<p>While <a class="reference external" href="#lines">lines</a> are defined as a sequence of two-dimensional [<em>x</em>, <em>y</em>] points, and <a class="reference external" href="#areas">areas</a> are similarly defined by a topline and a baseline, there remains the task of transforming this discrete representation into a continuous shape: <em>i.e.</em>, how to interpolate between the points. A variety of curves are provided for this purpose.</p>
<p>Curves are typically not constructed or used directly, instead being passed to <a class="reference external" href="#line_curve"><em>line</em>.curve</a> and <a class="reference external" href="#area_curve"><em>area</em>.curve</a>. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">line</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">date</span><span class="p">);</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">y</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">y</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">curve</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">curveCatmullRom</span><span class="p">.</span><span class="nx">alpha</span><span class="p">(</span><span class="mf">0.5</span><span class="p">));</span>
</pre></div>
</div>
<p><a name="curveBasis" href="#curveBasis">#</a> d3.<b>curveBasis</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/basis.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/basis.png" width="888" height="240" alt="basis">
<p>Produces a cubic <a class="reference external" href="https://en.wikipedia.org/wiki/B-spline">basis spline</a> using the specified control points. The first and last points are triplicated such that the spline starts at the first point and ends at the last point, and is tangent to the line between the first and second points, and to the line between the penultimate and last points.</p>
<p><a name="curveBasisClosed" href="#curveBasisClosed">#</a> d3.<b>curveBasisClosed</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/basisClosed.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/basisClosed.png" width="888" height="240" alt="basisClosed">
<p>Produces a closed cubic <a class="reference external" href="https://en.wikipedia.org/wiki/B-spline">basis spline</a> using the specified control points. When a line segment ends, the first three control points are repeated, producing a closed loop with C2 continuity.</p>
<p><a name="curveBasisOpen" href="#curveBasisOpen">#</a> d3.<b>curveBasisOpen</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/basisOpen.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/basisOpen.png" width="888" height="240" alt="basisOpen">
<p>Produces a cubic <a class="reference external" href="https://en.wikipedia.org/wiki/B-spline">basis spline</a> using the specified control points. Unlike <a class="reference external" href="#basis">basis</a>, the first and last points are not repeated, and thus the curve typically does not intersect these points.</p>
<p><a name="curveBundle" href="#curveBundle">#</a> d3.<b>curveBundle</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/bundle.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/bundle.png" width="888" height="240" alt="bundle">
<p>Produces a straightened cubic <a class="reference external" href="https://en.wikipedia.org/wiki/B-spline">basis spline</a> using the specified control points, with the spline straightened according to the curve’s <a class="reference external" href="#curveBundle_beta"><em>beta</em></a>, which defaults to 0.85. This curve is typically used in <a class="reference external" href="https://observablehq.com/&#64;d3/hierarchical-edge-bundling">hierarchical edge bundling</a> to disambiguate connections, as proposed by <a class="reference external" href="https://www.win.tue.nl/vis1/home/dholten/">Danny Holten</a> in <a class="reference external" href="https://www.win.tue.nl/vis1/home/dholten/papers/bundles_infovis.pdf">Hierarchical Edge Bundles: Visualization of Adjacency Relations in Hierarchical Data</a>. This curve does not implement <a class="reference external" href="#curve_areaStart"><em>curve</em>.areaStart</a> and <a class="reference external" href="#curve_areaEnd"><em>curve</em>.areaEnd</a>; it is intended to work with <a class="reference external" href="#lines">d3.line</a>, not <a class="reference external" href="#areas">d3.area</a>.</p>
<p><a name="curveBundle_beta" href="#curveBundle_beta">#</a> <i>bundle</i>.<b>beta</b>(<i>beta</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/bundle.js">Source</a></p>
<p>Returns a bundle curve with the specified <em>beta</em> in the range [0, 1], representing the bundle strength. If <em>beta</em> equals zero, a straight line between the first and last point is produced; if <em>beta</em> equals one, a standard <a class="reference external" href="#basis">basis</a> spline is produced. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">line</span><span class="p">().</span><span class="nx">curve</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">curveBundle</span><span class="p">.</span><span class="nx">beta</span><span class="p">(</span><span class="mf">0.5</span><span class="p">));</span>
</pre></div>
</div>
<p><a name="curveCardinal" href="#curveCardinal">#</a> d3.<b>curveCardinal</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/cardinal.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/cardinal.png" width="888" height="240" alt="cardinal">
<p>Produces a cubic <a class="reference external" href="https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Cardinal_spline">cardinal spline</a> using the specified control points, with one-sided differences used for the first and last piece. The default <a class="reference external" href="#curveCardinal_tension">tension</a> is 0.</p>
<p><a name="curveCardinalClosed" href="#curveCardinalClosed">#</a> d3.<b>curveCardinalClosed</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/cardinalClosed.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/cardinalClosed.png" width="888" height="240" alt="cardinalClosed">
<p>Produces a closed cubic <a class="reference external" href="https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Cardinal_spline">cardinal spline</a> using the specified control points. When a line segment ends, the first three control points are repeated, producing a closed loop. The default <a class="reference external" href="#curveCardinal_tension">tension</a> is 0.</p>
<p><a name="curveCardinalOpen" href="#curveCardinalOpen">#</a> d3.<b>curveCardinalOpen</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/cardinalOpen.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/cardinalOpen.png" width="888" height="240" alt="cardinalOpen">
<p>Produces a cubic <a class="reference external" href="https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Cardinal_spline">cardinal spline</a> using the specified control points. Unlike <a class="reference external" href="#curveCardinal">curveCardinal</a>, one-sided differences are not used for the first and last piece, and thus the curve starts at the second point and ends at the penultimate point. The default <a class="reference external" href="#curveCardinal_tension">tension</a> is 0.</p>
<p><a name="curveCardinal_tension" href="#curveCardinal_tension">#</a> <i>cardinal</i>.<b>tension</b>(<i>tension</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/cardinalOpen.js">Source</a></p>
<p>Returns a cardinal curve with the specified <em>tension</em> in the range [0, 1]. The <em>tension</em> determines the length of the tangents: a <em>tension</em> of one yields all zero tangents, equivalent to <a class="reference external" href="#curveLinear">curveLinear</a>; a <em>tension</em> of zero produces a uniform <a class="reference external" href="#curveCatmullRom">Catmull–Rom</a> spline. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">line</span><span class="p">().</span><span class="nx">curve</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">curveCardinal</span><span class="p">.</span><span class="nx">tension</span><span class="p">(</span><span class="mf">0.5</span><span class="p">));</span>
</pre></div>
</div>
<p><a name="curveCatmullRom" href="#curveCatmullRom">#</a> d3.<b>curveCatmullRom</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/catmullRom.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/catmullRom.png" width="888" height="240" alt="catmullRom">
<p>Produces a cubic Catmull–Rom spline using the specified control points and the parameter <a class="reference external" href="#curveCatmullRom_alpha"><em>alpha</em></a>, which defaults to 0.5, as proposed by Yuksel et al. in <a class="reference external" href="http://www.cemyuksel.com/research/catmullrom_param/">On the Parameterization of Catmull–Rom Curves</a>, with one-sided differences used for the first and last piece.</p>
<p><a name="curveCatmullRomClosed" href="#curveCatmullRomClosed">#</a> d3.<b>curveCatmullRomClosed</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/catmullRomClosed.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/catmullRomClosed.png" width="888" height="330" alt="catmullRomClosed">
<p>Produces a closed cubic Catmull–Rom spline using the specified control points and the parameter <a class="reference external" href="#curveCatmullRom_alpha"><em>alpha</em></a>, which defaults to 0.5, as proposed by Yuksel et al. When a line segment ends, the first three control points are repeated, producing a closed loop.</p>
<p><a name="curveCatmullRomOpen" href="#curveCatmullRomOpen">#</a> d3.<b>curveCatmullRomOpen</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/catmullRomOpen.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/catmullRomOpen.png" width="888" height="240" alt="catmullRomOpen">
<p>Produces a cubic Catmull–Rom spline using the specified control points and the parameter <a class="reference external" href="#curveCatmullRom_alpha"><em>alpha</em></a>, which defaults to 0.5, as proposed by Yuksel et al. Unlike <a class="reference external" href="#curveCatmullRom">curveCatmullRom</a>, one-sided differences are not used for the first and last piece, and thus the curve starts at the second point and ends at the penultimate point.</p>
<p><a name="curveCatmullRom_alpha" href="#curveCatmullRom_alpha">#</a> <i>catmullRom</i>.<b>alpha</b>(<i>alpha</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/catmullRom.js">Source</a></p>
<p>Returns a cubic Catmull–Rom curve with the specified <em>alpha</em> in the range [0, 1]. If <em>alpha</em> is zero, produces a uniform spline, equivalent to <a class="reference external" href="#curveCardinal">curveCardinal</a> with a tension of zero; if <em>alpha</em> is one, produces a chordal spline; if <em>alpha</em> is 0.5, produces a <a class="reference external" href="https://en.wikipedia.org/wiki/Centripetal_Catmull%E2%80%93Rom_spline">centripetal spline</a>. Centripetal splines are recommended to avoid self-intersections and overshoot. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">line</span><span class="p">().</span><span class="nx">curve</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">curveCatmullRom</span><span class="p">.</span><span class="nx">alpha</span><span class="p">(</span><span class="mf">0.5</span><span class="p">));</span>
</pre></div>
</div>
<p><a name="curveLinear" href="#curveLinear">#</a> d3.<b>curveLinear</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/linear.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/linear.png" width="888" height="240" alt="linear">
<p>Produces a polyline through the specified points.</p>
<p><a name="curveLinearClosed" href="#curveLinearClosed">#</a> d3.<b>curveLinearClosed</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/linearClosed.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/linearClosed.png" width="888" height="240" alt="linearClosed">
<p>Produces a closed polyline through the specified points by repeating the first point when the line segment ends.</p>
<p><a name="curveMonotoneX" href="#curveMonotoneX">#</a> d3.<b>curveMonotoneX</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/monotone.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/monotoneX.png" width="888" height="240" alt="monotoneX">
<p>Produces a cubic spline that <a class="reference external" href="https://en.wikipedia.org/wiki/Monotone_cubic_interpolation">preserves monotonicity</a> in <em>y</em>, assuming monotonicity in <em>x</em>, as proposed by Steffen in <a class="reference external" href="http://adsabs.harvard.edu/full/1990A%26A...239..443S">A simple method for monotonic interpolation in one dimension</a>: “a smooth curve with continuous first-order derivatives that passes through any given set of data points without spurious oscillations. Local extrema can occur only at grid points where they are given by the data, but not in between two adjacent grid points.”</p>
<p><a name="curveMonotoneY" href="#curveMonotoneY">#</a> d3.<b>curveMonotoneY</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/monotone.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/monotoneY.png" width="888" height="240" alt="monotoneY">
<p>Produces a cubic spline that <a class="reference external" href="https://en.wikipedia.org/wiki/Monotone_cubic_interpolation">preserves monotonicity</a> in <em>x</em>, assuming monotonicity in <em>y</em>, as proposed by Steffen in <a class="reference external" href="http://adsabs.harvard.edu/full/1990A%26A...239..443S">A simple method for monotonic interpolation in one dimension</a>: “a smooth curve with continuous first-order derivatives that passes through any given set of data points without spurious oscillations. Local extrema can occur only at grid points where they are given by the data, but not in between two adjacent grid points.”</p>
<p><a name="curveNatural" href="#curveNatural">#</a> d3.<b>curveNatural</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/natural.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/natural.png" width="888" height="240" alt="natural">
<p>Produces a <a class="reference external" href="https://en.wikipedia.org/wiki/Spline_interpolation">natural</a> <a class="reference external" href="http://mathworld.wolfram.com/CubicSpline.html">cubic spline</a> with the second derivative of the spline set to zero at the endpoints.</p>
<p><a name="curveStep" href="#curveStep">#</a> d3.<b>curveStep</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/step.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/step.png" width="888" height="240" alt="step">
<p>Produces a piecewise constant function (a <a class="reference external" href="https://en.wikipedia.org/wiki/Step_function">step function</a>) consisting of alternating horizontal and vertical lines. The <em>y</em>-value changes at the midpoint of each pair of adjacent <em>x</em>-values.</p>
<p><a name="curveStepAfter" href="#curveStepAfter">#</a> d3.<b>curveStepAfter</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/step.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/stepAfter.png" width="888" height="240" alt="stepAfter">
<p>Produces a piecewise constant function (a <a class="reference external" href="https://en.wikipedia.org/wiki/Step_function">step function</a>) consisting of alternating horizontal and vertical lines. The <em>y</em>-value changes after the <em>x</em>-value.</p>
<p><a name="curveStepBefore" href="#curveStepBefore">#</a> d3.<b>curveStepBefore</b>(<i>context</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/step.js">Source</a></p>
<img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/stepBefore.png" width="888" height="240" alt="stepBefore">
<p>Produces a piecewise constant function (a <a class="reference external" href="https://en.wikipedia.org/wiki/Step_function">step function</a>) consisting of alternating horizontal and vertical lines. The <em>y</em>-value changes before the <em>x</em>-value.</p>
</div>
<div class="section" id="custom-curves">
<h3>Custom Curves<a class="headerlink" href="#custom-curves" title="Permalink to this headline">¶</a></h3>
<p>Curves are typically not used directly, instead being passed to <a class="reference external" href="#line_curve"><em>line</em>.curve</a> and <a class="reference external" href="#area_curve"><em>area</em>.curve</a>. However, you can define your own curve implementation should none of the built-in curves satisfy your needs using the following interface. You can also use this low-level interface with a built-in curve type as an alternative to the line and area generators.</p>
<p><a name="curve_areaStart" href="#curve_areaStart">#</a> <i>curve</i>.<b>areaStart</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/step.js#L7">Source</a></p>
<p>Indicates the start of a new area segment. Each area segment consists of exactly two <a class="reference external" href="#curve_lineStart">line segments</a>: the topline, followed by the baseline, with the baseline points in reverse order.</p>
<p><a name="curve_areaEnd" href="#curve_areaEnd">#</a> <i>curve</i>.<b>areaEnd</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/step.js">Source</a></p>
<p>Indicates the end of the current area segment.</p>
<p><a name="curve_lineStart" href="#curve_lineStart">#</a> <i>curve</i>.<b>lineStart</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/step.js">Source</a></p>
<p>Indicates the start of a new line segment. Zero or more <a class="reference external" href="#curve_point">points</a> will follow.</p>
<p><a name="curve_lineEnd" href="#curve_lineEnd">#</a> <i>curve</i>.<b>lineEnd</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/step.js">Source</a></p>
<p>Indicates the end of the current line segment.</p>
<p><a name="curve_point" href="#curve_point">#</a> <i>curve</i>.<b>point</b>(<i>x</i>, <i>y</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/curve/step.js">Source</a></p>
<p>Indicates a new point in the current line segment with the given <em>x</em>- and <em>y</em>-values.</p>
</div>
<div class="section" id="links">
<h3>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://observablehq.com/&#64;d3/tidy-tree"><img alt="Tidy Tree" src="https://raw.githubusercontent.com/d3/d3-hierarchy/master/img/tree.png"></a></p>
<p>The <strong>link</strong> shape generates a smooth cubic Bézier curve from a source point to a target point. The tangents of the curve at the start and end are either <a class="reference external" href="#linkVertical">vertical</a>, <a class="reference external" href="#linkHorizontal">horizontal</a> or <a class="reference external" href="#linkRadial">radial</a>.</p>
<p><a name="linkVertical" href="#linkVertical">#</a> d3.<b>linkVertical</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/link/index.js">Source</a></p>
<p>Returns a new <a class="reference external" href="#_link">link generator</a> with vertical tangents. For example, to visualize <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/README.md#node_links">links</a> in a <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/README.md#tree">tree diagram</a> rooted on the top edge of the display, you might say:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">linkVertical</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">y</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span> <span class="p">});</span>
</pre></div>
</div>
<p><a name="linkHorizontal" href="#linkHorizontal">#</a> d3.<b>linkHorizontal</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/link/index.js">Source</a></p>
<p>Returns a new <a class="reference external" href="#_link">link generator</a> with horizontal tangents. For example, to visualize <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/README.md#node_links">links</a> in a <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/README.md#tree">tree diagram</a> rooted on the left edge of the display, you might say:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">linkHorizontal</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">y</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span> <span class="p">});</span>
</pre></div>
</div>
<p><a href="#_link" name="_link">#</a> <i>link</i>(<i>arguments…</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/link/index.js">Source</a></p>
<p>Generates a link for the given <em>arguments</em>. The <em>arguments</em> are arbitrary; they are simply propagated to the link generator’s accessor functions along with the <code class="docutils literal notranslate"><span class="pre">this</span></code> object. For example, with the default settings, an object expected:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">link</span><span class="p">({</span>
  <span class="nx">source</span><span class="o">:</span> <span class="p">[</span><span class="mf">100</span><span class="p">,</span> <span class="mf">100</span><span class="p">],</span>
  <span class="nx">target</span><span class="o">:</span> <span class="p">[</span><span class="mf">300</span><span class="p">,</span> <span class="mf">300</span><span class="p">]</span>
<span class="p">});</span>
</pre></div>
</div>
<p><a name="link_source" href="#link_source">#</a> <i>link</i>.<b>source</b>([<i>source</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/link/index.js">Source</a></p>
<p>If <em>source</em> is specified, sets the source accessor to the specified function and returns this link generator. If <em>source</em> is not specified, returns the current source accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">source</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a name="link_target" href="#link_target">#</a> <i>link</i>.<b>target</b>([<i>target</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/link/index.js">Source</a></p>
<p>If <em>target</em> is specified, sets the target accessor to the specified function and returns this link generator. If <em>target</em> is not specified, returns the current target accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">target</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a name="link_x" href="#link_x">#</a> <i>link</i>.<b>x</b>([<i>x</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/link/index.js">Source</a></p>
<p>If <em>x</em> is specified, sets the <em>x</em>-accessor to the specified function or number and returns this link generator. If <em>x</em> is not specified, returns the current <em>x</em>-accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">x</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a name="link_y" href="#link_y">#</a> <i>link</i>.<b>y</b>([<i>y</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/link/index.js">Source</a></p>
<p>If <em>y</em> is specified, sets the <em>y</em>-accessor to the specified function or number and returns this link generator. If <em>y</em> is not specified, returns the current <em>y</em>-accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">y</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">[</span><span class="mf">1</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a name="link_context" href="#link_context">#</a> <i>link</i>.<b>context</b>([<i>context</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/link/index.js">Source</a></p>
<p>If <em>context</em> is specified, sets the context and returns this link generator. If <em>context</em> is not specified, returns the current context, which defaults to null. If the context is not null, then the <a class="reference external" href="#_link">generated link</a> is rendered to this context as a sequence of <a class="reference external" href="http://www.w3.org/TR/2dcontext/#canvaspathmethods">path method</a> calls. Otherwise, a <a class="reference external" href="http://www.w3.org/TR/SVG/paths.html#PathData">path data</a> string representing the generated link is returned. See also <a class="reference external" href="https://github.com/d3/d3-path">d3-path</a>.</p>
<p><a name="linkRadial" href="#linkRadial">#</a> d3.<b>linkRadial</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/link/index.js">Source</a></p>
<p>Returns a new <a class="reference external" href="#_link">link generator</a> with radial tangents. For example, to visualize <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/README.md#node_links">links</a> in a <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/README.md#tree">tree diagram</a> rooted in the center of the display, you might say:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">linkRadial</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">angle</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">radius</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span> <span class="p">});</span>
</pre></div>
</div>
<p><a name="linkRadial_angle" href="#linkRadial_angle">#</a> <i>linkRadial</i>.<b>angle</b>([<i>angle</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/link/index.js">Source</a></p>
<p>Equivalent to <a class="reference external" href="#link_x"><em>link</em>.x</a>, except the accessor returns the angle in radians, with 0 at -<em>y</em> (12 o’clock).</p>
<p><a name="linkRadial_radius" href="#linkRadial_radius">#</a> <i>linkRadial</i>.<b>radius</b>([<i>radius</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/link/index.js">Source</a></p>
<p>Equivalent to <a class="reference external" href="#link_y"><em>link</em>.y</a>, except the accessor returns the radius: the distance from the origin ⟨0,0⟩.</p>
</div>
<div class="section" id="symbols">
<h3>Symbols<a class="headerlink" href="#symbols" title="Permalink to this headline">¶</a></h3>
<p><a href="#symbolCircle"><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/circle.png" width="100" height="100"></a><a href="#symbolCross"><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/cross.png" width="100" height="100"></a><a href="#symbolDiamond"><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/diamond.png" width="100" height="100"></a><a href="#symbolSquare"><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/square.png" width="100" height="100"></a><a href="#symbolStar"><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/star.png" width="100" height="100"></a><a href="#symbolTriangle"><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/triangle.png" width="100" height="100"><a href="#symbolWye"><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/wye.png" width="100" height="100"></a></p>
<p>Symbols provide a categorical shape encoding as is commonly used in scatterplots. Symbols are always centered at ⟨0,0⟩; use a transform (see: <a class="reference external" href="http://www.w3.org/TR/SVG/coords.html#TransformAttribute">SVG</a>, <a class="reference external" href="http://www.w3.org/TR/2dcontext/#transformations">Canvas</a>) to move the symbol to a different position.</p>
<p><a name="symbol" href="#symbol">#</a> d3.<b>symbol</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol.js">Source</a></p>
<p>Constructs a new symbol generator with the default settings.</p>
<p><a name="_symbol" href="#_symbol">#</a> <i>symbol</i>(<i>arguments</i>…) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol.js">Source</a></p>
<p>Generates a symbol for the given <em>arguments</em>. The <em>arguments</em> are arbitrary; they are simply propagated to the symbol generator’s accessor functions along with the <code class="docutils literal notranslate"><span class="pre">this</span></code> object. For example, with the default settings, no arguments are needed to produce a circle with area 64 square pixels. If the symbol generator has a <a class="reference external" href="#symbol_context">context</a>, then the symbol is rendered to this context as a sequence of <a class="reference external" href="http://www.w3.org/TR/2dcontext/#canvaspathmethods">path method</a> calls and this function returns void. Otherwise, a <a class="reference external" href="http://www.w3.org/TR/SVG/paths.html#PathData">path data</a> string is returned.</p>
<p><a name="symbol_type" href="#symbol_type">#</a> <i>symbol</i>.<b>type</b>([<i>type</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol.js">Source</a></p>
<p>If <em>type</em> is specified, sets the symbol type to the specified function or symbol type and returns this symbol generator. If <em>type</em> is a function, the symbol generator’s arguments and <em>this</em> are passed through. (See <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/README.md#selection_attr"><em>selection</em>.attr</a> if you are using d3-selection.) If <em>type</em> is not specified, returns the current symbol type accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">type</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">circle</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>See <a class="reference external" href="#symbols">symbols</a> for the set of built-in symbol types. To implement a custom symbol type, pass an object that implements <a class="reference external" href="#symbolType_draw"><em>symbolType</em>.draw</a>.</p>
<p><a name="symbol_size" href="#symbol_size">#</a> <i>symbol</i>.<b>size</b>([<i>size</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol.js">Source</a></p>
<p>If <em>size</em> is specified, sets the size to the specified function or number and returns this symbol generator. If <em>size</em> is a function, the symbol generator’s arguments and <em>this</em> are passed through. (See <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/README.md#selection_attr"><em>selection</em>.attr</a> if you are using d3-selection.) If <em>size</em> is not specified, returns the current size accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">size</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mf">64</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Specifying the size as a function is useful for constructing a scatterplot with a size encoding. If you wish to scale the symbol to fit a given bounding box, rather than by area, try <a class="reference external" href="https://observablehq.com/d/1fac2626b9e1b65f">SVG’s getBBox</a>.</p>
<p><a name="symbol_context" href="#symbol_context">#</a> <i>symbol</i>.<b>context</b>([<i>context</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol.js">Source</a></p>
<p>If <em>context</em> is specified, sets the context and returns this symbol generator. If <em>context</em> is not specified, returns the current context, which defaults to null. If the context is not null, then the <a class="reference external" href="#_symbol">generated symbol</a> is rendered to this context as a sequence of <a class="reference external" href="http://www.w3.org/TR/2dcontext/#canvaspathmethods">path method</a> calls. Otherwise, a <a class="reference external" href="http://www.w3.org/TR/SVG/paths.html#PathData">path data</a> string representing the generated symbol is returned.</p>
<p><a name="symbols" href="#symbols">#</a> d3.<b>symbols</b></p>
<p>An array containing the set of all built-in symbol types: <a class="reference external" href="#symbolCircle">circle</a>, <a class="reference external" href="#symbolCross">cross</a>, <a class="reference external" href="#symbolDiamond">diamond</a>, <a class="reference external" href="#symbolSquare">square</a>, <a class="reference external" href="#symbolStar">star</a>, <a class="reference external" href="#symbolTriangle">triangle</a>, and <a class="reference external" href="#symbolWye">wye</a>. Useful for constructing the range of an <a class="reference external" href="https://github.com/d3/d3-scale#ordinal-scales">ordinal scale</a> should you wish to use a shape encoding for categorical data.</p>
<p><a name="symbolCircle" href="#symbolCircle">#</a> d3.<b>symbolCircle</b> · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol/circle.js">Source</a></p>
<p>The circle symbol type.</p>
<p><a name="symbolCross" href="#symbolCross">#</a> d3.<b>symbolCross</b> · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol/cross.js">Source</a></p>
<p>The Greek cross symbol type, with arms of equal length.</p>
<p><a name="symbolDiamond" href="#symbolDiamond">#</a> d3.<b>symbolDiamond</b> · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol/diamond.js">Source</a></p>
<p>The rhombus symbol type.</p>
<p><a name="symbolSquare" href="#symbolSquare">#</a> d3.<b>symbolSquare</b> · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol/square.js">Source</a></p>
<p>The square symbol type.</p>
<p><a name="symbolStar" href="#symbolStar">#</a> d3.<b>symbolStar</b> · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol/star.js">Source</a></p>
<p>The pentagonal star (pentagram) symbol type.</p>
<p><a name="symbolTriangle" href="#symbolTriangle">#</a> d3.<b>symbolTriangle</b> · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol/triangle.js">Source</a></p>
<p>The up-pointing triangle symbol type.</p>
<p><a name="symbolWye" href="#symbolWye">#</a> d3.<b>symbolWye</b> · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/symbol/wye.js">Source</a></p>
<p>The Y-shape symbol type.</p>
<p><a name="pointRadial" href="#pointRadial">#</a> d3.<b>pointRadial</b>(<i>angle</i>, <i>radius</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/pointRadial.js">Source</a></p>
<p>Returns the point [<i>x</i>, <i>y</i>] for the given <em>angle</em> in radians, with 0 at -<em>y</em> (12 o’clock) and positive angles proceeding clockwise, and the given <em>radius</em>.</p>
</div>
<div class="section" id="custom-symbol-types">
<h3>Custom Symbol Types<a class="headerlink" href="#custom-symbol-types" title="Permalink to this headline">¶</a></h3>
<p>Symbol types are typically not used directly, instead being passed to <a class="reference external" href="#symbol_type"><em>symbol</em>.type</a>. However, you can define your own symbol type implementation should none of the built-in types satisfy your needs using the following interface. You can also use this low-level interface with a built-in symbol type as an alternative to the symbol generator.</p>
<p><a name="symbolType_draw" href="#symbolType_draw">#</a> <i>symbolType</i>.<b>draw</b>(<i>context</i>, <i>size</i>)</p>
<p>Renders this symbol type to the specified <em>context</em> with the specified <em>size</em> in square pixels. The <em>context</em> implements the <a class="reference external" href="http://www.w3.org/TR/2dcontext/#canvaspathmethods">CanvasPathMethods</a> interface. (Note that this is a subset of the CanvasRenderingContext2D interface!)</p>
</div>
<div class="section" id="stacks">
<h3>Stacks<a class="headerlink" href="#stacks" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://observablehq.com/&#64;d3/stacked-bar-chart"><img alt="Stacked Bar Chart" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/stacked-bar.png" width="295" height="154"></a><a class="reference external" href="https://observablehq.com/&#64;mbostock/streamgraph-transitions"><img alt="Streamgraph" src="https://raw.githubusercontent.com/d3/d3-shape/master/img/stacked-stream.png" width="295" height="154"></a></p>
<p>Some shape types can be stacked, placing one shape adjacent to another. For example, a bar chart of monthly sales might be broken down into a multi-series bar chart by product category, stacking bars vertically. This is equivalent to subdividing a bar chart by an ordinal dimension (such as product category) and applying a color encoding.</p>
<p>Stacked charts can show overall value and per-category value simultaneously; however, it is typically harder to compare across categories, as only the bottom layer of the stack is aligned. So, chose the <a class="reference external" href="#stack_order">stack order</a> carefully, and consider a <a class="reference external" href="#stackOffsetWiggle">streamgraph</a>. (See also <a class="reference external" href="https://observablehq.com/&#64;d3/grouped-bar-chart">grouped charts</a>.)</p>
<p>Like the <a class="reference external" href="#pies">pie generator</a>, the stack generator does not produce a shape directly. Instead it computes positions which you can then pass to an <a class="reference external" href="#areas">area generator</a> or use directly, say to position bars.</p>
<p><a name="stack" href="#stack">#</a> d3.<b>stack</b>() · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/stack.js">Source</a></p>
<p>Constructs a new stack generator with the default settings.</p>
<p><a name="_stack" href="#_stack">#</a> <i>stack</i>(<i>data</i>[, <i>arguments…</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/stack.js">Source</a></p>
<p>Generates a stack for the given array of <em>data</em>, returning an array representing each series. Any additional <em>arguments</em> are arbitrary; they are simply propagated to accessors along with the <code class="docutils literal notranslate"><span class="pre">this</span></code> object.</p>
<p>The series are determined by the <a class="reference external" href="#stack_keys">keys accessor</a>; each series <em>i</em> in the returned array corresponds to the <em>i</em>th key. Each series is an array of points, where each point <em>j</em> corresponds to the <em>j</em>th element in the input <em>data</em>. Lastly, each point is represented as an array [<em>y0</em>, <em>y1</em>] where <em>y0</em> is the lower value (baseline) and <em>y1</em> is the upper value (topline); the difference between <em>y0</em> and <em>y1</em> corresponds to the computed <a class="reference external" href="#stack_value">value</a> for this point. The key for each series is available as <em>series</em>.key, and the <a class="reference external" href="#stack_order">index</a> as <em>series</em>.index. The input data element for each point is available as <em>point</em>.data.</p>
<p>For example, consider the following table representing monthly sales of fruits:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Month</p></th>
<th class="head"><p>Apples</p></th>
<th class="head"><p>Bananas</p></th>
<th class="head"><p>Cherries</p></th>
<th class="head"><p>Dates</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1/2015</p></td>
<td><p>3840</p></td>
<td><p>1920</p></td>
<td><p>960</p></td>
<td><p>400</p></td>
</tr>
<tr class="row-odd"><td><p>2/2015</p></td>
<td><p>1600</p></td>
<td><p>1440</p></td>
<td><p>960</p></td>
<td><p>400</p></td>
</tr>
<tr class="row-even"><td><p>3/2015</p></td>
<td><p>640</p></td>
<td><p>960</p></td>
<td><p>640</p></td>
<td><p>400</p></td>
</tr>
<tr class="row-odd"><td><p>4/2015</p></td>
<td><p>320</p></td>
<td><p>480</p></td>
<td><p>640</p></td>
<td><p>400</p></td>
</tr>
</tbody>
</table>
<p>This might be represented in JavaScript as an array of objects:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="nx">month</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mf">2015</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">1</span><span class="p">),</span> <span class="nx">apples</span><span class="o">:</span> <span class="mf">3840</span><span class="p">,</span> <span class="nx">bananas</span><span class="o">:</span> <span class="mf">1920</span><span class="p">,</span> <span class="nx">cherries</span><span class="o">:</span> <span class="mf">960</span><span class="p">,</span> <span class="nx">dates</span><span class="o">:</span> <span class="mf">400</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">month</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mf">2015</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">1</span><span class="p">),</span> <span class="nx">apples</span><span class="o">:</span> <span class="mf">1600</span><span class="p">,</span> <span class="nx">bananas</span><span class="o">:</span> <span class="mf">1440</span><span class="p">,</span> <span class="nx">cherries</span><span class="o">:</span> <span class="mf">960</span><span class="p">,</span> <span class="nx">dates</span><span class="o">:</span> <span class="mf">400</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">month</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mf">2015</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">1</span><span class="p">),</span> <span class="nx">apples</span><span class="o">:</span>  <span class="mf">640</span><span class="p">,</span> <span class="nx">bananas</span><span class="o">:</span>  <span class="mf">960</span><span class="p">,</span> <span class="nx">cherries</span><span class="o">:</span> <span class="mf">640</span><span class="p">,</span> <span class="nx">dates</span><span class="o">:</span> <span class="mf">400</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">month</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mf">2015</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">1</span><span class="p">),</span> <span class="nx">apples</span><span class="o">:</span>  <span class="mf">320</span><span class="p">,</span> <span class="nx">bananas</span><span class="o">:</span>  <span class="mf">480</span><span class="p">,</span> <span class="nx">cherries</span><span class="o">:</span> <span class="mf">640</span><span class="p">,</span> <span class="nx">dates</span><span class="o">:</span> <span class="mf">400</span><span class="p">}</span>
<span class="p">];</span>
</pre></div>
</div>
<p>To produce a stack for this data:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">stack</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">stack</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">keys</span><span class="p">([</span><span class="s2">&quot;apples&quot;</span><span class="p">,</span> <span class="s2">&quot;bananas&quot;</span><span class="p">,</span> <span class="s2">&quot;cherries&quot;</span><span class="p">,</span> <span class="s2">&quot;dates&quot;</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">order</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">stackOrderNone</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">offset</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">stackOffsetNone</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">series</span> <span class="o">=</span> <span class="nx">stack</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</pre></div>
</div>
<p>The resulting array has one element per <em>series</em>. Each series has one point per month, and each point has a lower and upper value defining the baseline and topline:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[[</span>   <span class="mf">0</span><span class="p">,</span> <span class="mf">3840</span><span class="p">],</span> <span class="p">[</span>   <span class="mf">0</span><span class="p">,</span> <span class="mf">1600</span><span class="p">],</span> <span class="p">[</span>   <span class="mf">0</span><span class="p">,</span>  <span class="mf">640</span><span class="p">],</span> <span class="p">[</span>   <span class="mf">0</span><span class="p">,</span>  <span class="mf">320</span><span class="p">]],</span> <span class="c1">// apples</span>
  <span class="p">[[</span><span class="mf">3840</span><span class="p">,</span> <span class="mf">5760</span><span class="p">],</span> <span class="p">[</span><span class="mf">1600</span><span class="p">,</span> <span class="mf">3040</span><span class="p">],</span> <span class="p">[</span> <span class="mf">640</span><span class="p">,</span> <span class="mf">1600</span><span class="p">],</span> <span class="p">[</span> <span class="mf">320</span><span class="p">,</span>  <span class="mf">800</span><span class="p">]],</span> <span class="c1">// bananas</span>
  <span class="p">[[</span><span class="mf">5760</span><span class="p">,</span> <span class="mf">6720</span><span class="p">],</span> <span class="p">[</span><span class="mf">3040</span><span class="p">,</span> <span class="mf">4000</span><span class="p">],</span> <span class="p">[</span><span class="mf">1600</span><span class="p">,</span> <span class="mf">2240</span><span class="p">],</span> <span class="p">[</span> <span class="mf">800</span><span class="p">,</span> <span class="mf">1440</span><span class="p">]],</span> <span class="c1">// cherries</span>
  <span class="p">[[</span><span class="mf">6720</span><span class="p">,</span> <span class="mf">7120</span><span class="p">],</span> <span class="p">[</span><span class="mf">4000</span><span class="p">,</span> <span class="mf">4400</span><span class="p">],</span> <span class="p">[</span><span class="mf">2240</span><span class="p">,</span> <span class="mf">2640</span><span class="p">],</span> <span class="p">[</span><span class="mf">1440</span><span class="p">,</span> <span class="mf">1840</span><span class="p">]],</span> <span class="c1">// dates</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Each series in then typically passed to an <a class="reference external" href="#areas">area generator</a> to render an area chart, or used to construct rectangles for a bar chart.</p>
<p><a name="stack_keys" href="#stack_keys">#</a> <i>stack</i>.<b>keys</b>([<i>keys</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/stack.js">Source</a></p>
<p>If <em>keys</em> is specified, sets the keys accessor to the specified function or array and returns this stack generator. If <em>keys</em> is not specified, returns the current keys accessor, which defaults to the empty array. A series (layer) is <a class="reference external" href="#_stack">generated</a> for each key. Keys are typically strings, but they may be arbitrary values. The series’ key is passed to the <a class="reference external" href="#stack_value">value accessor</a>, along with each data point, to compute the point’s value.</p>
<p><a name="stack_value" href="#stack_value">#</a> <i>stack</i>.<b>value</b>([<i>value</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/stack.js">Source</a></p>
<p>If <em>value</em> is specified, sets the value accessor to the specified function or number and returns this stack generator. If <em>value</em> is not specified, returns the current value accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">value</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Thus, by default the stack generator assumes that the input data is an array of objects, with each object exposing named properties with numeric values; see <a class="reference external" href="#_stack"><em>stack</em></a> for an example.</p>
<p><a name="stack_order" href="#stack_order">#</a> <i>stack</i>.<b>order</b>([<i>order</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/stack.js">Source</a></p>
<p>If <em>order</em> is specified, sets the order accessor to the specified function or array and returns this stack generator. If <em>order</em> is not specified, returns the current order acccesor, which defaults to <a class="reference external" href="#stackOrderNone">stackOrderNone</a>; this uses the order given by the <a class="reference external" href="#stack_key">key accessor</a>. See <a class="reference external" href="#stack-orders">stack orders</a> for the built-in orders.</p>
<p>If <em>order</em> is a function, it is passed the generated series array and must return an array of numeric indexes representing the stack order. For example, the default order is defined as:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">orderNone</span><span class="p">(</span><span class="nx">series</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">series</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span>
  <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="nx">n</span> <span class="o">&gt;=</span> <span class="mf">0</span><span class="p">)</span> <span class="nx">o</span><span class="p">[</span><span class="nx">n</span><span class="p">]</span> <span class="o">=</span> <span class="nx">n</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The stack order is computed prior to the <a class="reference external" href="#stack_offset">offset</a>; thus, the lower value for all points is zero at the time the order is computed. The index attribute for each series is also not set until after the order is computed.</p>
<p><a name="stack_offset" href="#stack_offset">#</a> <i>stack</i>.<b>offset</b>([<i>offset</i>]) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/stack.js">Source</a></p>
<p>If <em>offset</em> is specified, sets the offset accessor to the specified function or array and returns this stack generator. If <em>offset</em> is not specified, returns the current offset acccesor, which defaults to <a class="reference external" href="#stackOffsetNone">stackOffsetNone</a>; this uses a zero baseline. See <a class="reference external" href="#stack-offsets">stack offsets</a> for the built-in offsets.</p>
<p>If <em>offset</em> is a function, it is passed the generated series array and the order index array. The offset function is then responsible for updating the lower and upper values in the series array to layout the stack. For example, the default offset is defined as:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">offsetNone</span><span class="p">(</span><span class="nx">series</span><span class="p">,</span> <span class="nx">order</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">((</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">series</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">1</span><span class="p">,</span> <span class="nx">s0</span><span class="p">,</span> <span class="nx">s1</span> <span class="o">=</span> <span class="nx">series</span><span class="p">[</span><span class="nx">order</span><span class="p">[</span><span class="mf">0</span><span class="p">]],</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">s1</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">s0</span> <span class="o">=</span> <span class="nx">s1</span><span class="p">,</span> <span class="nx">s1</span> <span class="o">=</span> <span class="nx">series</span><span class="p">[</span><span class="nx">order</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">s1</span><span class="p">[</span><span class="nx">j</span><span class="p">][</span><span class="mf">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">s1</span><span class="p">[</span><span class="nx">j</span><span class="p">][</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">s0</span><span class="p">[</span><span class="nx">j</span><span class="p">][</span><span class="mf">1</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="stack-orders">
<h3>Stack Orders<a class="headerlink" href="#stack-orders" title="Permalink to this headline">¶</a></h3>
<p>Stack orders are typically not used directly, but are instead passed to <a class="reference external" href="#stack_order"><em>stack</em>.order</a>.</p>
<p><a name="stackOrderAppearance" href="#stackOrderAppearance">#</a> d3.<b>stackOrderAppearance</b>(<i>series</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/order/appearance.js">Source</a></p>
<p>Returns a series order such that the earliest series (according to the maximum value) is at the bottom.</p>
<p><a name="stackOrderAscending" href="#stackOrderAscending">#</a> d3.<b>stackOrderAscending</b>(<i>series</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/order/ascending.js">Source</a></p>
<p>Returns a series order such that the smallest series (according to the sum of values) is at the bottom.</p>
<p><a name="stackOrderDescending" href="#stackOrderDescending">#</a> d3.<b>stackOrderDescending</b>(<i>series</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/order/descending.js">Source</a></p>
<p>Returns a series order such that the largest series (according to the sum of values) is at the bottom.</p>
<p><a name="stackOrderInsideOut" href="#stackOrderInsideOut">#</a> d3.<b>stackOrderInsideOut</b>(<i>series</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/order/insideOut.js">Source</a></p>
<p>Returns a series order such that the earliest series (according to the maximum value) are on the inside and the later series are on the outside. This order is recommended for streamgraphs in conjunction with the <a class="reference external" href="#stackOffsetWiggle">wiggle offset</a>. See <a class="reference external" href="http://leebyron.com/streamgraph/">Stacked Graphs—Geometry &amp; Aesthetics</a> by Byron &amp; Wattenberg for more information.</p>
<p><a name="stackOrderNone" href="#stackOrderNone">#</a> d3.<b>stackOrderNone</b>(<i>series</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/order/none.js">Source</a></p>
<p>Returns the given series order [0, 1, … <em>n</em> - 1] where <em>n</em> is the number of elements in <em>series</em>. Thus, the stack order is given by the <a class="reference external" href="#stack_keys">key accessor</a>.</p>
<p><a name="stackOrderReverse" href="#stackOrderReverse">#</a> d3.<b>stackOrderReverse</b>(<i>series</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/order/reverse.js">Source</a></p>
<p>Returns the reverse of the given series order [<em>n</em> - 1, <em>n</em> - 2, … 0] where <em>n</em> is the number of elements in <em>series</em>. Thus, the stack order is given by the reverse of the <a class="reference external" href="#stack_keys">key accessor</a>.</p>
</div>
<div class="section" id="stack-offsets">
<h3>Stack Offsets<a class="headerlink" href="#stack-offsets" title="Permalink to this headline">¶</a></h3>
<p>Stack offsets are typically not used directly, but are instead passed to <a class="reference external" href="#stack_offset"><em>stack</em>.offset</a>.</p>
<p><a name="stackOffsetExpand" href="#stackOffsetExpand">#</a> d3.<b>stackOffsetExpand</b>(<i>series</i>, <i>order</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/offset/expand.js">Source</a></p>
<p>Applies a zero baseline and normalizes the values for each point such that the topline is always one.</p>
<p><a name="stackOffsetDiverging" href="#stackOffsetDiverging">#</a> d3.<b>stackOffsetDiverging</b>(<i>series</i>, <i>order</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/offset/diverging.js">Source</a></p>
<p>Positive values are stacked above zero, negative values are <a class="reference external" href="https://bl.ocks.org/mbostock/b5935342c6d21928111928401e2c8608">stacked below zero</a>, and zero values are stacked at zero.</p>
<p><a name="stackOffsetNone" href="#stackOffsetNone">#</a> d3.<b>stackOffsetNone</b>(<i>series</i>, <i>order</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/offset/none.js">Source</a></p>
<p>Applies a zero baseline.</p>
<p><a name="stackOffsetSilhouette" href="#stackOffsetSilhouette">#</a> d3.<b>stackOffsetSilhouette</b>(<i>series</i>, <i>order</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/offset/silhouette.js">Source</a></p>
<p>Shifts the baseline down such that the center of the streamgraph is always at zero.</p>
<p><a name="stackOffsetWiggle" href="#stackOffsetWiggle">#</a> d3.<b>stackOffsetWiggle</b>(<i>series</i>, <i>order</i>) · <a class="reference external" href="https://github.com/d3/d3-shape/blob/master/src/offset/wiggle.js">Source</a></p>
<p>Shifts the baseline so as to minimize the weighted wiggle of layers. This offset is recommended for streamgraphs in conjunction with the <a class="reference external" href="#stackOrderInsideOut">inside-out order</a>. See <a class="reference external" href="http://leebyron.com/streamgraph/">Stacked Graphs—Geometry &amp; Aesthetics</a> by Bryon &amp; Wattenberg for more information.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AyrtonB/ESDA-Spatial",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-d3-shape-1.3.7-df63801be07bc986bc54f63789b4fe502992b5d7-integrity/node_modules/d3-shape"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ayrton Bourn, Santiago De La Fuente, Clem Attwood, Joanna Kuleszo, Camilo Perico<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../../../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>