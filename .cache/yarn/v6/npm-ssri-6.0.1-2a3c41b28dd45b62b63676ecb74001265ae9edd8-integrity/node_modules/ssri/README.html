
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ssri &#8212; Spatial Analysis for Energy</title>
    
  <link rel="stylesheet" href="../../../../../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  <img src="../../../../../../_static/logo.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Spatial Analysis for Energy</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Intro.html">
   UCL Energy Systems &amp; Data Analytics - Spatial Module
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/03-Working-with-Vector-Data.html">
   Working with Vector Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/04-Working-with-Raster-Data.html">
   Working with Raster Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Extensions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../extensions/01-Mapping-with-ggplot.html">
   Mapping with ggplot
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Setup.html">
   Set-Up Instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Jupyter-Anaconda.html">
   What is Jupyter/Anaconda?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/ESDA%20Course.html">
   ESDA Course
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-ssri-6.0.1-2a3c41b28dd45b62b63676ecb74001265ae9edd8-integrity/node_modules/ssri/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install">
   Install
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#table-of-contents">
   Table of Contents
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example">
     Example
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#features">
     Features
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#contributing">
     Contributing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#api">
     API
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-parse-a-ssri-parse-sri-opts-integrity">
       <a name="parse">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         ssri.parse(sri,
        </span>
        <span class="pre">
         [opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         Integrity
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id1">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-stringify-a-ssri-stringify-sri-opts-string">
       <a name="stringify">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         ssri.stringify(sri,
        </span>
        <span class="pre">
         [opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         String
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id2">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-integrity-concat-a-integrity-concat-otherintegrity-opts-integrity">
       <a name="integrity-concat">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         Integrity#concat(otherIntegrity,
        </span>
        <span class="pre">
         [opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         Integrity
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id3">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-integrity-to-string-a-integrity-tostring-opts-string">
       <a name="integrity-to-string">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         Integrity#toString([opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         String
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id4">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-integrity-to-json-a-integrity-tojson-string">
       <a name="integrity-to-json">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         Integrity#toJSON()
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         String
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id5">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-integrity-match-a-integrity-match-sri-opts-hash-false">
       <a name="integrity-match">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         Integrity#match(sri,
        </span>
        <span class="pre">
         [opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         Hash
        </span>
        <span class="pre">
         |
        </span>
        <span class="pre">
         false
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id6">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-integrity-pick-algorithm-a-integrity-pickalgorithm-opts-string">
       <a name="integrity-pick-algorithm">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         Integrity#pickAlgorithm([opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         String
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id7">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-integrity-hex-digest-a-integrity-hexdigest-string">
       <a name="integrity-hex-digest">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         Integrity#hexDigest()
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         String
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id8">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-from-hex-a-ssri-fromhex-hexdigest-algorithm-opts-integrity">
       <a name="from-hex">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         ssri.fromHex(hexDigest,
        </span>
        <span class="pre">
         algorithm,
        </span>
        <span class="pre">
         [opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         Integrity
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id9">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-from-data-a-ssri-fromdata-data-opts-integrity">
       <a name="from-data">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         ssri.fromData(data,
        </span>
        <span class="pre">
         [opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         Integrity
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id10">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-from-stream-a-ssri-fromstream-stream-opts-promise-integrity">
       <a name="from-stream">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         ssri.fromStream(stream,
        </span>
        <span class="pre">
         [opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         Promise&lt;Integrity&gt;
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id11">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-create-a-ssri-create-opts-hash">
       <a name="create">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         ssri.create([opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         &lt;Hash&gt;
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id12">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-check-data-a-ssri-checkdata-data-sri-opts-hash-false">
       <a name="check-data">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         ssri.checkData(data,
        </span>
        <span class="pre">
         sri,
        </span>
        <span class="pre">
         [opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         Hash|false
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id13">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-check-stream-a-ssri-checkstream-stream-sri-opts-promise-hash">
       <a name="check-stream">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         ssri.checkStream(stream,
        </span>
        <span class="pre">
         sri,
        </span>
        <span class="pre">
         [opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         Promise&lt;Hash&gt;
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id14">
         Example
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-name-integrity-stream-a-integritystream-opts-integritystream">
       <a name="integrity-stream">
       </a>
       <code class="docutils literal notranslate">
        <span class="pre">
         &gt;
        </span>
        <span class="pre">
         integrityStream([opts])
        </span>
        <span class="pre">
         -&gt;
        </span>
        <span class="pre">
         IntegrityStream
        </span>
       </code>
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id15">
         Example
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="ssri-npm-version-license-travis-appveyor-coverage-status">
<h1>ssri <a class="reference external" href="https://npm.im/ssri"><img alt="npm version" src="https://img.shields.io/npm/v/ssri.svg" /></a> <a class="reference external" href="https://npm.im/ssri"><img alt="license" src="https://img.shields.io/npm/l/ssri.svg" /></a> <a class="reference external" href="https://travis-ci.org/zkat/ssri"><img alt="Travis" src="https://img.shields.io/travis/zkat/ssri.svg" /></a> <a class="reference external" href="https://ci.appveyor.com/project/zkat/ssri"><img alt="AppVeyor" src="https://ci.appveyor.com/api/projects/status/github/zkat/ssri?svg=true" /></a> <a class="reference external" href="https://coveralls.io/github/zkat/ssri?branch=latest"><img alt="Coverage Status" src="https://coveralls.io/repos/github/zkat/ssri/badge.svg?branch=latest" /></a><a class="headerlink" href="#ssri-npm-version-license-travis-appveyor-coverage-status" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/zkat/ssri"><code class="docutils literal notranslate"><span class="pre">ssri</span></code></a>, short for Standard Subresource
Integrity, is a Node.js utility for parsing, manipulating, serializing,
generating, and verifying <a class="reference external" href="https://w3c.github.io/webappsec/specs/subresourceintegrity/">Subresource
Integrity</a> hashes.</p>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">npm</span> <span class="pre">install</span> <span class="pre">--save</span> <span class="pre">ssri</span></code></p>
</div>
<div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#example">Example</a></p></li>
<li><p><a class="reference external" href="#features">Features</a></p></li>
<li><p><a class="reference external" href="#contributing">Contributing</a></p></li>
<li><p><a class="reference external" href="#api">API</a></p>
<ul>
<li><p>Parsing &amp; Serializing</p>
<ul>
<li><p><a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">parse</span></code></a></p></li>
<li><p><a class="reference external" href="#stringify"><code class="docutils literal notranslate"><span class="pre">stringify</span></code></a></p></li>
<li><p><a class="reference external" href="#integrity-concat"><code class="docutils literal notranslate"><span class="pre">Integrity#concat</span></code></a></p></li>
<li><p><a class="reference external" href="#integrity-to-string"><code class="docutils literal notranslate"><span class="pre">Integrity#toString</span></code></a></p></li>
<li><p><a class="reference external" href="#integrity-to-json"><code class="docutils literal notranslate"><span class="pre">Integrity#toJSON</span></code></a></p></li>
<li><p><a class="reference external" href="#integrity-match"><code class="docutils literal notranslate"><span class="pre">Integrity#match</span></code></a></p></li>
<li><p><a class="reference external" href="#integrity-pick-algorithm"><code class="docutils literal notranslate"><span class="pre">Integrity#pickAlgorithm</span></code></a></p></li>
<li><p><a class="reference external" href="#integrity-hex-digest"><code class="docutils literal notranslate"><span class="pre">Integrity#hexDigest</span></code></a></p></li>
</ul>
</li>
<li><p>Integrity Generation</p>
<ul>
<li><p><a class="reference external" href="#from-hex"><code class="docutils literal notranslate"><span class="pre">fromHex</span></code></a></p></li>
<li><p><a class="reference external" href="#from-data"><code class="docutils literal notranslate"><span class="pre">fromData</span></code></a></p></li>
<li><p><a class="reference external" href="#from-stream"><code class="docutils literal notranslate"><span class="pre">fromStream</span></code></a></p></li>
<li><p><a class="reference external" href="#create"><code class="docutils literal notranslate"><span class="pre">create</span></code></a></p></li>
</ul>
</li>
<li><p>Integrity Verification</p>
<ul>
<li><p><a class="reference external" href="#check-data"><code class="docutils literal notranslate"><span class="pre">checkData</span></code></a></p></li>
<li><p><a class="reference external" href="#check-stream"><code class="docutils literal notranslate"><span class="pre">checkStream</span></code></a></p></li>
<li><p><a class="reference external" href="#integrity-stream"><code class="docutils literal notranslate"><span class="pre">integrityStream</span></code></a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">ssri</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;ssri&#39;</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">integrity</span> <span class="o">=</span> <span class="s1">&#39;sha512-9KhgCRIx/AmzC8xqYJTZRrnO8OW2Pxyl2DIMZSBOr0oDvtEFyht3xpp71j/r/pAe1DM+JI/A+line3jUBgzQ7A==?foo&#39;</span>

<span class="c1">// Parsing and serializing</span>
<span class="kr">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">ssri</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">integrity</span><span class="p">)</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">parsed</span><span class="p">)</span> <span class="c1">// === integrity (works on non-Integrity objects)</span>
<span class="nx">parsed</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// === integrity</span>

<span class="c1">// Async stream functions</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">checkStream</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;./my-file&#39;</span><span class="p">),</span> <span class="nx">integrity</span><span class="p">).</span><span class="nx">then</span><span class="p">(...)</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">fromStream</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;./my-file&#39;</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="nx">sri</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">sri</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">===</span> <span class="nx">integrity</span>
<span class="p">})</span>
<span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;./my-file&#39;</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">ssri</span><span class="p">.</span><span class="nx">createCheckerStream</span><span class="p">(</span><span class="nx">sri</span><span class="p">))</span>

<span class="c1">// Sync data functions</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">fromData</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;./my-file&#39;</span><span class="p">))</span> <span class="c1">// === parsed</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">checkData</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;./my-file&#39;</span><span class="p">),</span> <span class="nx">integrity</span><span class="p">)</span> <span class="c1">// =&gt; &#39;sha512&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Parses and stringifies SRI strings.</p></li>
<li><p>Generates SRI strings from raw data or Streams.</p></li>
<li><p>Strict standard compliance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">?foo</span></code> metadata option support.</p></li>
<li><p>Multiple entries for the same algorithm.</p></li>
<li><p>Object-based integrity hash manipulation.</p></li>
<li><p>Small footprint: no dependencies, concise implementation.</p></li>
<li><p>Full test coverage.</p></li>
<li><p>Customizable algorithm picker.</p></li>
</ul>
</div>
<div class="section" id="contributing">
<h3>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h3>
<p>The ssri team enthusiastically welcomes contributions and project participation!
There’s a bunch of things you can do if you want to contribute! The <span class="xref myst">Contributor
Guide</span> has all the information you need for everything from
reporting bugs to contributing entire new features. Please don’t hesitate to
jump in if you’d like to, or even ask us questions if something isn’t clear.</p>
</div>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<div class="section" id="a-name-parse-a-ssri-parse-sri-opts-integrity">
<h4><a name="parse"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">ssri.parse(sri,</span> <span class="pre">[opts])</span> <span class="pre">-&gt;</span> <span class="pre">Integrity</span></code><a class="headerlink" href="#a-name-parse-a-ssri-parse-sri-opts-integrity" title="Permalink to this headline">¶</a></h4>
<p>Parses <code class="docutils literal notranslate"><span class="pre">sri</span></code> into an <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> data structure. <code class="docutils literal notranslate"><span class="pre">sri</span></code> can be an integrity
string, an <code class="docutils literal notranslate"><span class="pre">Hash</span></code>-like with <code class="docutils literal notranslate"><span class="pre">digest</span></code> and <code class="docutils literal notranslate"><span class="pre">algorithm</span></code> fields and an optional
<code class="docutils literal notranslate"><span class="pre">options</span></code> field, or an <code class="docutils literal notranslate"><span class="pre">Integrity</span></code>-like object. The resulting object will be an
<code class="docutils literal notranslate"><span class="pre">Integrity</span></code> instance that has this shape:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s1">&#39;sha1&#39;</span><span class="o">:</span> <span class="p">[{</span><span class="nx">algorithm</span><span class="o">:</span> <span class="s1">&#39;sha1&#39;</span><span class="p">,</span> <span class="nx">digest</span><span class="o">:</span> <span class="s1">&#39;deadbeef&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="o">:</span> <span class="p">[]}],</span>
  <span class="s1">&#39;sha512&#39;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">algorithm</span><span class="o">:</span> <span class="s1">&#39;sha512&#39;</span><span class="p">,</span> <span class="nx">digest</span><span class="o">:</span> <span class="s1">&#39;c0ffee&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="o">:</span> <span class="p">[]},</span>
    <span class="p">{</span><span class="nx">algorithm</span><span class="o">:</span> <span class="s1">&#39;sha512&#39;</span><span class="p">,</span> <span class="nx">digest</span><span class="o">:</span> <span class="s1">&#39;bad1dea&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]}</span>
  <span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.single</span></code> is truthy, a single <code class="docutils literal notranslate"><span class="pre">Hash</span></code> object will be returned. That is, a
single object that looks like <code class="docutils literal notranslate"><span class="pre">{algorithm,</span> <span class="pre">digest,</span> <span class="pre">options}</span></code>, as opposed to a
larger object with multiple of these.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.strict</span></code> is truthy, the resulting object will be filtered such that
it strictly follows the Subresource Integrity spec, throwing away any entries
with any invalid components. This also means a restricted set of algorithms
will be used – the spec limits them to <code class="docutils literal notranslate"><span class="pre">sha256</span></code>, <code class="docutils literal notranslate"><span class="pre">sha384</span></code>, and <code class="docutils literal notranslate"><span class="pre">sha512</span></code>.</p>
<p>Strict mode is recommended if the integrity strings are intended for use in
browsers, or in other situations where strict adherence to the spec is needed.</p>
<div class="section" id="id1">
<h5>Example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">ssri</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s1">&#39;sha512-9KhgCRIx/AmzC8xqYJTZRrnO8OW2Pxyl2DIMZSBOr0oDvtEFyht3xpp71j/r/pAe1DM+JI/A+line3jUBgzQ7A==?foo&#39;</span><span class="p">)</span> <span class="c1">// -&gt; Integrity object</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-stringify-a-ssri-stringify-sri-opts-string">
<h4><a name="stringify"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">ssri.stringify(sri,</span> <span class="pre">[opts])</span> <span class="pre">-&gt;</span> <span class="pre">String</span></code><a class="headerlink" href="#a-name-stringify-a-ssri-stringify-sri-opts-string" title="Permalink to this headline">¶</a></h4>
<p>This function is identical to <a class="reference external" href="#integrity-to-string"><code class="docutils literal notranslate"><span class="pre">Integrity#toString()</span></code></a>,
except it can be used on <em>any</em> object that <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">parse</span></code></a> can handle – that
is, a string, an <code class="docutils literal notranslate"><span class="pre">Hash</span></code>-like, or an <code class="docutils literal notranslate"><span class="pre">Integrity</span></code>-like.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">opts.sep</span></code> option defines the string to use when joining multiple entries
together. To be spec-compliant, this <em>must</em> be whitespace. The default is a
single space (<code class="docutils literal notranslate"><span class="pre">'</span> <span class="pre">'</span></code>).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.strict</span></code> is true, the integrity string will be created using strict
parsing rules. See <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">ssri.parse</span></code></a>.</p>
<div class="section" id="id2">
<h5>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Useful for cleaning up input SRI strings:</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="s1">&#39;\n\rsha512-foo\n\t\tsha384-bar&#39;</span><span class="p">)</span>
<span class="c1">// -&gt; &#39;sha512-foo sha384-bar&#39;</span>

<span class="c1">// Hash-like: only a single entry.</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="nx">algorithm</span><span class="o">:</span> <span class="s1">&#39;sha512&#39;</span><span class="p">,</span>
  <span class="nx">digest</span><span class="o">:</span><span class="s1">&#39;9KhgCRIx/AmzC8xqYJTZRrnO8OW2Pxyl2DIMZSBOr0oDvtEFyht3xpp71j/r/pAe1DM+JI/A+line3jUBgzQ7A==&#39;</span><span class="p">,</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="c1">// -&gt;</span>
<span class="c1">// &#39;sha512-9KhgCRIx/AmzC8xqYJTZRrnO8OW2Pxyl2DIMZSBOr0oDvtEFyht3xpp71j/r/pAe1DM+JI/A+line3jUBgzQ7A==?foo&#39;</span>

<span class="c1">// Integrity-like: full multi-entry syntax. Similar to output of `ssri.parse`</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="s1">&#39;sha512&#39;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">algorithm</span><span class="o">:</span> <span class="s1">&#39;sha512&#39;</span><span class="p">,</span>
      <span class="nx">digest</span><span class="o">:</span><span class="s1">&#39;9KhgCRIx/AmzC8xqYJTZRrnO8OW2Pxyl2DIMZSBOr0oDvtEFyht3xpp71j/r/pAe1DM+JI/A+line3jUBgzQ7A==&#39;</span><span class="p">,</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="c1">// -&gt;</span>
<span class="c1">// &#39;sha512-9KhgCRIx/AmzC8xqYJTZRrnO8OW2Pxyl2DIMZSBOr0oDvtEFyht3xpp71j/r/pAe1DM+JI/A+line3jUBgzQ7A==?foo&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-integrity-concat-a-integrity-concat-otherintegrity-opts-integrity">
<h4><a name="integrity-concat"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">Integrity#concat(otherIntegrity,</span> <span class="pre">[opts])</span> <span class="pre">-&gt;</span> <span class="pre">Integrity</span></code><a class="headerlink" href="#a-name-integrity-concat-a-integrity-concat-otherintegrity-opts-integrity" title="Permalink to this headline">¶</a></h4>
<p>Concatenates an <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> object with another IntegrityLike, or an integrity
string.</p>
<p>This is functionally equivalent to concatenating the string format of both
integrity arguments, and calling <a class="reference external" href="#ssri-parse"><code class="docutils literal notranslate"><span class="pre">ssri.parse</span></code></a> on the new string.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.strict</span></code> is true, the new <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> will be created using strict
parsing rules. See <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">ssri.parse</span></code></a>.</p>
<div class="section" id="id3">
<h5>Example<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// This will combine the integrity checks for two different versions of</span>
<span class="c1">// your index.js file so you can use a single integrity string and serve</span>
<span class="c1">// either of these to clients, from a single `&lt;script&gt;` tag.</span>
<span class="kr">const</span> <span class="nx">desktopIntegrity</span> <span class="o">=</span> <span class="nx">ssri</span><span class="p">.</span><span class="nx">fromData</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;./index.desktop.js&#39;</span><span class="p">))</span>
<span class="kr">const</span> <span class="nx">mobileIntegrity</span> <span class="o">=</span> <span class="nx">ssri</span><span class="p">.</span><span class="nx">fromData</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;./index.mobile.js&#39;</span><span class="p">))</span>

<span class="c1">// Note that browsers (and ssri) will succeed as long as ONE of the entries</span>
<span class="c1">// for the *prioritized* algorithm succeeds. That is, in order for this fallback</span>
<span class="c1">// to work, both desktop and mobile *must* use the same `algorithm` values.</span>
<span class="nx">desktopIntegrity</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">mobileIntegrity</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-integrity-to-string-a-integrity-tostring-opts-string">
<h4><a name="integrity-to-string"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">Integrity#toString([opts])</span> <span class="pre">-&gt;</span> <span class="pre">String</span></code><a class="headerlink" href="#a-name-integrity-to-string-a-integrity-tostring-opts-string" title="Permalink to this headline">¶</a></h4>
<p>Returns the string representation of an <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> object. All hash entries
will be concatenated in the string by <code class="docutils literal notranslate"><span class="pre">opts.sep</span></code>, which defaults to <code class="docutils literal notranslate"><span class="pre">'</span> <span class="pre">'</span></code>.</p>
<p>If you want to serialize an object that didn’t come from an <code class="docutils literal notranslate"><span class="pre">ssri</span></code> function,
use <a class="reference external" href="#stringify"><code class="docutils literal notranslate"><span class="pre">ssri.stringify()</span></code></a>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.strict</span></code> is true, the integrity string will be created using strict
parsing rules. See <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">ssri.parse</span></code></a>.</p>
<div class="section" id="id4">
<h5>Example<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">integrity</span> <span class="o">=</span> <span class="s1">&#39;sha512-9KhgCRIx/AmzC8xqYJTZRrnO8OW2Pxyl2DIMZSBOr0oDvtEFyht3xpp71j/r/pAe1DM+JI/A+line3jUBgzQ7A==?foo&#39;</span>

<span class="nx">ssri</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">integrity</span><span class="p">).</span><span class="nx">toString</span><span class="p">()</span> <span class="o">===</span> <span class="nx">integrity</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-integrity-to-json-a-integrity-tojson-string">
<h4><a name="integrity-to-json"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">Integrity#toJSON()</span> <span class="pre">-&gt;</span> <span class="pre">String</span></code><a class="headerlink" href="#a-name-integrity-to-json-a-integrity-tojson-string" title="Permalink to this headline">¶</a></h4>
<p>Returns the string representation of an <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> object. All hash entries
will be concatenated in the string by <code class="docutils literal notranslate"><span class="pre">'</span> <span class="pre">'</span></code>.</p>
<p>This is a convenience method so you can pass an <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> object directly to <code class="docutils literal notranslate"><span class="pre">JSON.stringify</span></code>.
For more info check out <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON%28%29_behavior">toJSON() behavior on mdn</a>.</p>
<div class="section" id="id5">
<h5>Example<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">integrity</span> <span class="o">=</span> <span class="s1">&#39;&quot;sha512-9KhgCRIx/AmzC8xqYJTZRrnO8OW2Pxyl2DIMZSBOr0oDvtEFyht3xpp71j/r/pAe1DM+JI/A+line3jUBgzQ7A==?foo&quot;&#39;</span>

<span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">ssri</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">integrity</span><span class="p">))</span> <span class="o">===</span> <span class="nx">integrity</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-integrity-match-a-integrity-match-sri-opts-hash-false">
<h4><a name="integrity-match"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">Integrity#match(sri,</span> <span class="pre">[opts])</span> <span class="pre">-&gt;</span> <span class="pre">Hash</span> <span class="pre">|</span> <span class="pre">false</span></code><a class="headerlink" href="#a-name-integrity-match-a-integrity-match-sri-opts-hash-false" title="Permalink to this headline">¶</a></h4>
<p>Returns the matching (truthy) hash if <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> matches the argument passed as
<code class="docutils literal notranslate"><span class="pre">sri</span></code>, which can be anything that <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">parse</span></code></a> will accept. <code class="docutils literal notranslate"><span class="pre">opts</span></code> will be
passed through to <code class="docutils literal notranslate"><span class="pre">parse</span></code> and <a class="reference external" href="#integrity-pick-algorithm"><code class="docutils literal notranslate"><span class="pre">pickAlgorithm()</span></code></a>.</p>
<div class="section" id="id6">
<h5>Example<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">integrity</span> <span class="o">=</span> <span class="s1">&#39;sha512-9KhgCRIx/AmzC8xqYJTZRrnO8OW2Pxyl2DIMZSBOr0oDvtEFyht3xpp71j/r/pAe1DM+JI/A+line3jUBgzQ7A==&#39;</span>

<span class="nx">ssri</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">integrity</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="nx">integrity</span><span class="p">)</span>
<span class="c1">// Hash {</span>
<span class="c1">//   digest: &#39;9KhgCRIx/AmzC8xqYJTZRrnO8OW2Pxyl2DIMZSBOr0oDvtEFyht3xpp71j/r/pAe1DM+JI/A+line3jUBgzQ7A==&#39;</span>
<span class="c1">//   algorithm: &#39;sha512&#39;</span>
<span class="c1">// }</span>

<span class="nx">ssri</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">integrity</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="s1">&#39;sha1-deadbeef&#39;</span><span class="p">)</span>
<span class="c1">// false</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-integrity-pick-algorithm-a-integrity-pickalgorithm-opts-string">
<h4><a name="integrity-pick-algorithm"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">Integrity#pickAlgorithm([opts])</span> <span class="pre">-&gt;</span> <span class="pre">String</span></code><a class="headerlink" href="#a-name-integrity-pick-algorithm-a-integrity-pickalgorithm-opts-string" title="Permalink to this headline">¶</a></h4>
<p>Returns the “best” algorithm from those available in the integrity object.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.pickAlgorithm</span></code> is provided, it will be passed two algorithms as
arguments. ssri will prioritize whichever of the two algorithms is returned by
this function. Note that the function may be called multiple times, and it
<strong>must</strong> return one of the two algorithms provided. By default, ssri will make
a best-effort to pick the strongest/most reliable of the given algorithms. It
may intentionally deprioritize algorithms with known vulnerabilities.</p>
<div class="section" id="id7">
<h5>Example<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">ssri</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s1">&#39;sha1-WEakDigEST sha512-yzd8ELD1piyANiWnmdnpCL5F52f10UfUdEkHywVZeqTt0ymgrxR63Qz0GB7TKPoeeZQmWCaz7T1&#39;</span><span class="p">).</span><span class="nx">pickAlgorithm</span><span class="p">()</span> <span class="c1">// sha512</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-integrity-hex-digest-a-integrity-hexdigest-string">
<h4><a name="integrity-hex-digest"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">Integrity#hexDigest()</span> <span class="pre">-&gt;</span> <span class="pre">String</span></code><a class="headerlink" href="#a-name-integrity-hex-digest-a-integrity-hexdigest-string" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Integrity</span></code> is assumed to be either a single-hash <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> instance, or a
<code class="docutils literal notranslate"><span class="pre">Hash</span></code> instance. Returns its <code class="docutils literal notranslate"><span class="pre">digest</span></code>, converted to a hex representation of the
base64 data.</p>
<div class="section" id="id8">
<h5>Example<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">ssri</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s1">&#39;sha1-deadbeef&#39;</span><span class="p">).</span><span class="nx">hexDigest</span><span class="p">()</span> <span class="c1">// &#39;75e69d6de79f&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-from-hex-a-ssri-fromhex-hexdigest-algorithm-opts-integrity">
<h4><a name="from-hex"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">ssri.fromHex(hexDigest,</span> <span class="pre">algorithm,</span> <span class="pre">[opts])</span> <span class="pre">-&gt;</span> <span class="pre">Integrity</span></code><a class="headerlink" href="#a-name-from-hex-a-ssri-fromhex-hexdigest-algorithm-opts-integrity" title="Permalink to this headline">¶</a></h4>
<p>Creates an <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> object with a single entry, based on a hex-formatted
hash. This is a utility function to help convert existing shasums to the
Integrity format, and is roughly equivalent to something like:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">algorithm</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">hexDigest</span><span class="p">,</span> <span class="s1">&#39;hex&#39;</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;base64&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">opts.options</span></code> may optionally be passed in: it must be an array of option
strings that will be added to all generated integrity hashes generated by
<code class="docutils literal notranslate"><span class="pre">fromData</span></code>. This is a loosely-specified feature of SRIs, and currently has no
specified semantics besides being <code class="docutils literal notranslate"><span class="pre">?</span></code>-separated. Use at your own risk, and
probably avoid if your integrity strings are meant to be used with browsers.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.strict</span></code> is true, the integrity object will be created using strict
parsing rules. See <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">ssri.parse</span></code></a>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.single</span></code> is true, a single <code class="docutils literal notranslate"><span class="pre">Hash</span></code> object will be returned.</p>
<div class="section" id="id9">
<h5>Example<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">ssri</span><span class="p">.</span><span class="nx">fromHex</span><span class="p">(</span><span class="s1">&#39;75e69d6de79f&#39;</span><span class="p">,</span> <span class="s1">&#39;sha1&#39;</span><span class="p">).</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// &#39;sha1-deadbeef&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-from-data-a-ssri-fromdata-data-opts-integrity">
<h4><a name="from-data"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">ssri.fromData(data,</span> <span class="pre">[opts])</span> <span class="pre">-&gt;</span> <span class="pre">Integrity</span></code><a class="headerlink" href="#a-name-from-data-a-ssri-fromdata-data-opts-integrity" title="Permalink to this headline">¶</a></h4>
<p>Creates an <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> object from either string or <code class="docutils literal notranslate"><span class="pre">Buffer</span></code> data, calculating
all the requested hashes and adding any specified options to the object.</p>
<p><code class="docutils literal notranslate"><span class="pre">opts.algorithms</span></code> determines which algorithms to generate hashes for. All
results will be included in a single <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> object. The default value for
<code class="docutils literal notranslate"><span class="pre">opts.algorithms</span></code> is <code class="docutils literal notranslate"><span class="pre">['sha512']</span></code>. All algorithm strings must be hashes listed
in <code class="docutils literal notranslate"><span class="pre">crypto.getHashes()</span></code> for the host Node.js platform.</p>
<p><code class="docutils literal notranslate"><span class="pre">opts.options</span></code> may optionally be passed in: it must be an array of option
strings that will be added to all generated integrity hashes generated by
<code class="docutils literal notranslate"><span class="pre">fromData</span></code>. This is a loosely-specified feature of SRIs, and currently has no
specified semantics besides being <code class="docutils literal notranslate"><span class="pre">?</span></code>-separated. Use at your own risk, and
probably avoid if your integrity strings are meant to be used with browsers.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.strict</span></code> is true, the integrity object will be created using strict
parsing rules. See <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">ssri.parse</span></code></a>.</p>
<div class="section" id="id10">
<h5>Example<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">integrityObj</span> <span class="o">=</span> <span class="nx">ssri</span><span class="p">.</span><span class="nx">fromData</span><span class="p">(</span><span class="s1">&#39;foobarbaz&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">algorithms</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;sha256&#39;</span><span class="p">,</span> <span class="s1">&#39;sha384&#39;</span><span class="p">,</span> <span class="s1">&#39;sha512&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="nx">integrity</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">)</span>
<span class="c1">// -&gt;</span>
<span class="c1">// sha256-l981iLWj8kurw4UbNy8Lpxqdzd7UOxS50Glhv8FwfZ0=</span>
<span class="c1">// sha384-irnCxQ0CfQhYGlVAUdwTPC9bF3+YWLxlaDGM4xbYminxpbXEq+D+2GCEBTxcjES9</span>
<span class="c1">// sha512-yzd8ELD1piyANiWnmdnpCL5F52f10UfUdEkHywVZeqTt0ymgrxR63Qz0GB7TKPoeeZQmWCaz7T1+9vBnypkYWg==</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-from-stream-a-ssri-fromstream-stream-opts-promise-integrity">
<h4><a name="from-stream"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">ssri.fromStream(stream,</span> <span class="pre">[opts])</span> <span class="pre">-&gt;</span> <span class="pre">Promise&lt;Integrity&gt;</span></code><a class="headerlink" href="#a-name-from-stream-a-ssri-fromstream-stream-opts-promise-integrity" title="Permalink to this headline">¶</a></h4>
<p>Returns a Promise of an Integrity object calculated by reading data from
a given <code class="docutils literal notranslate"><span class="pre">stream</span></code>.</p>
<p>It accepts both <code class="docutils literal notranslate"><span class="pre">opts.algorithms</span></code> and <code class="docutils literal notranslate"><span class="pre">opts.options</span></code>, which are documented as
part of <a class="reference external" href="#from-data"><code class="docutils literal notranslate"><span class="pre">ssri.fromData</span></code></a>.</p>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">opts.Promise</span></code> may be passed in to inject a Promise library of
choice. By default, ssri will use Node’s built-in Promises.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.strict</span></code> is true, the integrity object will be created using strict
parsing rules. See <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">ssri.parse</span></code></a>.</p>
<div class="section" id="id11">
<h5>Example<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">ssri</span><span class="p">.</span><span class="nx">fromStream</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;index.js&#39;</span><span class="p">),</span> <span class="p">{</span>
  <span class="nx">algorithms</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;sha1&#39;</span><span class="p">,</span> <span class="s1">&#39;sha512&#39;</span><span class="p">]</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">integrity</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">ssri</span><span class="p">.</span><span class="nx">checkStream</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;index.js&#39;</span><span class="p">),</span> <span class="nx">integrity</span><span class="p">)</span>
<span class="p">})</span> <span class="c1">// succeeds</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-create-a-ssri-create-opts-hash">
<h4><a name="create"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">ssri.create([opts])</span> <span class="pre">-&gt;</span> <span class="pre">&lt;Hash&gt;</span></code><a class="headerlink" href="#a-name-create-a-ssri-create-opts-hash" title="Permalink to this headline">¶</a></h4>
<p>Returns a Hash object with <code class="docutils literal notranslate"><span class="pre">update(&lt;Buffer</span> <span class="pre">or</span> <span class="pre">string&gt;[,enc])</span></code> and <code class="docutils literal notranslate"><span class="pre">digest()</span></code> methods.</p>
<p>The Hash object provides the same methods as <a class="reference external" href="https://nodejs.org/dist/latest-v6.x/docs/api/crypto.html#crypto_class_hash">crypto class Hash</a>.
<code class="docutils literal notranslate"><span class="pre">digest()</span></code> accepts no arguments and returns an Integrity object calculated by reading data from
calls to update.</p>
<p>It accepts both <code class="docutils literal notranslate"><span class="pre">opts.algorithms</span></code> and <code class="docutils literal notranslate"><span class="pre">opts.options</span></code>, which are documented as
part of <a class="reference external" href="#from-data"><code class="docutils literal notranslate"><span class="pre">ssri.fromData</span></code></a>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.strict</span></code> is true, the integrity object will be created using strict
parsing rules. See <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">ssri.parse</span></code></a>.</p>
<div class="section" id="id12">
<h5>Example<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">integrity</span> <span class="o">=</span> <span class="nx">ssri</span><span class="p">.</span><span class="nx">create</span><span class="p">().</span><span class="nx">update</span><span class="p">(</span><span class="s1">&#39;foobarbaz&#39;</span><span class="p">).</span><span class="nx">digest</span><span class="p">()</span>
<span class="nx">integrity</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
<span class="c1">// -&gt;</span>
<span class="c1">// sha512-yzd8ELD1piyANiWnmdnpCL5F52f10UfUdEkHywVZeqTt0ymgrxR63Qz0GB7TKPoeeZQmWCaz7T1+9vBnypkYWg==</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-check-data-a-ssri-checkdata-data-sri-opts-hash-false">
<h4><a name="check-data"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">ssri.checkData(data,</span> <span class="pre">sri,</span> <span class="pre">[opts])</span> <span class="pre">-&gt;</span> <span class="pre">Hash|false</span></code><a class="headerlink" href="#a-name-check-data-a-ssri-checkdata-data-sri-opts-hash-false" title="Permalink to this headline">¶</a></h4>
<p>Verifies <code class="docutils literal notranslate"><span class="pre">data</span></code> integrity against an <code class="docutils literal notranslate"><span class="pre">sri</span></code> argument. <code class="docutils literal notranslate"><span class="pre">data</span></code> may be either a
<code class="docutils literal notranslate"><span class="pre">String</span></code> or a <code class="docutils literal notranslate"><span class="pre">Buffer</span></code>, and <code class="docutils literal notranslate"><span class="pre">sri</span></code> can be any subresource integrity
representation that <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">ssri.parse</span></code></a> can handle.</p>
<p>If verification succeeds, <code class="docutils literal notranslate"><span class="pre">checkData</span></code> will return the name of the algorithm that
was used for verification (a truthy value). Otherwise, it will return <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.pickAlgorithm</span></code> is provided, it will be used by
<a class="reference external" href="#integrity-pick-algorithm"><code class="docutils literal notranslate"><span class="pre">Integrity#pickAlgorithm</span></code></a> when deciding which of
the available digests to match against.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.error</span></code> is true, and verification fails, <code class="docutils literal notranslate"><span class="pre">checkData</span></code> will throw either
an <code class="docutils literal notranslate"><span class="pre">EBADSIZE</span></code> or an <code class="docutils literal notranslate"><span class="pre">EINTEGRITY</span></code> error, instead of just returning false.</p>
<div class="section" id="id13">
<h5>Example<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;index.js&#39;</span><span class="p">)</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">checkData</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">ssri</span><span class="p">.</span><span class="nx">fromData</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span> <span class="c1">// -&gt; &#39;sha512&#39;</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">checkData</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="s1">&#39;sha256-l981iLWj8kurw4UbNy8Lpxqdzd7UOxS50Glhv8FwfZ0&#39;</span><span class="p">)</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">checkData</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="s1">&#39;sha1-BaDDigEST&#39;</span><span class="p">)</span> <span class="c1">// -&gt; false</span>
<span class="nx">ssri</span><span class="p">.</span><span class="nx">checkData</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="s1">&#39;sha1-BaDDigEST&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">error</span><span class="o">:</span> <span class="kc">true</span><span class="p">})</span> <span class="c1">// -&gt; Error! EINTEGRITY</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-check-stream-a-ssri-checkstream-stream-sri-opts-promise-hash">
<h4><a name="check-stream"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">ssri.checkStream(stream,</span> <span class="pre">sri,</span> <span class="pre">[opts])</span> <span class="pre">-&gt;</span> <span class="pre">Promise&lt;Hash&gt;</span></code><a class="headerlink" href="#a-name-check-stream-a-ssri-checkstream-stream-sri-opts-promise-hash" title="Permalink to this headline">¶</a></h4>
<p>Verifies the contents of <code class="docutils literal notranslate"><span class="pre">stream</span></code> against an <code class="docutils literal notranslate"><span class="pre">sri</span></code> argument. <code class="docutils literal notranslate"><span class="pre">stream</span></code> will be
consumed in its entirety by this process. <code class="docutils literal notranslate"><span class="pre">sri</span></code> can be any subresource integrity
representation that <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">ssri.parse</span></code></a> can handle.</p>
<p><code class="docutils literal notranslate"><span class="pre">checkStream</span></code> will return a Promise that either resolves to the
<code class="docutils literal notranslate"><span class="pre">Hash</span></code> that succeeded verification, or, if the verification fails
or an error happens with <code class="docutils literal notranslate"><span class="pre">stream</span></code>, the Promise will be rejected.</p>
<p>If the Promise is rejected because verification failed, the returned error will
have <code class="docutils literal notranslate"><span class="pre">err.code</span></code> as <code class="docutils literal notranslate"><span class="pre">EINTEGRITY</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.size</span></code> is given, it will be matched against the stream size. An error
with <code class="docutils literal notranslate"><span class="pre">err.code</span></code> <code class="docutils literal notranslate"><span class="pre">EBADSIZE</span></code> will be returned by a rejection if the expected size
and actual size fail to match.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.pickAlgorithm</span></code> is provided, it will be used by
<a class="reference external" href="#integrity-pick-algorithm"><code class="docutils literal notranslate"><span class="pre">Integrity#pickAlgorithm</span></code></a> when deciding which of
the available digests to match against.</p>
<div class="section" id="id14">
<h5>Example<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">integrity</span> <span class="o">=</span> <span class="nx">ssri</span><span class="p">.</span><span class="nx">fromData</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;index.js&#39;</span><span class="p">))</span>

<span class="nx">ssri</span><span class="p">.</span><span class="nx">checkStream</span><span class="p">(</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;index.js&#39;</span><span class="p">),</span>
  <span class="nx">integrity</span>
<span class="p">)</span>
<span class="c1">// -&gt;</span>
<span class="c1">// Promise&lt;{</span>
<span class="c1">//   algorithm: &#39;sha512&#39;,</span>
<span class="c1">//   digest: &#39;sha512-yzd8ELD1piyANiWnmdnpCL5F52f10UfUdEkHywVZeqTt0ymgrxR63Qz0GB7TKPoeeZQmWCaz7T1&#39;</span>
<span class="c1">// }&gt;</span>

<span class="nx">ssri</span><span class="p">.</span><span class="nx">checkStream</span><span class="p">(</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;index.js&#39;</span><span class="p">),</span>
  <span class="s1">&#39;sha256-l981iLWj8kurw4UbNy8Lpxqdzd7UOxS50Glhv8FwfZ0&#39;</span>
<span class="p">)</span> <span class="c1">// -&gt; Promise&lt;Hash&gt;</span>

<span class="nx">ssri</span><span class="p">.</span><span class="nx">checkStream</span><span class="p">(</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;index.js&#39;</span><span class="p">),</span>
  <span class="s1">&#39;sha1-BaDDigEST&#39;</span>
<span class="p">)</span> <span class="c1">// -&gt; Promise&lt;Error&lt;{code: &#39;EINTEGRITY&#39;}&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-name-integrity-stream-a-integritystream-opts-integritystream">
<h4><a name="integrity-stream"></a> <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">integrityStream([opts])</span> <span class="pre">-&gt;</span> <span class="pre">IntegrityStream</span></code><a class="headerlink" href="#a-name-integrity-stream-a-integritystream-opts-integritystream" title="Permalink to this headline">¶</a></h4>
<p>Returns a <code class="docutils literal notranslate"><span class="pre">Transform</span></code> stream that data can be piped through in order to generate
and optionally check data integrity for piped data. When the stream completes
successfully, it emits <code class="docutils literal notranslate"><span class="pre">size</span></code> and <code class="docutils literal notranslate"><span class="pre">integrity</span></code> events, containing the total
number of bytes processed and a calculated <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> instance based on stream
data, respectively.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.algorithms</span></code> is passed in, the listed algorithms will be calculated when
generating the final <code class="docutils literal notranslate"><span class="pre">Integrity</span></code> instance. The default is <code class="docutils literal notranslate"><span class="pre">['sha512']</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.single</span></code> is passed in, a single <code class="docutils literal notranslate"><span class="pre">Hash</span></code> instance will be returned.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.integrity</span></code> is passed in, it should be an <code class="docutils literal notranslate"><span class="pre">integrity</span></code> value understood
by <a class="reference external" href="#parse"><code class="docutils literal notranslate"><span class="pre">parse</span></code></a> that the stream will check the data against. If
verification succeeds, the integrity stream will emit a <code class="docutils literal notranslate"><span class="pre">verified</span></code> event whose
value is a single <code class="docutils literal notranslate"><span class="pre">Hash</span></code> object that is the one that succeeded verification. If
verification fails, the stream will error with an <code class="docutils literal notranslate"><span class="pre">EINTEGRITY</span></code> error code.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.size</span></code> is given, it will be matched against the stream size. An error
with <code class="docutils literal notranslate"><span class="pre">err.code</span></code> <code class="docutils literal notranslate"><span class="pre">EBADSIZE</span></code> will be emitted by the stream if the expected size
and actual size fail to match.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">opts.pickAlgorithm</span></code> is provided, it will be passed two algorithms as
arguments. ssri will prioritize whichever of the two algorithms is returned by
this function. Note that the function may be called multiple times, and it
<strong>must</strong> return one of the two algorithms provided. By default, ssri will make
a best-effort to pick the strongest/most reliable of the given algorithms. It
may intentionally deprioritize algorithms with known vulnerabilities.</p>
<div class="section" id="id15">
<h5>Example<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h5>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">integrity</span> <span class="o">=</span> <span class="nx">ssri</span><span class="p">.</span><span class="nx">fromData</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;index.js&#39;</span><span class="p">))</span>
<span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;index.js&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">ssri</span><span class="p">.</span><span class="nx">integrityStream</span><span class="p">({</span><span class="nx">integrity</span><span class="p">}))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AyrtonB/ESDA-Spatial",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-ssri-6.0.1-2a3c41b28dd45b62b63676ecb74001265ae9edd8-integrity/node_modules/ssri"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ayrton Bourn, Santiago De La Fuente, Clem Attwood, Joanna Kuleszo, Camilo Perico<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../../../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>