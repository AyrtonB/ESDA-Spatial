
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pretty-error &#8212; Spatial Analysis for Energy</title>
    
  <link rel="stylesheet" href="../../../../../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  <img src="../../../../../../_static/logo.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Spatial Analysis for Energy</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Intro.html">
   UCL Energy Systems &amp; Data Analytics - Spatial Module
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/03-Working-with-Vector-Data.html">
   Working with Vector Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/04-Working-with-Raster-Data.html">
   Working with Raster Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Extensions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../extensions/01-Mapping-with-ggplot.html">
   Mapping with ggplot
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Setup.html">
   Set-Up Instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Jupyter-Anaconda.html">
   What is Jupyter/Anaconda?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/ESDA%20Course.html">
   ESDA Course
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-pretty-error-2.1.1-5f4f87c8f91e5ae3f3ba87ab4cf5e03b1a17f1a3-integrity/node_modules/pretty-error/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage-and-examples">
   Usage and Examples
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-it-works">
   How it Works
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#theming">
   Theming
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#customization">
   Customization
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#shortening-paths">
     Shortening paths
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#skipping-packages">
     Skipping packages
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#skipping-node-files">
     Skipping node files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#skipping-paths">
     Skipping paths
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#skipping-by-callback">
     Skipping by callback
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#modifying-each-trace-line-s-contents">
     Modifying each trace line’s contents
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#disabling-colors">
   Disabling colors
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#integrating-with-frameworks">
   Integrating with frameworks
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#integrating-with-express">
     Integrating with express
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#troubleshooting">
   Troubleshooting
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   License
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="pretty-error">
<h1>pretty-error<a class="headerlink" href="#pretty-error" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://david-dm.org/AriaMinaei/pretty-error"><img alt="Dependency status" src="https://david-dm.org/AriaMinaei/pretty-error.svg" /></a>
<a class="reference external" href="https://travis-ci.org/AriaMinaei/pretty-error"><img alt="Build Status" src="https://secure.travis-ci.org/AriaMinaei/pretty-error.svg?branch=master" /></a> <a class="reference external" href="https://npmjs.org/package/pretty-error"><img alt="npm" src="https://img.shields.io/npm/dm/pretty-error.svg" /></a></p>
<p>A small tool to see node.js errors with less clutter:</p>
<p><img alt="screenshot of pretty-error" src="https://github.com/AriaMinaei/pretty-error/raw/master/docs/images/pretty-error-screenshot.png" /></p>
<p>… which is more readable compared to node’s unformatted errors:</p>
<p><img alt="screenshot of normal errors" src="https://github.com/AriaMinaei/pretty-error/raw/master/docs/images/normal-error-screenshot.png" /></p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Install with npm:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ npm install pretty-error
</pre></div>
</div>
</div>
<div class="section" id="usage-and-examples">
<h2>Usage and Examples<a class="headerlink" href="#usage-and-examples" title="Permalink to this headline">¶</a></h2>
<p>To see an error rendered with colors, you can do this:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">PrettyError</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;pretty-error&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">pe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PrettyError</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">renderedError</span> <span class="o">=</span> <span class="nx">pe</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Some error message&#39;</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">renderedError</span><span class="p">);</span>
</pre></div>
</div>
<p>Of course, you can render caught exceptions too:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">try</span> <span class="p">{</span>
   <span class="nx">doSomethingThatThrowsAnError</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">pe</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>But if you want pretty-error to render all errors, there is a shortcut for it:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;pretty-error&#39;</span><span class="p">).</span><span class="nx">start</span><span class="p">();</span>
</pre></div>
</div>
<p>… which is essentially equal to:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">PrettyError</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;pretty-error&#39;</span><span class="p">);</span>

<span class="c1">// instantiate PrettyError, which can then be used to render error objects</span>
<span class="kd">var</span> <span class="nx">pe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PrettyError</span><span class="p">();</span>
<span class="nx">pe</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
</pre></div>
</div>
<p>You can also preload pretty-error into your code using node’s <a class="reference external" href="https://nodejs.org/api/cli.html#cli_r_require_module"><code class="docutils literal notranslate"><span class="pre">--require</span></code></a> argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ node --require pretty-error/start your-module.js
</pre></div>
</div>
</div>
<div class="section" id="how-it-works">
<h2>How it Works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>PrettyError turns error objects into something similar to an html document, and then uses <a class="reference external" href="https://github.com/AriaMinaei/renderkid">RenderKid</a> to render the document using simple html/css-like commands. This allows PrettyError to be themed using simple css-like declarations.</p>
</div>
<div class="section" id="theming">
<h2>Theming<a class="headerlink" href="#theming" title="Permalink to this headline">¶</a></h2>
<p>PrettyError’s default theme is a bunch of simple css-like rules. <a class="reference external" href="https://github.com/AriaMinaei/pretty-error/blob/master/src/defaultStyle.coffee">Here</a> is the source of the default theme.</p>
<p>Since the default theme is all css, you can customize it to fit your taste. Let’s do a minimal one:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// the start() shortcut returns an instance of PrettyError ...</span>
<span class="nx">pe</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;pretty-error&#39;</span><span class="p">).</span><span class="nx">start</span><span class="p">();</span>

<span class="c1">// ... which we can then use to customize like this:</span>
<span class="nx">pe</span><span class="p">.</span><span class="nx">appendStyle</span><span class="p">({</span>
   <span class="c1">// this is a simple selector to the element that says &#39;Error&#39;</span>
   <span class="s1">&#39;pretty-error &gt; header &gt; title &gt; kind&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="c1">// which we can hide:</span>
      <span class="nx">display</span><span class="o">:</span> <span class="s1">&#39;none&#39;</span>
   <span class="p">},</span>

   <span class="c1">// the &#39;colon&#39; after &#39;Error&#39;:</span>
   <span class="s1">&#39;pretty-error &gt; header &gt; colon&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="c1">// we hide that too:</span>
      <span class="nx">display</span><span class="o">:</span> <span class="s1">&#39;none&#39;</span>
   <span class="p">},</span>

   <span class="c1">// our error message</span>
   <span class="s1">&#39;pretty-error &gt; header &gt; message&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="c1">// let&#39;s change its color:</span>
      <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;bright-white&#39;</span><span class="p">,</span>

      <span class="c1">// we can use black, red, green, yellow, blue, magenta, cyan, white,</span>
      <span class="c1">// grey, bright-red, bright-green, bright-yellow, bright-blue,</span>
      <span class="c1">// bright-magenta, bright-cyan, and bright-white</span>

      <span class="c1">// we can also change the background color:</span>
      <span class="nx">background</span><span class="o">:</span> <span class="s1">&#39;cyan&#39;</span><span class="p">,</span>

      <span class="c1">// it understands paddings too!</span>
      <span class="nx">padding</span><span class="o">:</span> <span class="s1">&#39;0 1&#39;</span> <span class="c1">// top/bottom left/right</span>
   <span class="p">},</span>

   <span class="c1">// each trace item ...</span>
   <span class="s1">&#39;pretty-error &gt; trace &gt; item&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="c1">// ... can have a margin ...</span>
      <span class="nx">marginLeft</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>

      <span class="c1">// ... and a bullet character!</span>
      <span class="nx">bullet</span><span class="o">:</span> <span class="s1">&#39;&quot;&lt;grey&gt;o&lt;/grey&gt;&quot;&#39;</span>

      <span class="c1">// Notes on bullets:</span>
      <span class="c1">//</span>
      <span class="c1">// The string inside the quotation mark gets used as the character</span>
      <span class="c1">// to show for the bullet point.</span>
      <span class="c1">//</span>
      <span class="c1">// You can set its color/background color using tags.</span>
      <span class="c1">//</span>
      <span class="c1">// This example sets the background color to white, and the text color</span>
      <span class="c1">// to cyan, the character will be a hyphen with a space character</span>
      <span class="c1">// on each side:</span>
      <span class="c1">// example: &#39;&quot;&lt;bg-white&gt;&lt;cyan&gt; - &lt;/cyan&gt;&lt;/bg-white&gt;&quot;&#39;</span>
      <span class="c1">//</span>
      <span class="c1">// Note that we should use a margin of 3, since the bullet will be</span>
      <span class="c1">// 3 characters long.</span>
   <span class="p">},</span>

   <span class="s1">&#39;pretty-error &gt; trace &gt; item &gt; header &gt; pointer &gt; file&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;bright-cyan&#39;</span>
   <span class="p">},</span>

   <span class="s1">&#39;pretty-error &gt; trace &gt; item &gt; header &gt; pointer &gt; colon&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;cyan&#39;</span>
   <span class="p">},</span>

   <span class="s1">&#39;pretty-error &gt; trace &gt; item &gt; header &gt; pointer &gt; line&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;bright-cyan&#39;</span>
   <span class="p">},</span>

   <span class="s1">&#39;pretty-error &gt; trace &gt; item &gt; header &gt; what&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;bright-white&#39;</span>
   <span class="p">},</span>

   <span class="s1">&#39;pretty-error &gt; trace &gt; item &gt; footer &gt; addr&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">display</span><span class="o">:</span> <span class="s1">&#39;none&#39;</span>
   <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>This is how our minimal theme will look like: <img alt="screenshot of our custom theme" src="https://github.com/AriaMinaei/pretty-error/raw/master/docs/images/custom-theme-screenshot.png" /></p>
<p>Read <a class="reference external" href="https://github.com/AriaMinaei/renderkid">RenderKid</a>’s docs to learn about all the css rules that are supported.</p>
</div>
<div class="section" id="customization">
<h2>Customization<a class="headerlink" href="#customization" title="Permalink to this headline">¶</a></h2>
<p>There are a few methods to help you customize the contents of your error logs.</p>
<p>Let’s instantiate first:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">PrettyError</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;pretty-error&#39;</span><span class="p">);</span>
<span class="nx">pe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PrettyError</span><span class="p">();</span>

<span class="c1">// or:</span>
<span class="nx">pe</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;pretty-error&#39;</span><span class="p">).</span><span class="nx">start</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="shortening-paths">
<h3>Shortening paths<a class="headerlink" href="#shortening-paths" title="Permalink to this headline">¶</a></h3>
<p>You might want to substitute long paths with shorter, more readable aliases:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">pe</span><span class="p">.</span><span class="nx">alias</span><span class="p">(</span><span class="s1">&#39;E:/open-source/theatrejs/lib&#39;</span><span class="p">,</span> <span class="s1">&#39;(Theare.js)&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="skipping-packages">
<h3>Skipping packages<a class="headerlink" href="#skipping-packages" title="Permalink to this headline">¶</a></h3>
<p>You might want to skip trace lines that belong to specific packages (chai, when, socket.io):</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">pe</span><span class="p">.</span><span class="nx">skipPackage</span><span class="p">(</span><span class="s1">&#39;chai&#39;</span><span class="p">,</span> <span class="s1">&#39;when&#39;</span><span class="p">,</span> <span class="s1">&#39;socket.io&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="skipping-node-files">
<h3>Skipping node files<a class="headerlink" href="#skipping-node-files" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// this will skip node.js, path.js, event.js, etc.</span>
<span class="nx">pe</span><span class="p">.</span><span class="nx">skipNodeFiles</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="skipping-paths">
<h3>Skipping paths<a class="headerlink" href="#skipping-paths" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">pe</span><span class="p">.</span><span class="nx">skipPath</span><span class="p">(</span><span class="s1">&#39;/home/dir/someFile.js&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="skipping-by-callback">
<h3>Skipping by callback<a class="headerlink" href="#skipping-by-callback" title="Permalink to this headline">¶</a></h3>
<p>You can customize which trace lines get logged and which won’t:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">pe</span><span class="p">.</span><span class="nx">skip</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">traceLine</span><span class="p">,</span> <span class="nx">lineNumber</span><span class="p">){</span>
   <span class="c1">// if we know which package this trace line comes from, and it isn&#39;t</span>
   <span class="c1">// our &#39;demo&#39; package ...</span>
   <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">traceLine</span><span class="p">.</span><span class="nx">packageName</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">traceLine</span><span class="p">.</span><span class="nx">packageName</span> <span class="o">!==</span> <span class="s1">&#39;demo&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// then skip this line</span>
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="c1">// You can console.log(traceLine) to see all of it&#39;s properties.</span>
   <span class="c1">// Don&#39;t expect all these properties to be present, and don&#39;t assume</span>
   <span class="c1">// that our traceLine is always an object.</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="modifying-each-trace-line-s-contents">
<h3>Modifying each trace line’s contents<a class="headerlink" href="#modifying-each-trace-line-s-contents" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">pe</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">traceLine</span><span class="p">,</span> <span class="nx">lineNumber</span><span class="p">){</span>
   <span class="c1">// the &#39;what&#39; clause is something like:</span>
   <span class="c1">// &#39;DynamicTimeline.module.exports.DynamicTimeline._verifyProp&#39;</span>
   <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">traceLine</span><span class="p">.</span><span class="nx">what</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">){</span>

      <span class="c1">// we can shorten it with a regex:</span>
      <span class="nx">traceLine</span><span class="p">.</span><span class="nx">what</span> <span class="o">=</span> <span class="nx">traceLine</span><span class="p">.</span><span class="nx">what</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
         <span class="sr">/(.*\.module\.exports\.)(.*)/</span><span class="p">,</span> <span class="s1">&#39;$2&#39;</span>
      <span class="p">);</span>
   <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="disabling-colors">
<h2>Disabling colors<a class="headerlink" href="#disabling-colors" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">pe</span><span class="p">.</span><span class="nx">withoutColors</span><span class="p">();</span> <span class="c1">// Errors will be rendered without coloring</span>
</pre></div>
</div>
</div>
<div class="section" id="integrating-with-frameworks">
<h2>Integrating with frameworks<a class="headerlink" href="#integrating-with-frameworks" title="Permalink to this headline">¶</a></h2>
<p>PrettyError is very simple to set up, so it should be easy to use within other frameworks.</p>
<div class="section" id="integrating-with-express">
<h3>Integrating with <a class="reference external" href="https://github.com/visionmedia/express">express</a><a class="headerlink" href="#integrating-with-express" title="Permalink to this headline">¶</a></h3>
<p>Most frameworks such as express, catch errors automatically and provide a mechanism to handle those errors. Here is an example of how you can use PrettyError to log unhandled errors in express:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// this is app.js</span>

<span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">PrettyError</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;pretty-error&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">// this will throw an error:</span>
   <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mf">3000</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Server started \n&#39;</span><span class="p">);</span>
<span class="p">});</span>


<span class="c1">// we can now instantiaite Prettyerror:</span>
<span class="nx">pe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PrettyError</span><span class="p">();</span>

<span class="c1">// and use it for our app&#39;s error handler:</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">){</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">pe</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
   <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// we can optionally configure prettyError to simplify the stack trace:</span>

<span class="nx">pe</span><span class="p">.</span><span class="nx">skipNodeFiles</span><span class="p">();</span> <span class="c1">// this will skip events.js and http.js and similar core node files</span>
<span class="nx">pe</span><span class="p">.</span><span class="nx">skipPackage</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span> <span class="c1">// this will skip all the trace lines about express` core and sub-modules</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">PrettyError.start()</span></code> modifies the stack traces of all errors thrown anywhere in your code, so it could potentially break packages that rely on node’s original stack traces. I’ve only encountered this problem once, and it was with BlueBird when <code class="docutils literal notranslate"><span class="pre">Promise.longStackTraces()</span></code> was on.</p>
<p>In order to avoid this problem, it’s better to not use <code class="docutils literal notranslate"><span class="pre">PrettyError.start()</span></code> and instead, manually catch errors and render them with PrettyError:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">PrettyError</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;pretty-error&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">pe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PrettyError</span><span class="p">();</span>

<span class="c1">// To render exceptions thrown in non-promies code:</span>
<span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;uncaughtException&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">pe</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// To render unhandled rejections created in BlueBird:</span>
<span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;unhandledRejection&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reason</span><span class="p">){</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Unhandled rejection&quot;</span><span class="p">);</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">pe</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">reason</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// While PrettyError.start() works out of the box with when.js` unhandled rejections,</span>
<span class="c1">// now that wer&#39;e manually rendering errors, we have to instead use npmjs.org/packages/pretty-monitor</span>
<span class="c1">// to handle when.js rejections.</span>
</pre></div>
</div>
<p>The only drawback with this approach is that exceptions thrown in the first tick are not prettified. To fix that, you can delay your application’s startup for one tick:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// (continued form above)</span>

<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span> <span class="c1">// not prettified</span>
<span class="nx">process</span><span class="p">.</span><span class="nx">nextTick</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
   <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span> <span class="c1">// prettified</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>MIT</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AyrtonB/ESDA-Spatial",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-pretty-error-2.1.1-5f4f87c8f91e5ae3f3ba87ab4cf5e03b1a17f1a3-integrity/node_modules/pretty-error"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ayrton Bourn, Santiago De La Fuente, Clem Attwood, Joanna Kuleszo, Camilo Perico<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../../../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>