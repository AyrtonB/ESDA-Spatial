
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>memoize-one &#8212; Spatial Analysis for Energy</title>
    
  <link rel="stylesheet" href="../../../../../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  <img src="../../../../../../_static/logo.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Spatial Analysis for Energy</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Intro.html">
   UCL Energy Systems &amp; Data Analytics - Spatial Module
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/03-Working-with-Vector-Data.html">
   Working with Vector Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/04-Working-with-Raster-Data.html">
   Working with Raster Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Extensions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../extensions/01-Mapping-with-ggplot.html">
   Mapping with ggplot
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Setup.html">
   Set-Up Instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Jupyter-Anaconda.html">
   What is Jupyter/Anaconda?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/ESDA%20Course.html">
   ESDA Course
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-memoize-one-5.1.1-047b6e3199b508eaec03504de71229b8eb1d75c0-integrity/node_modules/memoize-one/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rationale">
   Rationale
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   Usage
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#custom-equality-function">
   Custom equality function
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#this">
   <code class="docutils literal notranslate">
    <span class="pre">
     this
    </span>
   </code>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#memoize-one-correctly-respects-this-control">
     <code class="docutils literal notranslate">
      <span class="pre">
       memoize-one
      </span>
     </code>
     correctly respects
     <code class="docutils literal notranslate">
      <span class="pre">
       this
      </span>
     </code>
     control
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#changes-to-this-is-considered-an-argument-change">
     Changes to
     <code class="docutils literal notranslate">
      <span class="pre">
       this
      </span>
     </code>
     is considered an argument change
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#when-your-result-function-throws">
   When your result function
   <code class="docutils literal notranslate">
    <span class="pre">
     throw
    </span>
   </code>
   s
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#performance">
   Performance 🚀
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tiny">
     Tiny
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extremely-fast">
     Extremely fast
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#code-health">
   Code health 👍
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="memoize-one">
<h1>memoize-one<a class="headerlink" href="#memoize-one" title="Permalink to this headline">¶</a></h1>
<p>A memoization library that only caches the result of the most recent arguments.</p>
<p><a class="reference external" href="https://travis-ci.org/alexreardon/memoize-one"><img alt="Build Status" src="https://travis-ci.org/alexreardon/memoize-one.svg?branch=master" /></a>
<a class="reference external" href="https://www.npmjs.com/package/memoize-one"><img alt="npm" src="https://img.shields.io/npm/v/memoize-one.svg" /></a>
<img alt="types" src="https://img.shields.io/badge/types-typescript%20%7C%20flow-blueviolet" />
<a class="reference external" href="https://david-dm.org/alexreardon/memoize-one"><img alt="dependencies" src="https://david-dm.org/alexreardon/memoize-one.svg" /></a>
<a class="reference external" href="https://www.npmjs.com/package/memoize-one"><img alt="minzip" src="https://img.shields.io/bundlephobia/minzip/memoize-one.svg" /></a>
<a class="reference external" href="https://www.npmjs.com/package/memoize-one"><img alt="Downloads per month" src="https://img.shields.io/npm/dm/memoize-one.svg" /></a></p>
<div class="section" id="rationale">
<h2>Rationale<a class="headerlink" href="#rationale" title="Permalink to this headline">¶</a></h2>
<p>Unlike other memoization libraries, <code class="docutils literal notranslate"><span class="pre">memoize-one</span></code> only remembers the latest arguments and result. No need to worry about cache busting mechanisms such as <code class="docutils literal notranslate"><span class="pre">maxAge</span></code>, <code class="docutils literal notranslate"><span class="pre">maxSize</span></code>, <code class="docutils literal notranslate"><span class="pre">exclusions</span></code> and so on which can be prone to memory leaks. <code class="docutils literal notranslate"><span class="pre">memoize-one</span></code> simply remembers the last arguments, and if the function is next called with the same arguments then it returns the previous result.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">memoizeOne</span> <span class="nx">from</span> <span class="s1">&#39;memoize-one&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">add</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">memoizedAdd</span> <span class="o">=</span> <span class="nx">memoizeOne</span><span class="p">(</span><span class="nx">add</span><span class="p">);</span>

<span class="nx">memoizedAdd</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">);</span> <span class="c1">// 3</span>

<span class="nx">memoizedAdd</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">);</span> <span class="c1">// 3</span>
<span class="c1">// Add function is not executed: previous result is returned</span>

<span class="nx">memoizedAdd</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">);</span> <span class="c1">// 5</span>
<span class="c1">// Add function is called to get new value</span>

<span class="nx">memoizedAdd</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">);</span> <span class="c1">// 5</span>
<span class="c1">// Add function is not executed: previous result is returned</span>

<span class="nx">memoizedAdd</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">);</span> <span class="c1">// 3</span>
<span class="c1">// Add function is called to get new value.</span>
<span class="c1">// While this was previously cached,</span>
<span class="c1">// it is not the latest so the cached result is lost</span>
</pre></div>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># yarn</span>
yarn add memoize-one

<span class="c1"># npm</span>
npm install memoize-one --save
</pre></div>
</div>
</div>
<div class="section" id="custom-equality-function">
<h2>Custom equality function<a class="headerlink" href="#custom-equality-function" title="Permalink to this headline">¶</a></h2>
<p>You can also pass in a custom function for checking the equality of two sets of arguments</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">memoized</span> <span class="o">=</span> <span class="nx">memoizeOne</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">isEqual</span><span class="p">);</span>
</pre></div>
</div>
<p>The equality function needs to conform to this <code class="docutils literal notranslate"><span class="pre">type</span></code>:</p>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="nx">type</span> <span class="nx">EqualityFn</span> <span class="o">=</span> <span class="p">(</span><span class="nx">newArgs</span>: <span class="kt">any</span><span class="p">[],</span> <span class="nx">lastArgs</span>: <span class="kt">any</span><span class="p">[])</span> <span class="o">=&gt;</span> <span class="kr">boolean</span><span class="p">;</span>

<span class="c1">// You can import this type from memoize-one if you like</span>

<span class="c1">// typescript</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">EqualityFn</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;memoize-one&#39;</span><span class="p">;</span>

<span class="c1">// flow</span>
<span class="kr">import</span> <span class="nx">type</span> <span class="p">{</span> <span class="nx">EqualityFn</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;memoize-one&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>An equality function should return <code class="docutils literal notranslate"><span class="pre">true</span></code> if the arguments are equal. If <code class="docutils literal notranslate"><span class="pre">true</span></code> is returned then the wrapped function will not be called.</p>
<p>The default equality function is a shallow equal check of all arguments (each argument is compared with <code class="docutils literal notranslate"><span class="pre">===</span></code>). If the <code class="docutils literal notranslate"><span class="pre">length</span></code> of arguments change, then the default equality function makes no shallow equality checks. You are welcome to decide if you want to return <code class="docutils literal notranslate"><span class="pre">false</span></code> if the <code class="docutils literal notranslate"><span class="pre">length</span></code> of the arguments is not equal</p>
<p>A custom equality function needs to compare <code class="docutils literal notranslate"><span class="pre">Arrays</span></code>. The <code class="docutils literal notranslate"><span class="pre">newArgs</span></code> array will be a new reference every time so a simple <code class="docutils literal notranslate"><span class="pre">newArgs</span> <span class="pre">===</span> <span class="pre">lastArgs</span></code> will always return <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>Equality functions are not called if the <code class="docutils literal notranslate"><span class="pre">this</span></code> context of the function has changed (see below).</p>
<p>Here is an example that uses a <code class="docutils literal notranslate"><span class="pre">lodash.isequal</span></code> deep equal equality check</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">lodash.isequal</span></code> correctly handles deep comparing two arrays</p>
</div></blockquote>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">memoizeOne</span> <span class="nx">from</span> <span class="s1">&#39;memoize-one&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">isDeepEqual</span> <span class="nx">from</span> <span class="s1">&#39;lodash.isequal&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span> <span class="nx">x</span> <span class="p">=&gt;</span> <span class="nx">x</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">shallowMemoized</span> <span class="o">=</span> <span class="nx">memoizeOne</span><span class="p">(</span><span class="nx">identity</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">deepMemoized</span> <span class="o">=</span> <span class="nx">memoizeOne</span><span class="p">(</span><span class="nx">identity</span><span class="p">,</span> <span class="nx">isDeepEqual</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">result1</span> <span class="o">=</span> <span class="nx">shallowMemoized</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">result2</span> <span class="o">=</span> <span class="nx">shallowMemoized</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span> <span class="p">});</span>

<span class="nx">result1</span> <span class="o">===</span> <span class="nx">result2</span><span class="p">;</span> <span class="c1">// false - difference reference</span>

<span class="kr">const</span> <span class="nx">result3</span> <span class="o">=</span> <span class="nx">deepMemoized</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">result4</span> <span class="o">=</span> <span class="nx">deepMemoized</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span> <span class="p">});</span>

<span class="nx">result3</span> <span class="o">===</span> <span class="nx">result4</span><span class="p">;</span> <span class="c1">// true - arguments are deep equal</span>
</pre></div>
</div>
</div>
<div class="section" id="this">
<h2><code class="docutils literal notranslate"><span class="pre">this</span></code><a class="headerlink" href="#this" title="Permalink to this headline">¶</a></h2>
<div class="section" id="memoize-one-correctly-respects-this-control">
<h3><code class="docutils literal notranslate"><span class="pre">memoize-one</span></code> correctly respects <code class="docutils literal notranslate"><span class="pre">this</span></code> control<a class="headerlink" href="#memoize-one-correctly-respects-this-control" title="Permalink to this headline">¶</a></h3>
<p>This library takes special care to maintain, and allow control over the the <code class="docutils literal notranslate"><span class="pre">this</span></code> context for <strong>both</strong> the original function being memoized as well as the returned memoized function. Both the original function and the memoized function’s <code class="docutils literal notranslate"><span class="pre">this</span></code> context respect <a class="reference external" href="https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/ch2.md">all the <code class="docutils literal notranslate"><span class="pre">this</span></code> controlling techniques</a>:</p>
<ul class="simple">
<li><p>new bindings (<code class="docutils literal notranslate"><span class="pre">new</span></code>)</p></li>
<li><p>explicit binding (<code class="docutils literal notranslate"><span class="pre">call</span></code>, <code class="docutils literal notranslate"><span class="pre">apply</span></code>, <code class="docutils literal notranslate"><span class="pre">bind</span></code>);</p></li>
<li><p>implicit binding (call site: <code class="docutils literal notranslate"><span class="pre">obj.foo()</span></code>);</p></li>
<li><p>default binding (<code class="docutils literal notranslate"><span class="pre">window</span></code> or <code class="docutils literal notranslate"><span class="pre">undefined</span></code> in <code class="docutils literal notranslate"><span class="pre">strict</span> <span class="pre">mode</span></code>);</p></li>
<li><p>fat arrow binding (binding to lexical <code class="docutils literal notranslate"><span class="pre">this</span></code>)</p></li>
<li><p>ignored this (pass <code class="docutils literal notranslate"><span class="pre">null</span></code> as <code class="docutils literal notranslate"><span class="pre">this</span></code> to explicit binding)</p></li>
</ul>
</div>
<div class="section" id="changes-to-this-is-considered-an-argument-change">
<h3>Changes to <code class="docutils literal notranslate"><span class="pre">this</span></code> is considered an argument change<a class="headerlink" href="#changes-to-this-is-considered-an-argument-change" title="Permalink to this headline">¶</a></h3>
<p>Changes to the running context (<code class="docutils literal notranslate"><span class="pre">this</span></code>) of a function can result in the function returning a different value even though its arguments have stayed the same:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">getA</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">temp1</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">a</span><span class="o">:</span> <span class="mf">20</span><span class="p">,</span>
<span class="p">};</span>
<span class="kr">const</span> <span class="nx">temp2</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">a</span><span class="o">:</span> <span class="mf">30</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">getA</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">temp1</span><span class="p">);</span> <span class="c1">// 20</span>
<span class="nx">getA</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">temp2</span><span class="p">);</span> <span class="c1">// 30</span>
</pre></div>
</div>
<p>Therefore, in order to prevent against unexpected results, <code class="docutils literal notranslate"><span class="pre">memoize-one</span></code> takes into account the current execution context (<code class="docutils literal notranslate"><span class="pre">this</span></code>) of the memoized function. If <code class="docutils literal notranslate"><span class="pre">this</span></code> is different to the previous invocation then it is considered a change in argument. <a class="reference external" href="https://github.com/alexreardon/memoize-one/issues/3">further discussion</a>.</p>
<p>Generally this will be of no impact if you are not explicity controlling the <code class="docutils literal notranslate"><span class="pre">this</span></code> context of functions you want to memoize with <a class="reference external" href="https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/ch2.md#explicit-binding">explicit binding</a> or <a class="reference external" href="https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/ch2.md#implicit-binding">implicit binding</a>. <code class="docutils literal notranslate"><span class="pre">memoize-One</span></code> will detect when you are manipulating <code class="docutils literal notranslate"><span class="pre">this</span></code> and will then consider the <code class="docutils literal notranslate"><span class="pre">this</span></code> context as an argument. If <code class="docutils literal notranslate"><span class="pre">this</span></code> changes, it will re-execute the original function even if the arguments have not changed.</p>
</div>
</div>
<div class="section" id="when-your-result-function-throws">
<h2>When your result function <code class="docutils literal notranslate"><span class="pre">throw</span></code>s<a class="headerlink" href="#when-your-result-function-throws" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>There is no caching when your result function throws</p>
</div></blockquote>
<p>If your result function <code class="docutils literal notranslate"><span class="pre">throw</span></code>s then the memoized function will also throw. The throw will not break the memoized functions existing argument cache. It means the memoized function will pretend like it was never called with arguments that made it <code class="docutils literal notranslate"><span class="pre">throw</span></code>.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">canThrow</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;called&#39;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;throw&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span> <span class="p">};</span>
<span class="p">};</span>

<span class="kr">const</span> <span class="nx">memoized</span> <span class="o">=</span> <span class="nx">memoizeOne</span><span class="p">(</span><span class="nx">canThrow</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">value1</span> <span class="o">=</span> <span class="nx">memoized</span><span class="p">(</span><span class="s1">&#39;Alex&#39;</span><span class="p">);</span>
<span class="c1">// console.log =&gt; &#39;called&#39;</span>
<span class="kr">const</span> <span class="nx">value2</span> <span class="o">=</span> <span class="nx">memoized</span><span class="p">(</span><span class="s1">&#39;Alex&#39;</span><span class="p">);</span>
<span class="c1">// result function not called</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value1</span> <span class="o">===</span> <span class="nx">value2</span><span class="p">);</span>
<span class="c1">// console.log =&gt; true</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="nx">memoized</span><span class="p">(</span><span class="s1">&#39;throw&#39;</span><span class="p">);</span>
  <span class="c1">// console.log =&gt; &#39;called&#39;</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">firstError</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="nx">memoized</span><span class="p">(</span><span class="s1">&#39;throw&#39;</span><span class="p">);</span>
  <span class="c1">// console.log =&gt; &#39;called&#39;</span>
  <span class="c1">// the result function was called again even though it was called twice</span>
  <span class="c1">// with the &#39;throw&#39; string</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">secondError</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">firstError</span> <span class="o">!==</span> <span class="nx">secondError</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">value3</span> <span class="o">=</span> <span class="nx">memoized</span><span class="p">(</span><span class="s1">&#39;Alex&#39;</span><span class="p">);</span>
<span class="c1">// result function not called as the original memoization cache has not been busted</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value1</span> <span class="o">===</span> <span class="nx">value3</span><span class="p">);</span>
<span class="c1">// console.log =&gt; true</span>
</pre></div>
</div>
</div>
<div class="section" id="performance">
<h2>Performance 🚀<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h2>
<div class="section" id="tiny">
<h3>Tiny<a class="headerlink" href="#tiny" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">memoize-one</span></code> is super lightweight at <a class="reference external" href="https://www.npmjs.com/package/memoize-one"><img alt="min" src="https://img.shields.io/bundlephobia/min/memoize-one.svg?label=" /></a> minified and <a class="reference external" href="https://www.npmjs.com/package/memoize-one"><img alt="minzip" src="https://img.shields.io/bundlephobia/minzip/memoize-one.svg?label=" /></a> gzipped. (<code class="docutils literal notranslate"><span class="pre">1KB</span></code> = <code class="docutils literal notranslate"><span class="pre">1,024</span> <span class="pre">Bytes</span></code>)</p>
</div>
<div class="section" id="extremely-fast">
<h3>Extremely fast<a class="headerlink" href="#extremely-fast" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">memoize-one</span></code> performs better or on par with than other popular memoization libraries for the purpose of remembering the latest invocation.</p>
<p><strong>Results</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.measurethat.net/Benchmarks/ShowResult/4452">simple arguments</a></p></li>
<li><p><a class="reference external" href="https://www.measurethat.net/Benchmarks/ShowResult/4488">complex arguments</a></p></li>
</ul>
<p>The comparisons are not exhaustive and are primarily to show that <code class="docutils literal notranslate"><span class="pre">memoize-one</span></code> accomplishes remembering the latest invocation really fast. The benchmarks do not take into account the differences in feature sets, library sizes, parse time, and so on.</p>
</div>
</div>
<div class="section" id="code-health">
<h2>Code health 👍<a class="headerlink" href="#code-health" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Tested with all built in <a class="reference external" href="https://github.com/getify/You-Dont-Know-JS/blob/master/types%20%26%20grammar/ch1.md">JavaScript types</a>.</p></li>
<li><p>100% code coverage</p></li>
<li><p><a class="reference external" href="https://travis-ci.org/alexreardon/memoize-one">Continuous integration</a> to run tests and type checks.</p></li>
<li><p>Written in <code class="docutils literal notranslate"><span class="pre">Typescript</span></code></p></li>
<li><p>Correct typing for <code class="docutils literal notranslate"><span class="pre">Typescript</span></code> and <code class="docutils literal notranslate"><span class="pre">flow</span></code> type systems</p></li>
<li><p>No dependencies</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AyrtonB/ESDA-Spatial",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-memoize-one-5.1.1-047b6e3199b508eaec03504de71229b8eb1d75c0-integrity/node_modules/memoize-one"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ayrton Bourn, Santiago De La Fuente, Clem Attwood, Joanna Kuleszo, Camilo Perico<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../../../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>