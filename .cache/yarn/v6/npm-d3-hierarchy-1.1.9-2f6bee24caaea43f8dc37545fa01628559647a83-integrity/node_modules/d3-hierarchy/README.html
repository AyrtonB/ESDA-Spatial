
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>d3-hierarchy &#8212; Spatial Analysis for Energy</title>
    
  <link rel="stylesheet" href="../../../../../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  <img src="../../../../../../_static/logo.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Spatial Analysis for Energy</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Intro.html">
   UCL Energy Systems &amp; Data Analytics - Spatial Module
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/03-Working-with-Vector-Data.html">
   Working with Vector Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/04-Working-with-Raster-Data.html">
   Working with Raster Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Extensions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../extensions/01-Mapping-with-ggplot.html">
   Mapping with ggplot
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Setup.html">
   Set-Up Instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Jupyter-Anaconda.html">
   What is Jupyter/Anaconda?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/ESDA%20Course.html">
   ESDA Course
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-d3-hierarchy-1.1.9-2f6bee24caaea43f8dc37545fa01628559647a83-integrity/node_modules/d3-hierarchy/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing">
   Installing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api-reference">
   API Reference
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hierarchy">
     Hierarchy
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#stratify">
       Stratify
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cluster">
     Cluster
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tree">
     Tree
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#treemap">
     Treemap
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#treemap-tiling">
       Treemap Tiling
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#partition">
     Partition
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pack">
     Pack
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="d3-hierarchy">
<h1>d3-hierarchy<a class="headerlink" href="#d3-hierarchy" title="Permalink to this headline">¶</a></h1>
<p>Many datasets are intrinsically hierarchical. Consider <a class="reference external" href="https://www.census.gov/geo/reference/hierarchy.html">geographic entities</a>, such as census blocks, census tracts, counties and states; the command structure of businesses and governments; file systems and software packages. And even non-hierarchical data may be arranged empirically into a hierarchy, as with <a class="reference external" href="https://en.wikipedia.org/wiki/K-means_clustering"><em>k</em>-means clustering</a> or <a class="reference external" href="https://observablehq.com/&#64;mbostock/tree-of-life">phylogenetic trees</a>.</p>
<p>This module implements several popular techniques for visualizing hierarchical data:</p>
<p><strong>Node-link diagrams</strong> show topology using discrete marks for nodes and links, such as a circle for each node and a line connecting each parent and child. The <a class="reference external" href="#tree">“tidy” tree</a> is delightfully compact, while the <a class="reference external" href="#cluster">dendrogram</a> places leaves at the same level. (These have both polar and Cartesian forms.) <a class="reference external" href="https://bl.ocks.org/mbostock/1093025">Indented trees</a> are useful for interactive browsing.</p>
<p><strong>Adjacency diagrams</strong> show topology through the relative placement of nodes. They may also encode a quantitative dimension in the area of each node, for example to show revenue or file size. The <a class="reference external" href="#partition">“icicle” diagram</a> uses rectangles, while the “sunburst” uses annular segments.</p>
<p><strong>Enclosure diagrams</strong> also use an area encoding, but show topology through containment. A <a class="reference external" href="#treemap">treemap</a> recursively subdivides area into rectangles. <a class="reference external" href="#pack">Circle-packing</a> tightly nests circles; this is not as space-efficient as a treemap, but perhaps more readily shows topology.</p>
<p>A good hierarchical visualization facilitates rapid multiscale inference: micro-observations of individual elements and macro-observations of large groups.</p>
<div class="section" id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<p>If you use NPM, <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">d3-hierarchy</span></code>. Otherwise, download the <a class="reference external" href="https://github.com/d3/d3-hierarchy/releases/latest">latest release</a>. You can also load directly from <a class="reference external" href="https://d3js.org">d3js.org</a>, either as a <a class="reference external" href="https://d3js.org/d3-hierarchy.v1.min.js">standalone library</a> or as part of <a class="reference external" href="https://github.com/d3/d3">D3</a>. AMD, CommonJS, and vanilla environments are supported. In vanilla, a <code class="docutils literal notranslate"><span class="pre">d3</span></code> global is exported:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://d3js.org/d3-hierarchy.v1.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="kd">var</span> <span class="nx">treemap</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">treemap</span><span class="p">();</span>

<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#hierarchy">Hierarchy</a> (<a class="reference external" href="#stratify">Stratify</a>)</p></li>
<li><p><a class="reference external" href="#cluster">Cluster</a></p></li>
<li><p><a class="reference external" href="#tree">Tree</a></p></li>
<li><p><a class="reference external" href="#treemap">Treemap</a> (<a class="reference external" href="#treemap-tiling">Treemap Tiling</a>)</p></li>
<li><p><a class="reference external" href="#partition">Partition</a></p></li>
<li><p><a class="reference external" href="#pack">Pack</a></p></li>
</ul>
<div class="section" id="hierarchy">
<h3>Hierarchy<a class="headerlink" href="#hierarchy" title="Permalink to this headline">¶</a></h3>
<p>Before you can compute a hierarchical layout, you need a root node. If your data is already in a hierarchical format, such as JSON, you can pass it directly to <a class="reference external" href="#hierarchy">d3.hierarchy</a>; otherwise, you can rearrange tabular data, such as comma-separated values (CSV), into a hierarchy using <a class="reference external" href="#stratify">d3.stratify</a>.</p>
<p><a name="hierarchy" href="#hierarchy">#</a> d3.<b>hierarchy</b>(<i>data</i>[, <i>children</i>]) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/index.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-hierarchy">Examples</a></p>
<p>Constructs a root node from the specified hierarchical <em>data</em>. The specified <em>data</em> must be an object representing the root node. For example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Eve&quot;</span><span class="p">,</span>
  <span class="nt">&quot;children&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Cain&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Seth&quot;</span><span class="p">,</span>
      <span class="nt">&quot;children&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Enos&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Noam&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Abel&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Awan&quot;</span><span class="p">,</span>
      <span class="nt">&quot;children&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Enoch&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Azura&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The specified <em>children</em> accessor function is invoked for each datum, starting with the root <em>data</em>, and must return an array of data representing the children, or null if the current datum has no children. If <em>children</em> is not specified, it defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">children</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The returned node and each descendant has the following properties:</p>
<ul class="simple">
<li><p><em>node</em>.data - the associated data, as specified to the <a class="reference external" href="#hierarchy">constructor</a>.</p></li>
<li><p><em>node</em>.depth - zero for the root node, and increasing by one for each descendant generation.</p></li>
<li><p><em>node</em>.height - zero for leaf nodes, and the greatest distance from any descendant leaf for internal nodes.</p></li>
<li><p><em>node</em>.parent - the parent node, or null for the root node.</p></li>
<li><p><em>node</em>.children - an array of child nodes, if any; undefined for leaf nodes.</p></li>
<li><p><em>node</em>.value - the summed value of the node and its <a class="reference external" href="#node_descendants">descendants</a>; optional, see <a class="reference external" href="#node_sum"><em>node</em>.sum</a> and <a class="reference external" href="#node_count"><em>node</em>.count</a>.</p></li>
</ul>
<p>This method can also be used to test if a node is an <code class="docutils literal notranslate"><span class="pre">instanceof</span> <span class="pre">d3.hierarchy</span></code> and to extend the node prototype.</p>
<p><a name="node_ancestors" href="#node_ancestors">#</a> <i>node</i>.<b>ancestors</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/ancestors.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-hierarchy">Examples</a></p>
<p>Returns the array of ancestors nodes, starting with this node, then followed by each parent up to the root.</p>
<p><a name="node_descendants" href="#node_descendants">#</a> <i>node</i>.<b>descendants</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/descendants.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-hierarchy">Examples</a></p>
<p>Returns the array of descendant nodes, starting with this node, then followed by each child in topological order.</p>
<p><a name="node_leaves" href="#node_leaves">#</a> <i>node</i>.<b>leaves</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/leaves.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-hierarchy">Examples</a></p>
<p>Returns the array of leaf nodes in traversal order; leaves are nodes with no children.</p>
<p><a name="node_path" href="#node_path">#</a> <i>node</i>.<b>path</b>(<i>target</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/path.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-hierarchy">Examples</a></p>
<p>Returns the shortest path through the hierarchy from this <em>node</em> to the specified <em>target</em> node. The path starts at this <em>node</em>, ascends to the least common ancestor of this <em>node</em> and the <em>target</em> node, and then descends to the <em>target</em> node. This is particularly useful for <a class="reference external" href="https://observablehq.com/&#64;d3/hierarchical-edge-bundling">hierarchical edge bundling</a>.</p>
<p><a name="node_links" href="#node_links">#</a> <i>node</i>.<b>links</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/links.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-hierarchy">Examples</a></p>
<p>Returns an array of links for this <em>node</em>, where each <em>link</em> is an object that defines source and target properties. The source of each link is the parent node, and the target is a child node.</p>
<p><a name="node_sum" href="#node_sum">#</a> <i>node</i>.<b>sum</b>(<i>value</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/sum.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/visiting-a-d3-hierarchy">Examples</a></p>
<p>Evaluates the specified <em>value</em> function for this <em>node</em> and each descendant in <a class="reference external" href="#node_eachAfter">post-order traversal</a>, and returns this <em>node</em>. The <em>node</em>.value property of each node is set to the numeric value returned by the specified function plus the combined value of all children. The function is passed the node’s data, and must return a non-negative number. The <em>value</em> accessor is evaluated for <em>node</em> and every descendant, including internal nodes; if you only want leaf nodes to have internal value, then return zero for any node with children. <a class="reference external" href="https://observablehq.com/&#64;d3/treemap-by-count">For example</a>, as an alternative to <a class="reference external" href="#node_count"><em>node</em>.count</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">root</span><span class="p">.</span><span class="nx">sum</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">value</span> <span class="o">?</span> <span class="mf">1</span> <span class="o">:</span> <span class="mf">0</span><span class="p">;</span> <span class="p">});</span>
</pre></div>
</div>
<p>You must call <em>node</em>.sum or <a class="reference external" href="#node_count"><em>node</em>.count</a> before invoking a hierarchical layout that requires <em>node</em>.value, such as <a class="reference external" href="#treemap">d3.treemap</a>. Since the API supports <a class="reference external" href="https://en.wikipedia.org/wiki/Method_chaining">method chaining</a>, you can invoke <em>node</em>.sum and <a class="reference external" href="#node_sort"><em>node</em>.sort</a> before computing the layout, and then subsequently generate an array of all <a class="reference external" href="#node_descendants">descendant nodes</a> like so:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">treemap</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">treemap</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">size</span><span class="p">([</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">padding</span><span class="p">(</span><span class="mf">2</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="nx">treemap</span><span class="p">(</span><span class="nx">root</span>
    <span class="p">.</span><span class="nx">sum</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">height</span> <span class="o">||</span> <span class="nx">b</span><span class="p">.</span><span class="nx">value</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="p">}))</span>
  <span class="p">.</span><span class="nx">descendants</span><span class="p">();</span>
</pre></div>
</div>
<p>This example assumes that the node data has a value field.</p>
<p><a name="node_count" href="#node_count">#</a> <i>node</i>.<b>count</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/count.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/visiting-a-d3-hierarchy">Examples</a></p>
<p>Computes the number of leaves under this <em>node</em> and assigns it to <em>node</em>.value, and similarly for every descendant of <em>node</em>. If this <em>node</em> is a leaf, its count is one. Returns this <em>node</em>. See also <a class="reference external" href="#node_sum"><em>node</em>.sum</a>.</p>
<p><a name="node_sort" href="#node_sort">#</a> <i>node</i>.<b>sort</b>(<i>compare</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/sort.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/visiting-a-d3-hierarchy">Examples</a></p>
<p>Sorts the children of this <em>node</em>, if any, and each of this <em>node</em>’s descendants’ children, in <a class="reference external" href="#node_eachBefore">pre-order traversal</a> using the specified <em>compare</em> function, and returns this <em>node</em>. The specified function is passed two nodes <em>a</em> and <em>b</em> to compare. If <em>a</em> should be before <em>b</em>, the function must return a value less than zero; if <em>b</em> should be before <em>a</em>, the function must return a value greater than zero; otherwise, the relative order of <em>a</em> and <em>b</em> are not specified. See <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort"><em>array</em>.sort</a> for more.</p>
<p>Unlike <a class="reference external" href="#node_sum"><em>node</em>.sum</a>, the <em>compare</em> function is passed two <a class="reference external" href="#hierarchy">nodes</a> rather than two nodes’ data. For example, if the data has a value property, this sorts nodes by the descending aggregate value of the node and all its descendants, as is recommended for <a class="reference external" href="#pack">circle-packing</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">root</span>
    <span class="p">.</span><span class="nx">sum</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">value</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="p">});</span>
</pre></div>
</div>
<p>Similarly, to sort nodes by descending height (greatest distance from any descendant leaf) and then descending value, as is recommended for <a class="reference external" href="#treemap">treemaps</a> and <a class="reference external" href="#partition">icicles</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">root</span>
    <span class="p">.</span><span class="nx">sum</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">height</span> <span class="o">||</span> <span class="nx">b</span><span class="p">.</span><span class="nx">value</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="p">});</span>
</pre></div>
</div>
<p>To sort nodes by descending height and then ascending id, as is recommended for <a class="reference external" href="#tree">trees</a> and <a class="reference external" href="#cluster">dendrograms</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">root</span>
    <span class="p">.</span><span class="nx">sum</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">height</span> <span class="o">||</span> <span class="nx">a</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span> <span class="p">});</span>
</pre></div>
</div>
<p>You must call <em>node</em>.sort before invoking a hierarchical layout if you want the new sort order to affect the layout; see <a class="reference external" href="#node_sum"><em>node</em>.sum</a> for an example.</p>
<p><a name="node_each" href="#node_each">#</a> <i>node</i>.<b>each</b>(<i>function</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/each.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/visiting-a-d3-hierarchy">Examples</a></p>
<p>Invokes the specified <em>function</em> for <em>node</em> and each descendant in <a class="reference external" href="https://en.wikipedia.org/wiki/Breadth-first_search">breadth-first order</a>, such that a given <em>node</em> is only visited if all nodes of lesser depth have already been visited, as well as all preceding nodes of the same depth. The specified function is passed the current <em>node</em>.</p>
<p><a name="node_eachAfter" href="#node_eachAfter">#</a> <i>node</i>.<b>eachAfter</b>(<i>function</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/eachAfter.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/visiting-a-d3-hierarchy">Examples</a></p>
<p>Invokes the specified <em>function</em> for <em>node</em> and each descendant in <a class="reference external" href="https://en.wikipedia.org/wiki/Tree_traversal#Post-order">post-order traversal</a>, such that a given <em>node</em> is only visited after all of its descendants have already been visited. The specified function is passed the current <em>node</em>.</p>
<p><a name="node_eachBefore" href="#node_eachBefore">#</a> <i>node</i>.<b>eachBefore</b>(<i>function</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/eachBefore.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/visiting-a-d3-hierarchy">Examples</a></p>
<p>Invokes the specified <em>function</em> for <em>node</em> and each descendant in <a class="reference external" href="https://en.wikipedia.org/wiki/Tree_traversal#Pre-order">pre-order traversal</a>, such that a given <em>node</em> is only visited after all of its ancestors have already been visited. The specified function is passed the current <em>node</em>.</p>
<p><a name="node_copy" href="#node_copy">#</a> <i>node</i>.<b>copy</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/hierarchy/index.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-hierarchy">Examples</a></p>
<p>Return a deep copy of the subtree starting at this <em>node</em>. (The returned deep copy shares the same data, however.) The returned node is the root of a new tree; the returned node’s parent is always null and its depth is always zero.</p>
<div class="section" id="stratify">
<h4>Stratify<a class="headerlink" href="#stratify" title="Permalink to this headline">¶</a></h4>
<p>Consider the following table of relationships:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Parent</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Eve</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Cain</p></td>
<td><p>Eve</p></td>
</tr>
<tr class="row-even"><td><p>Seth</p></td>
<td><p>Eve</p></td>
</tr>
<tr class="row-odd"><td><p>Enos</p></td>
<td><p>Seth</p></td>
</tr>
<tr class="row-even"><td><p>Noam</p></td>
<td><p>Seth</p></td>
</tr>
<tr class="row-odd"><td><p>Abel</p></td>
<td><p>Eve</p></td>
</tr>
<tr class="row-even"><td><p>Awan</p></td>
<td><p>Eve</p></td>
</tr>
<tr class="row-odd"><td><p>Enoch</p></td>
<td><p>Awan</p></td>
</tr>
<tr class="row-even"><td><p>Azura</p></td>
<td><p>Eve</p></td>
</tr>
</tbody>
</table>
<p>These names are conveniently unique, so we can unambiguously represent the hierarchy as a CSV file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span><span class="p">,</span><span class="n">parent</span>
<span class="n">Eve</span><span class="p">,</span>
<span class="n">Cain</span><span class="p">,</span><span class="n">Eve</span>
<span class="n">Seth</span><span class="p">,</span><span class="n">Eve</span>
<span class="n">Enos</span><span class="p">,</span><span class="n">Seth</span>
<span class="n">Noam</span><span class="p">,</span><span class="n">Seth</span>
<span class="n">Abel</span><span class="p">,</span><span class="n">Eve</span>
<span class="n">Awan</span><span class="p">,</span><span class="n">Eve</span>
<span class="n">Enoch</span><span class="p">,</span><span class="n">Awan</span>
<span class="n">Azura</span><span class="p">,</span><span class="n">Eve</span>
</pre></div>
</div>
<p>To parse the CSV using <a class="reference external" href="https://github.com/d3/d3-dsv#csvParse">d3.csvParse</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">table</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">csvParse</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
</pre></div>
</div>
<p>This returns:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Eve&quot;</span><span class="p">,</span>   <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Cain&quot;</span><span class="p">,</span>  <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;Eve&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Seth&quot;</span><span class="p">,</span>  <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;Eve&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Enos&quot;</span><span class="p">,</span>  <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;Seth&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Noam&quot;</span><span class="p">,</span>  <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;Seth&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Abel&quot;</span><span class="p">,</span>  <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;Eve&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Awan&quot;</span><span class="p">,</span>  <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;Eve&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Enoch&quot;</span><span class="p">,</span> <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;Awan&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Azura&quot;</span><span class="p">,</span> <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="s2">&quot;Eve&quot;</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>To convert to a hierarchy:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">stratify</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">parentId</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">(</span><span class="nx">table</span><span class="p">);</span>
</pre></div>
</div>
<p>This returns:</p>
<p><a class="reference external" href="https://runkit.com/mbostock/56fed33d8630b01300f72daa"><img alt="Stratify" src="https://raw.githubusercontent.com/d3/d3-hierarchy/master/img/stratify.png"></a></p>
<p>This hierarchy can now be passed to a hierarchical layout, such as <a class="reference external" href="#_tree">d3.tree</a>, for visualization.</p>
<p><a name="stratify" href="#stratify">#</a> d3.<b>stratify</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/stratify.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-stratify">Examples</a></p>
<p>Constructs a new stratify operator with the default settings.</p>
<p><a name="_stratify" href="#_stratify">#</a> <i>stratify</i>(<i>data</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/stratify.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-stratify">Examples</a></p>
<p>Generates a new hierarchy from the specified tabular <em>data</em>.</p>
<p><a name="stratify_id" href="#stratify_id">#</a> <i>stratify</i>.<b>id</b>([<i>id</i>]) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/stratify.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-stratify">Examples</a></p>
<p>If <em>id</em> is specified, sets the id accessor to the given function and returns this stratify operator. Otherwise, returns the current id accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">id</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The id accessor is invoked for each element in the input data passed to the <a class="reference external" href="#_stratify">stratify operator</a>, being passed the current datum (<em>d</em>) and the current index (<em>i</em>). The returned string is then used to identify the node’s relationships in conjunction with the <a class="reference external" href="#stratify_parentId">parent id</a>. For leaf nodes, the id may be undefined; otherwise, the id must be unique. (Null and the empty string are equivalent to undefined.)</p>
<p><a name="stratify_parentId" href="#stratify_parentId">#</a> <i>stratify</i>.<b>parentId</b>([<i>parentId</i>]) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/stratify.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-stratify">Examples</a></p>
<p>If <em>parentId</em> is specified, sets the parent id accessor to the given function and returns this stratify operator. Otherwise, returns the current parent id accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">parentId</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">parentId</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The parent id accessor is invoked for each element in the input data passed to the <a class="reference external" href="#_stratify">stratify operator</a>, being passed the current datum (<em>d</em>) and the current index (<em>i</em>). The returned string is then used to identify the node’s relationships in conjunction with the <a class="reference external" href="#stratify_id">id</a>. For the root node, the parent id should be undefined. (Null and the empty string are equivalent to undefined.) There must be exactly one root node in the input data, and no circular relationships.</p>
</div>
</div>
<div class="section" id="cluster">
<h3>Cluster<a class="headerlink" href="#cluster" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://observablehq.com/&#64;d3/cluster-dendrogram"><img alt="Dendrogram" src="https://raw.githubusercontent.com/d3/d3-hierarchy/master/img/cluster.png"></a></p>
<p>The <strong>cluster layout</strong> produces <a class="reference external" href="http://en.wikipedia.org/wiki/Dendrogram">dendrograms</a>: node-link diagrams that place leaf nodes of the tree at the same depth. Dendrograms are typically less compact than <a class="reference external" href="#tree">tidy trees</a>, but are useful when all the leaves should be at the same level, such as for hierarchical clustering or <a class="reference external" href="https://observablehq.com/&#64;mbostock/tree-of-life">phylogenetic tree diagrams</a>.</p>
<p><a name="cluster" href="#cluster">#</a> d3.<b>cluster</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/cluster.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/cluster-dendrogram">Examples</a></p>
<p>Creates a new cluster layout with default settings.</p>
<p><a name="_cluster" href="#_cluster">#</a> <i>cluster</i>(<i>root</i>)</p>
<p>Lays out the specified <em>root</em> <a class="reference external" href="#hierarchy">hierarchy</a>, assigning the following properties on <em>root</em> and its descendants:</p>
<ul class="simple">
<li><p><em>node</em>.x - the <em>x</em>-coordinate of the node</p></li>
<li><p><em>node</em>.y - the <em>y</em>-coordinate of the node</p></li>
</ul>
<p>The coordinates <em>x</em> and <em>y</em> represent an arbitrary coordinate system; for example, you can treat <em>x</em> as an angle and <em>y</em> as a radius to produce a <a class="reference external" href="https://observablehq.com/&#64;d3/radial-dendrogram">radial layout</a>. You may want to call <a class="reference external" href="#node_sort"><em>root</em>.sort</a> before passing the hierarchy to the cluster layout.</p>
<p><a name="cluster_size" href="#cluster_size">#</a> <i>cluster</i>.<b>size</b>([<i>size</i>])</p>
<p>If <em>size</em> is specified, sets this cluster layout’s size to the specified two-element array of numbers [<em>width</em>, <em>height</em>] and returns this cluster layout. If <em>size</em> is not specified, returns the current layout size, which defaults to [1, 1]. A layout size of null indicates that a <a class="reference external" href="#cluster_nodeSize">node size</a> will be used instead. The coordinates <em>x</em> and <em>y</em> represent an arbitrary coordinate system; for example, to produce a <a class="reference external" href="https://observablehq.com/&#64;d3/radial-dendrogram">radial layout</a>, a size of [360, <em>radius</em>] corresponds to a breadth of 360° and a depth of <em>radius</em>.</p>
<p><a name="cluster_nodeSize" href="#cluster_nodeSize">#</a> <i>cluster</i>.<b>nodeSize</b>([<i>size</i>])</p>
<p>If <em>size</em> is specified, sets this cluster layout’s node size to the specified two-element array of numbers [<em>width</em>, <em>height</em>] and returns this cluster layout. If <em>size</em> is not specified, returns the current node size, which defaults to null. A node size of null indicates that a <a class="reference external" href="#cluster_size">layout size</a> will be used instead. When a node size is specified, the root node is always positioned at ⟨0, 0⟩.</p>
<p><a name="cluster_separation" href="#cluster_separation">#</a> <i>cluster</i>.<b>separation</b>([<i>separation</i>])</p>
<p>If <em>separation</em> is specified, sets the separation accessor to the specified function and returns this cluster layout. If <em>separation</em> is not specified, returns the current separation accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">separation</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">parent</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">parent</span> <span class="o">?</span> <span class="mf">1</span> <span class="o">:</span> <span class="mf">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The separation accessor is used to separate neighboring leaves. The separation function is passed two leaves <em>a</em> and <em>b</em>, and must return the desired separation. The nodes are typically siblings, though the nodes may be more distantly related if the layout decides to place such nodes adjacent.</p>
</div>
<div class="section" id="tree">
<h3>Tree<a class="headerlink" href="#tree" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://observablehq.com/&#64;d3/tidy-tree"><img alt="Tidy Tree" src="https://raw.githubusercontent.com/d3/d3-hierarchy/master/img/tree.png"></a></p>
<p>The <strong>tree</strong> layout produces tidy node-link diagrams of trees using the <a class="reference external" href="http://reingold.co/tidier-drawings.pdf">Reingold–Tilford “tidy” algorithm</a>, improved to run in linear time by <a class="reference external" href="http://dirk.jivas.de/papers/buchheim02improving.pdf">Buchheim <em>et al.</em></a> Tidy trees are typically more compact than <a class="reference external" href="#cluster">dendrograms</a>.</p>
<p><a name="tree" href="#tree">#</a> d3.<b>tree</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/tree.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/tidy-tree">Examples</a></p>
<p>Creates a new tree layout with default settings.</p>
<p><a name="_tree" href="#_tree">#</a> <i>tree</i>(<i>root</i>)</p>
<p>Lays out the specified <em>root</em> <a class="reference external" href="#hierarchy">hierarchy</a>, assigning the following properties on <em>root</em> and its descendants:</p>
<ul class="simple">
<li><p><em>node</em>.x - the <em>x</em>-coordinate of the node</p></li>
<li><p><em>node</em>.y - the <em>y</em>-coordinate of the node</p></li>
</ul>
<p>The coordinates <em>x</em> and <em>y</em> represent an arbitrary coordinate system; for example, you can treat <em>x</em> as an angle and <em>y</em> as a radius to produce a <a class="reference external" href="https://observablehq.com/&#64;d3/radial-tidy-tree">radial layout</a>. You may want to call <a class="reference external" href="#node_sort"><em>root</em>.sort</a> before passing the hierarchy to the tree layout.</p>
<p><a name="tree_size" href="#tree_size">#</a> <i>tree</i>.<b>size</b>([<i>size</i>])</p>
<p>If <em>size</em> is specified, sets this tree layout’s size to the specified two-element array of numbers [<em>width</em>, <em>height</em>] and returns this tree layout. If <em>size</em> is not specified, returns the current layout size, which defaults to [1, 1]. A layout size of null indicates that a <a class="reference external" href="#tree_nodeSize">node size</a> will be used instead. The coordinates <em>x</em> and <em>y</em> represent an arbitrary coordinate system; for example, to produce a <a class="reference external" href="https://observablehq.com/&#64;d3/radial-tidy-tree">radial layout</a>, a size of [360, <em>radius</em>] corresponds to a breadth of 360° and a depth of <em>radius</em>.</p>
<p><a name="tree_nodeSize" href="#tree_nodeSize">#</a> <i>tree</i>.<b>nodeSize</b>([<i>size</i>])</p>
<p>If <em>size</em> is specified, sets this tree layout’s node size to the specified two-element array of numbers [<em>width</em>, <em>height</em>] and returns this tree layout. If <em>size</em> is not specified, returns the current node size, which defaults to null. A node size of null indicates that a <a class="reference external" href="#tree_size">layout size</a> will be used instead. When a node size is specified, the root node is always positioned at ⟨0, 0⟩.</p>
<p><a name="tree_separation" href="#tree_separation">#</a> <i>tree</i>.<b>separation</b>([<i>separation</i>])</p>
<p>If <em>separation</em> is specified, sets the separation accessor to the specified function and returns this tree layout. If <em>separation</em> is not specified, returns the current separation accessor, which defaults to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">separation</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">parent</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">parent</span> <span class="o">?</span> <span class="mf">1</span> <span class="o">:</span> <span class="mf">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A variation that is more appropriate for radial layouts reduces the separation gap proportionally to the radius:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">separation</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">parent</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">parent</span> <span class="o">?</span> <span class="mf">1</span> <span class="o">:</span> <span class="mf">2</span><span class="p">)</span> <span class="o">/</span> <span class="nx">a</span><span class="p">.</span><span class="nx">depth</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The separation accessor is used to separate neighboring nodes. The separation function is passed two nodes <em>a</em> and <em>b</em>, and must return the desired separation. The nodes are typically siblings, though the nodes may be more distantly related if the layout decides to place such nodes adjacent.</p>
</div>
<div class="section" id="treemap">
<h3>Treemap<a class="headerlink" href="#treemap" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://observablehq.com/&#64;d3/treemap"><img alt="Treemap" src="https://raw.githubusercontent.com/d3/d3-hierarchy/master/img/treemap.png"></a></p>
<p>Introduced by <a class="reference external" href="http://www.cs.umd.edu/hcil/treemap-history/">Ben Shneiderman</a> in 1991, a <strong>treemap</strong> recursively subdivides area into rectangles according to each node’s associated value. D3’s treemap implementation supports an extensible <a class="reference external" href="#treemap_tile">tiling method</a>: the default <a class="reference external" href="#treemapSquarify">squarified</a> method seeks to generate rectangles with a <a class="reference external" href="https://en.wikipedia.org/wiki/Golden_ratio">golden</a> aspect ratio; this offers better readability and size estimation than <a class="reference external" href="#treemapSliceDice">slice-and-dice</a>, which simply alternates between horizontal and vertical subdivision by depth.</p>
<p><a name="treemap" href="#treemap">#</a> d3.<b>treemap</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/treemap/index.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/treemap">Examples</a></p>
<p>Creates a new treemap layout with default settings.</p>
<p><a name="_treemap" href="#_treemap">#</a> <i>treemap</i>(<i>root</i>)</p>
<p>Lays out the specified <em>root</em> <a class="reference external" href="#hierarchy">hierarchy</a>, assigning the following properties on <em>root</em> and its descendants:</p>
<ul class="simple">
<li><p><em>node</em>.x0 - the left edge of the rectangle</p></li>
<li><p><em>node</em>.y0 - the top edge of the rectangle</p></li>
<li><p><em>node</em>.x1 - the right edge of the rectangle</p></li>
<li><p><em>node</em>.y1 - the bottom edge of the rectangle</p></li>
</ul>
<p>You must call <a class="reference external" href="#node_sum"><em>root</em>.sum</a> before passing the hierarchy to the treemap layout. You probably also want to call <a class="reference external" href="#node_sort"><em>root</em>.sort</a> to order the hierarchy before computing the layout.</p>
<p><a name="treemap_tile" href="#treemap_tile">#</a> <i>treemap</i>.<b>tile</b>([<i>tile</i>])</p>
<p>If <em>tile</em> is specified, sets the <a class="reference external" href="#treemap-tiling">tiling method</a> to the specified function and returns this treemap layout. If <em>tile</em> is not specified, returns the current tiling method, which defaults to <a class="reference external" href="#treemapSquarify">d3.treemapSquarify</a> with the golden ratio.</p>
<p><a name="treemap_size" href="#treemap_size">#</a> <i>treemap</i>.<b>size</b>([<i>size</i>])</p>
<p>If <em>size</em> is specified, sets this treemap layout’s size to the specified two-element array of numbers [<em>width</em>, <em>height</em>] and returns this treemap layout. If <em>size</em> is not specified, returns the current size, which defaults to [1, 1].</p>
<p><a name="treemap_round" href="#treemap_round">#</a> <i>treemap</i>.<b>round</b>([<i>round</i>])</p>
<p>If <em>round</em> is specified, enables or disables rounding according to the given boolean and returns this treemap layout. If <em>round</em> is not specified, returns the current rounding state, which defaults to false.</p>
<p><a name="treemap_padding" href="#treemap_padding">#</a> <i>treemap</i>.<b>padding</b>([<i>padding</i>])</p>
<p>If <em>padding</em> is specified, sets the <a class="reference external" href="#treemap_paddingInner">inner</a> and <a class="reference external" href="#treemap_paddingOuter">outer</a> padding to the specified number or function and returns this treemap layout. If <em>padding</em> is not specified, returns the current inner padding function.</p>
<p><a name="treemap_paddingInner" href="#treemap_paddingInner">#</a> <i>treemap</i>.<b>paddingInner</b>([<i>padding</i>])</p>
<p>If <em>padding</em> is specified, sets the inner padding to the specified number or function and returns this treemap layout. If <em>padding</em> is not specified, returns the current inner padding function, which defaults to the constant zero. If <em>padding</em> is a function, it is invoked for each node with children, being passed the current node. The inner padding is used to separate a node’s adjacent children.</p>
<p><a name="treemap_paddingOuter" href="#treemap_paddingOuter">#</a> <i>treemap</i>.<b>paddingOuter</b>([<i>padding</i>])</p>
<p>If <em>padding</em> is specified, sets the <a class="reference external" href="#treemap_paddingTop">top</a>, <a class="reference external" href="#treemap_paddingRight">right</a>, <a class="reference external" href="#treemap_paddingBottom">bottom</a> and <a class="reference external" href="#treemap_paddingLeft">left</a> padding to the specified number or function and returns this treemap layout. If <em>padding</em> is not specified, returns the current top padding function.</p>
<p><a name="treemap_paddingTop" href="#treemap_paddingTop">#</a> <i>treemap</i>.<b>paddingTop</b>([<i>padding</i>])</p>
<p>If <em>padding</em> is specified, sets the top padding to the specified number or function and returns this treemap layout. If <em>padding</em> is not specified, returns the current top padding function, which defaults to the constant zero. If <em>padding</em> is a function, it is invoked for each node with children, being passed the current node. The top padding is used to separate the top edge of a node from its children.</p>
<p><a name="treemap_paddingRight" href="#treemap_paddingRight">#</a> <i>treemap</i>.<b>paddingRight</b>([<i>padding</i>])</p>
<p>If <em>padding</em> is specified, sets the right padding to the specified number or function and returns this treemap layout. If <em>padding</em> is not specified, returns the current right padding function, which defaults to the constant zero. If <em>padding</em> is a function, it is invoked for each node with children, being passed the current node. The right padding is used to separate the right edge of a node from its children.</p>
<p><a name="treemap_paddingBottom" href="#treemap_paddingBottom">#</a> <i>treemap</i>.<b>paddingBottom</b>([<i>padding</i>])</p>
<p>If <em>padding</em> is specified, sets the bottom padding to the specified number or function and returns this treemap layout. If <em>padding</em> is not specified, returns the current bottom padding function, which defaults to the constant zero. If <em>padding</em> is a function, it is invoked for each node with children, being passed the current node. The bottom padding is used to separate the bottom edge of a node from its children.</p>
<p><a name="treemap_paddingLeft" href="#treemap_paddingLeft">#</a> <i>treemap</i>.<b>paddingLeft</b>([<i>padding</i>])</p>
<p>If <em>padding</em> is specified, sets the left padding to the specified number or function and returns this treemap layout. If <em>padding</em> is not specified, returns the current left padding function, which defaults to the constant zero. If <em>padding</em> is a function, it is invoked for each node with children, being passed the current node. The left padding is used to separate the left edge of a node from its children.</p>
<div class="section" id="treemap-tiling">
<h4>Treemap Tiling<a class="headerlink" href="#treemap-tiling" title="Permalink to this headline">¶</a></h4>
<p>Several built-in tiling methods are provided for use with <a class="reference external" href="#treemap_tile"><em>treemap</em>.tile</a>.</p>
<p><a name="treemapBinary" href="#treemapBinary">#</a> d3.<b>treemapBinary</b>(<i>node</i>, <i>x0</i>, <i>y0</i>, <i>x1</i>, <i>y1</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/treemap/binary.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/treemap">Examples</a></p>
<p>Recursively partitions the specified <em>nodes</em> into an approximately-balanced binary tree, choosing horizontal partitioning for wide rectangles and vertical partitioning for tall rectangles.</p>
<p><a name="treemapDice" href="#treemapDice">#</a> d3.<b>treemapDice</b>(<i>node</i>, <i>x0</i>, <i>y0</i>, <i>x1</i>, <i>y1</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/treemap/dice.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/treemap">Examples</a></p>
<p>Divides the rectangular area specified by <em>x0</em>, <em>y0</em>, <em>x1</em>, <em>y1</em> horizontally according the value of each of the specified <em>node</em>’s children. The children are positioned in order, starting with the left edge (<em>x0</em>) of the given rectangle. If the sum of the children’s values is less than the specified <em>node</em>’s value (<em>i.e.</em>, if the specified <em>node</em> has a non-zero internal value), the remaining empty space will be positioned on the right edge (<em>x1</em>) of the given rectangle.</p>
<p><a name="treemapSlice" href="#treemapSlice">#</a> d3.<b>treemapSlice</b>(<i>node</i>, <i>x0</i>, <i>y0</i>, <i>x1</i>, <i>y1</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/treemap/slice.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/treemap">Examples</a></p>
<p>Divides the rectangular area specified by <em>x0</em>, <em>y0</em>, <em>x1</em>, <em>y1</em> vertically according the value of each of the specified <em>node</em>’s children. The children are positioned in order, starting with the top edge (<em>y0</em>) of the given rectangle. If the sum of the children’s values is less than the specified <em>node</em>’s value (<em>i.e.</em>, if the specified <em>node</em> has a non-zero internal value), the remaining empty space will be positioned on the bottom edge (<em>y1</em>) of the given rectangle.</p>
<p><a name="treemapSliceDice" href="#treemapSliceDice">#</a> d3.<b>treemapSliceDice</b>(<i>node</i>, <i>x0</i>, <i>y0</i>, <i>x1</i>, <i>y1</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/treemap/sliceDice.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/treemap">Examples</a></p>
<p>If the specified <em>node</em> has odd depth, delegates to <a class="reference external" href="#treemapSlice">treemapSlice</a>; otherwise delegates to <a class="reference external" href="#treemapDice">treemapDice</a>.</p>
<p><a name="treemapSquarify" href="#treemapSquarify">#</a> d3.<b>treemapSquarify</b>(<i>node</i>, <i>x0</i>, <i>y0</i>, <i>x1</i>, <i>y1</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/treemap/squarify.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/treemap">Examples</a></p>
<p>Implements the <a class="reference external" href="https://www.win.tue.nl/~vanwijk/stm.pdf">squarified treemap</a> algorithm by Bruls <em>et al.</em>, which seeks to produce rectangles of a given <a class="reference external" href="#squarify_ratio">aspect ratio</a>.</p>
<p><a name="treemapResquarify" href="#treemapResquarify">#</a> d3.<b>treemapResquarify</b>(<i>node</i>, <i>x0</i>, <i>y0</i>, <i>x1</i>, <i>y1</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/treemap/resquarify.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/animated-treemap">Examples</a></p>
<p>Like <a class="reference external" href="#treemapSquarify">d3.treemapSquarify</a>, except preserves the topology (node adjacencies) of the previous layout computed by d3.treemapResquarify, if there is one and it used the same <a class="reference external" href="#squarify_ratio">target aspect ratio</a>. This tiling method is good for animating changes to treemaps because it only changes node sizes and not their relative positions, thus avoiding distracting shuffling and occlusion. The downside of a stable update, however, is a suboptimal layout for subsequent updates: only the first layout uses the Bruls <em>et al.</em> squarified algorithm.</p>
<p><a name="squarify_ratio" href="#squarify_ratio">#</a> <i>squarify</i>.<b>ratio</b>(<i>ratio</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/treemap/squarify.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/treemap">Examples</a></p>
<p>Specifies the desired aspect ratio of the generated rectangles. The <em>ratio</em> must be specified as a number greater than or equal to one. Note that the orientation of the generated rectangles (tall or wide) is not implied by the ratio; for example, a ratio of two will attempt to produce a mixture of rectangles whose <em>width</em>:<em>height</em> ratio is either 2:1 or 1:2. (However, you can approximately achieve this result by generating a square treemap at different dimensions, and then <a class="reference external" href="https://observablehq.com/&#64;d3/stretched-treemap">stretching the treemap</a> to the desired aspect ratio.) Furthermore, the specified <em>ratio</em> is merely a hint to the tiling algorithm; the rectangles are not guaranteed to have the specified aspect ratio. If not specified, the aspect ratio defaults to the golden ratio, φ = (1 + sqrt(5)) / 2, per <a class="reference external" href="http://vis.stanford.edu/papers/perception-treemaps">Kong <em>et al.</em></a></p>
</div>
</div>
<div class="section" id="partition">
<h3>Partition<a class="headerlink" href="#partition" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://observablehq.com/&#64;d3/icicle"><img alt="Partition" src="https://raw.githubusercontent.com/d3/d3-hierarchy/master/img/partition.png"></a></p>
<p>The <strong>partition layout</strong> produces adjacency diagrams: a space-filling variant of a node-link tree diagram. Rather than drawing a link between parent and child in the hierarchy, nodes are drawn as solid areas (either arcs or rectangles), and their placement relative to other nodes reveals their position in the hierarchy. The size of the nodes encodes a quantitative dimension that would be difficult to show in a node-link diagram.</p>
<p><a name="partition" href="#partition">#</a> d3.<b>partition</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/partition.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/icicle">Examples</a></p>
<p>Creates a new partition layout with the default settings.</p>
<p><a name="_partition" href="#_partition">#</a> <i>partition</i>(<i>root</i>)</p>
<p>Lays out the specified <em>root</em> <a class="reference external" href="#hierarchy">hierarchy</a>, assigning the following properties on <em>root</em> and its descendants:</p>
<ul class="simple">
<li><p><em>node</em>.x0 - the left edge of the rectangle</p></li>
<li><p><em>node</em>.y0 - the top edge of the rectangle</p></li>
<li><p><em>node</em>.x1 - the right edge of the rectangle</p></li>
<li><p><em>node</em>.y1 - the bottom edge of the rectangle</p></li>
</ul>
<p>You must call <a class="reference external" href="#node_sum"><em>root</em>.sum</a> before passing the hierarchy to the partition layout. You probably also want to call <a class="reference external" href="#node_sort"><em>root</em>.sort</a> to order the hierarchy before computing the layout.</p>
<p><a name="partition_size" href="#partition_size">#</a> <i>partition</i>.<b>size</b>([<i>size</i>])</p>
<p>If <em>size</em> is specified, sets this partition layout’s size to the specified two-element array of numbers [<em>width</em>, <em>height</em>] and returns this partition layout. If <em>size</em> is not specified, returns the current size, which defaults to [1, 1].</p>
<p><a name="partition_round" href="#partition_round">#</a> <i>partition</i>.<b>round</b>([<i>round</i>])</p>
<p>If <em>round</em> is specified, enables or disables rounding according to the given boolean and returns this partition layout. If <em>round</em> is not specified, returns the current rounding state, which defaults to false.</p>
<p><a name="partition_padding" href="#partition_padding">#</a> <i>partition</i>.<b>padding</b>([<i>padding</i>])</p>
<p>If <em>padding</em> is specified, sets the padding to the specified number and returns this partition layout. If <em>padding</em> is not specified, returns the current padding, which defaults to zero. The padding is used to separate a node’s adjacent children.</p>
</div>
<div class="section" id="pack">
<h3>Pack<a class="headerlink" href="#pack" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://observablehq.com/&#64;d3/circle-packing"><img alt="Circle-Packing" src="https://raw.githubusercontent.com/d3/d3-hierarchy/master/img/pack.png"></a></p>
<p>Enclosure diagrams use containment (nesting) to represent a hierarchy. The size of the leaf circles encodes a quantitative dimension of the data. The enclosing circles show the approximate cumulative size of each subtree, but due to wasted space there is some distortion; only the leaf nodes can be compared accurately. Although <a class="reference external" href="http://en.wikipedia.org/wiki/Circle_packing">circle packing</a> does not use space as efficiently as a <a class="reference external" href="#treemap">treemap</a>, the “wasted” space more prominently reveals the hierarchical structure.</p>
<p><a name="pack" href="#pack">#</a> d3.<b>pack</b>() · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/pack/index.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/circle-packing">Examples</a></p>
<p>Creates a new pack layout with the default settings.</p>
<p><a name="_pack" href="#_pack">#</a> <i>pack</i>(<i>root</i>)</p>
<p>Lays out the specified <em>root</em> <a class="reference external" href="#hierarchy">hierarchy</a>, assigning the following properties on <em>root</em> and its descendants:</p>
<ul class="simple">
<li><p><em>node</em>.x - the <em>x</em>-coordinate of the circle’s center</p></li>
<li><p><em>node</em>.y - the <em>y</em>-coordinate of the circle’s center</p></li>
<li><p><em>node</em>.r - the radius of the circle</p></li>
</ul>
<p>You must call <a class="reference external" href="#node_sum"><em>root</em>.sum</a> before passing the hierarchy to the pack layout. You probably also want to call <a class="reference external" href="#node_sort"><em>root</em>.sort</a> to order the hierarchy before computing the layout.</p>
<p><a name="pack_radius" href="#pack_radius">#</a> <i>pack</i>.<b>radius</b>([<i>radius</i>])</p>
<p>If <em>radius</em> is specified, sets the pack layout’s radius accessor to the specified function and returns this pack layout. If <em>radius</em> is not specified, returns the current radius accessor, which defaults to null. If the radius accessor is null, the radius of each leaf circle is derived from the leaf <em>node</em>.value (computed by <a class="reference external" href="#node_sum"><em>node</em>.sum</a>); the radii are then scaled proportionally to fit the <a class="reference external" href="#pack_size">layout size</a>. If the radius accessor is not null, the radius of each leaf circle is specified exactly by the function.</p>
<p><a name="pack_size" href="#pack_size">#</a> <i>pack</i>.<b>size</b>([<i>size</i>])</p>
<p>If <em>size</em> is specified, sets this pack layout’s size to the specified two-element array of numbers [<em>width</em>, <em>height</em>] and returns this pack layout. If <em>size</em> is not specified, returns the current size, which defaults to [1, 1].</p>
<p><a name="pack_padding" href="#pack_padding">#</a> <i>pack</i>.<b>padding</b>([<i>padding</i>])</p>
<p>If <em>padding</em> is specified, sets this pack layout’s padding accessor to the specified number or function and returns this pack layout. If <em>padding</em> is not specified, returns the current padding accessor, which defaults to the constant zero. When siblings are packed, tangent siblings will be separated by approximately the specified padding; the enclosing parent circle will also be separated from its children by approximately the specified padding. If an <a class="reference external" href="#pack_radius">explicit radius</a> is not specified, the padding is approximate because a two-pass algorithm is needed to fit within the <a class="reference external" href="#pack_size">layout size</a>: the circles are first packed without padding; a scaling factor is computed and applied to the specified padding; and lastly the circles are re-packed with padding.</p>
<p><a name="packSiblings" href="#packSiblings">#</a> d3.<b>packSiblings</b>(<i>circles</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/pack/siblings.js">Source</a></p>
<p>Packs the specified array of <em>circles</em>, each of which must have a <em>circle</em>.r property specifying the circle’s radius. Assigns the following properties to each circle:</p>
<ul class="simple">
<li><p><em>circle</em>.x - the <em>x</em>-coordinate of the circle’s center</p></li>
<li><p><em>circle</em>.y - the <em>y</em>-coordinate of the circle’s center</p></li>
</ul>
<p>The circles are positioned according to the front-chain packing algorithm by <a class="reference external" href="https://dl.acm.org/citation.cfm?id=1124851">Wang <em>et al.</em></a></p>
<p><a name="packEnclose" href="#packEnclose">#</a> d3.<b>packEnclose</b>(<i>circles</i>) · <a class="reference external" href="https://github.com/d3/d3-hierarchy/blob/master/src/pack/enclose.js">Source</a>, <a class="reference external" href="https://observablehq.com/&#64;d3/d3-packenclose">Examples</a></p>
<p>Computes the <a class="reference external" href="https://en.wikipedia.org/wiki/Smallest-circle_problem">smallest circle</a> that encloses the specified array of <em>circles</em>, each of which must have a <em>circle</em>.r property specifying the circle’s radius, and <em>circle</em>.x and <em>circle</em>.y properties specifying the circle’s center. The enclosing circle is computed using the <a class="reference external" href="http://www.inf.ethz.ch/personal/emo/PublFiles/SubexLinProg_ALG16_96.pdf">Matoušek-Sharir-Welzl algorithm</a>. (See also <a class="reference external" href="https://bl.ocks.org/mbostock/751fdd637f4bc2e3f08b">Apollonius’ Problem</a>.)</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AyrtonB/ESDA-Spatial",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-d3-hierarchy-1.1.9-2f6bee24caaea43f8dc37545fa01628559647a83-integrity/node_modules/d3-hierarchy"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ayrton Bourn, Santiago De La Fuente, Clem Attwood, Joanna Kuleszo, Camilo Perico<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../../../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>