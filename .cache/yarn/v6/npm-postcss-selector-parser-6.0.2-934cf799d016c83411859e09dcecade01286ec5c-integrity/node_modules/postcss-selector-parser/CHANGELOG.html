
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>6.0.2 &#8212; Spatial Analysis for Energy</title>
    
  <link rel="stylesheet" href="../../../../../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  <img src="../../../../../../_static/logo.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Spatial Analysis for Energy</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Intro.html">
   UCL Energy Systems &amp; Data Analytics - Spatial Module
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/03-Working-with-Vector-Data.html">
   Working with Vector Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/04-Working-with-Raster-Data.html">
   Working with Raster Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Extensions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../extensions/01-Mapping-with-ggplot.html">
   Mapping with ggplot
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Setup.html">
   Set-Up Instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Jupyter-Anaconda.html">
   What is Jupyter/Anaconda?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/ESDA%20Course.html">
   ESDA Course
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-postcss-selector-parser-6.0.2-934cf799d016c83411859e09dcecade01286ec5c-integrity/node_modules/postcss-selector-parser/CHANGELOG.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   6.0.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   6.0.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   6.0.0
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id4">
   5.0.0
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rc-4">
   5.0.0-rc.4
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rc-1">
   5.0.0-rc.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rc-0">
   5.0.0-rc.0
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#summary-of-changes">
     Summary of Changes
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#changes-to-the-descendent-combinator">
       Changes to the Descendent Combinator
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#support-for-named-combinators">
       Support for “Named Combinators”
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#source-position-checks-and-lookups">
       Source position checks and lookups
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id5">
   4.0.0
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id6">
   3.1.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id7">
   3.1.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id8">
   3.1.0
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id9">
   3.0.0
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#breaking-changes">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-changes">
     Other changes
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#upgrade-hints">
       Upgrade hints
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id10">
   2.2.3
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id11">
   2.2.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id12">
   2.2.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id13">
   2.2.0
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id14">
   2.1.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id15">
   2.1.0
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id16">
   1.3.3
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id17">
   1.3.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id18">
   1.3.0
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id19">
   1.2.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id20">
   1.2.0
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id21">
   1.1.4
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id22">
   1.1.3
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id23">
   1.1.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id24">
   1.1.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id25">
   1.1.0
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id26">
   1.0.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id27">
   1.0.0
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id28">
   0.0.5
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id29">
   0.0.4
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id30">
   0.0.3
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id31">
   0.0.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id32">
   0.0.1
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="id1">
<h1>6.0.2<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixed an issue with parsing and stringifying an empty attribute value</p></li>
</ul>
</div>
<div class="section" id="id2">
<h1>6.0.1<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixed an issue with unicode surrogate pair parsing</p></li>
</ul>
</div>
<div class="section" id="id3">
<h1>6.0.0<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Updated: <code class="docutils literal notranslate"><span class="pre">cssesc</span></code> to 3.0.0 (major)</p></li>
<li><p>Fixed: Issues with escaped <code class="docutils literal notranslate"><span class="pre">id</span></code> and <code class="docutils literal notranslate"><span class="pre">class</span></code> selectors</p></li>
</ul>
</div>
<div class="section" id="id4">
<h1>5.0.0<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Allow escaped dot within class name.</p></li>
<li><p>Update PostCSS to 7.0.7 (patch)</p></li>
</ul>
</div>
<div class="section" id="rc-4">
<h1>5.0.0-rc.4<a class="headerlink" href="#rc-4" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixed an issue where comments immediately after an insensitive (in attribute)
were not parsed correctly.</p></li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">cssesc</span></code> to 2.0.0 (major).</p></li>
<li><p>Removed outdated integration tests.</p></li>
<li><p>Added tests for custom selectors, tags with attributes, the universal
selector with pseudos, and tokens after combinators.</p></li>
</ul>
</div>
<div class="section" id="rc-1">
<h1>5.0.0-rc.1<a class="headerlink" href="#rc-1" title="Permalink to this headline">¶</a></h1>
<p>To ease adoption of the v5.0 release, we have relaxed the node version
check performed by npm at installation time to allow for node 4, which
remains officially unsupported, but likely to continue working for the
time being.</p>
</div>
<div class="section" id="rc-0">
<h1>5.0.0-rc.0<a class="headerlink" href="#rc-0" title="Permalink to this headline">¶</a></h1>
<p>This release has <strong>BREAKING CHANGES</strong> that were required to fix regressions
in 4.0.0 and to make the Combinator Node API consistent for all combinator
types. Please read carefully.</p>
<div class="section" id="summary-of-changes">
<h2>Summary of Changes<a class="headerlink" href="#summary-of-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The way a descendent combinator that isn’t a single space character (E.g. <code class="docutils literal notranslate"><span class="pre">.a</span>&#160; <span class="pre">.b</span></code>) is stored in the AST has changed.</p></li>
<li><p>Named Combinators (E.g. <code class="docutils literal notranslate"><span class="pre">.a</span> <span class="pre">/for/</span> <span class="pre">.b</span></code>) are now properly parsed as a combinator.</p></li>
<li><p>It is now possible to look up a node based on the source location of a character in that node and to query nodes if they contain some character.</p></li>
<li><p>Several bug fixes that caused the parser to hang and run out of memory when a <code class="docutils literal notranslate"><span class="pre">/</span></code> was encountered have been fixed.</p></li>
<li><p>The minimum supported version of Node is now <code class="docutils literal notranslate"><span class="pre">v6.0.0</span></code>.</p></li>
</ul>
<div class="section" id="changes-to-the-descendent-combinator">
<h3>Changes to the Descendent Combinator<a class="headerlink" href="#changes-to-the-descendent-combinator" title="Permalink to this headline">¶</a></h3>
<p>In prior releases, the value of a descendant combinator with multiple spaces included all the spaces.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.a</span>&#160;&#160; <span class="pre">.b</span></code>: Extra spaces are now stored as space before.</p>
<ul>
<li><p>Old &amp; Busted:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">combinator.value</span> <span class="pre">===</span> <span class="pre">&quot;</span>&#160;&#160; <span class="pre">&quot;</span></code></p></li>
</ul>
</li>
<li><p>New hotness:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">combinator.value</span> <span class="pre">===</span> <span class="pre">&quot;</span> <span class="pre">&quot;</span> <span class="pre">&amp;&amp;</span> <span class="pre">combinator.spaces.before</span> <span class="pre">===</span> <span class="pre">&quot;</span>&#160; <span class="pre">&quot;</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">.a</span>&#160;&#160; <span class="pre">/*comment*/.b</span></code>: A comment at the end of the combinator causes extra space to become after space.</p>
<ul>
<li><p>Old &amp; Busted:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">combinator.value</span> <span class="pre">===</span> <span class="pre">&quot;</span>&#160;&#160; <span class="pre">&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combinator.raws.value</span> <span class="pre">===</span> <span class="pre">&quot;</span>&#160;&#160; <span class="pre">/*comment/&quot;</span></code></p></li>
</ul>
</li>
<li><p>New hotness:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">combinator.value</span> <span class="pre">===</span> <span class="pre">&quot;</span> <span class="pre">&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combinator.spaces.after</span> <span class="pre">===</span> <span class="pre">&quot;</span>&#160; <span class="pre">&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combinator.raws.spaces.after</span> <span class="pre">===</span> <span class="pre">&quot;</span>&#160; <span class="pre">/*comment*/&quot;</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">.a&lt;newline&gt;.b</span></code>: whitespace that doesn’t start or end with a single space character is stored as a raw value.</p>
<ul>
<li><p>Old &amp; Busted:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">combinator.value</span> <span class="pre">===</span> <span class="pre">&quot;\n&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combinator.raws.value</span> <span class="pre">===</span> <span class="pre">undefined</span></code></p></li>
</ul>
</li>
<li><p>New hotness:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">combinator.value</span> <span class="pre">===</span> <span class="pre">&quot;</span> <span class="pre">&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combinator.raws.value</span> <span class="pre">===</span> <span class="pre">&quot;\n&quot;</span></code></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="support-for-named-combinators">
<h3>Support for “Named Combinators”<a class="headerlink" href="#support-for-named-combinators" title="Permalink to this headline">¶</a></h3>
<p>Although, nonstandard and unlikely to ever become a standard, combinators like <code class="docutils literal notranslate"><span class="pre">/deep/</span></code> and <code class="docutils literal notranslate"><span class="pre">/for/</span></code> are now properly supported.</p>
<p>Because they’ve been taken off the standardization track, there is no spec-official name for combinators of the form <code class="docutils literal notranslate"><span class="pre">/&lt;ident&gt;/</span></code>. However, I talked to <a class="reference external" href="https://twitter.com/tabatkins">Tab Atkins</a> and we agreed to call them “named combinators” so now they are called that.</p>
<p>Before this release such named combinators were parsed without intention and generated three nodes of type <code class="docutils literal notranslate"><span class="pre">&quot;tag&quot;</span></code> where the first and last nodes had a value of <code class="docutils literal notranslate"><span class="pre">&quot;/&quot;</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.a</span> <span class="pre">/for/</span> <span class="pre">.b</span></code> is parsed as a combinator.</p>
<ul>
<li><p>Old &amp; Busted:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">root.nodes[0].nodes[1].type</span> <span class="pre">===</span> <span class="pre">&quot;tag&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">root.nodes[0].nodes[1].value</span> <span class="pre">===</span> <span class="pre">&quot;/&quot;</span></code></p></li>
</ul>
</li>
<li><p>New hotness:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">root.nodes[0].nodes[1].type</span> <span class="pre">===</span> <span class="pre">&quot;combinator&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">root.nodes[0].nodes[1].value</span> <span class="pre">===</span> <span class="pre">&quot;/for/&quot;</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">.a</span> <span class="pre">/F\6fR/</span> <span class="pre">.b</span></code> escapes are handled and uppercase is normalized.</p>
<ul>
<li><p>Old &amp; Busted:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">root.nodes[0].nodes[2].type</span> <span class="pre">===</span> <span class="pre">&quot;tag&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">root.nodes[0].nodes[2].value</span> <span class="pre">===</span> <span class="pre">&quot;F\\6fR&quot;</span></code></p></li>
</ul>
</li>
<li><p>New hotness:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">root.nodes[0].nodes[1].type</span> <span class="pre">===</span> <span class="pre">&quot;combinator&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">root.nodes[0].nodes[1].value</span> <span class="pre">===</span> <span class="pre">&quot;/for/&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">root.nodes[0].nodes[1].raws.value</span> <span class="pre">===</span> <span class="pre">&quot;/F\\6fR/&quot;</span></code></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="source-position-checks-and-lookups">
<h3>Source position checks and lookups<a class="headerlink" href="#source-position-checks-and-lookups" title="Permalink to this headline">¶</a></h3>
<p>A new API was added to look up a node based on the source location.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">selectorParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;postcss-selector-parser&quot;</span><span class="p">);</span>
<span class="c1">// You can find the most specific node for any given character</span>
<span class="kd">let</span> <span class="nx">combinator</span> <span class="o">=</span> <span class="nx">selectorParser</span><span class="p">.</span><span class="nx">astSync</span><span class="p">(</span><span class="s2">&quot;.a &gt; .b&quot;</span><span class="p">).</span><span class="nx">atPosition</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">4</span><span class="p">);</span>
<span class="nx">combinator</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot; &gt; &quot;</span><span class="p">;</span>
<span class="c1">// You can check if a node includes a specific character</span>
<span class="c1">// Whitespace surrounding the node that is owned by that node</span>
<span class="c1">// is included in the check.</span>
<span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="mf">4</span><span class="p">,</span><span class="mf">5</span><span class="p">,</span><span class="mf">6</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">column</span> <span class="p">=&gt;</span> <span class="nx">combinator</span><span class="p">.</span><span class="nx">isAtPosition</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="nx">column</span><span class="p">));</span>
<span class="c1">// =&gt; [false, true, true, true, false]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id5">
<h1>4.0.0<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h1>
<p>This release has <strong>BREAKING CHANGES</strong> that were required to fix bugs regarding values with escape sequences. Please read carefully.</p>
<ul class="simple">
<li><p><strong>Identifiers with escapes</strong> - CSS escape sequences are now hidden from the public API by default.
The normal value of a node like a class name or ID, or an aspect of a node such as attribute
selector’s value, is unescaped. Escapes representing Non-ascii characters are unescaped into
unicode characters. For example: <code class="docutils literal notranslate"><span class="pre">bu\tton,</span> <span class="pre">.\31</span> <span class="pre">00,</span> <span class="pre">#i\2764\FE0Fu,</span> <span class="pre">[attr=&quot;value</span> <span class="pre">is</span> <span class="pre">\&quot;quoted\&quot;&quot;]</span></code>
will parse respectively to the values <code class="docutils literal notranslate"><span class="pre">button</span></code>, <code class="docutils literal notranslate"><span class="pre">100</span></code>, <code class="docutils literal notranslate"><span class="pre">i❤️u</span></code>, <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">is</span> <span class="pre">&quot;quoted&quot;</span></code>.
The original escape sequences for these values can be found in the corresponding property name
in <code class="docutils literal notranslate"><span class="pre">node.raws</span></code>. Where possible, deprecation warnings were added, but the nature
of escape handling makes it impossible to detect what is escaped or not. Our expectation is
that most users are neither expecting nor handling escape sequences in their use of this library,
and so for them, this is a bug fix. Users who are taking care to handle escapes correctly can
now update their code to remove the escape handling and let us do it for them.</p></li>
<li><p><strong>Mutating values with escapes</strong> - When you make an update to a node property that has escape handling
The value is assumed to be unescaped, and any special characters are escaped automatically and
the corresponding <code class="docutils literal notranslate"><span class="pre">raws</span></code> value is immediately updated. This can result in changes to the original
escape format. Where the exact value of the escape sequence is important there are methods that
allow both values to be set in conjunction. There are a number of new convenience methods for
manipulating values that involve escapes, especially for attributes values where the quote mark
is involved. See https://github.com/postcss/postcss-selector-parser/pull/133 for an extensive
write-up on these changes.</p></li>
</ul>
<p><strong>Upgrade/API Example</strong></p>
<p>In <code class="docutils literal notranslate"><span class="pre">3.x</span></code> there was no unescape handling and internal consistency of several properties was the caller’s job to maintain. It was very easy for the developer
to create a CSS file that did not parse correctly when some types of values
were in use.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">selectorParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;postcss-selector-parser&quot;</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">attr</span> <span class="o">=</span> <span class="nx">selectorParser</span><span class="p">.</span><span class="nx">attribute</span><span class="p">({</span><span class="nx">attribute</span><span class="o">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="nx">operator</span><span class="o">:</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s2">&quot;a-value&quot;</span><span class="p">});</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="c1">// =&gt; &quot;a-value&quot;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; [id=a-value]</span>
<span class="c1">// Add quotes to an attribute&#39;s value.</span>
<span class="c1">// All these values have to be set by the caller to be consistent:</span>
<span class="c1">// no internal consistency is maintained.</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">raws</span><span class="p">.</span><span class="nx">unquoted</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">value</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;&#39;&quot;</span> <span class="o">+</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="c1">// =&gt; &quot;&#39;a-value&#39;&quot;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">quoted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>  <span class="c1">// =&gt; &quot;[id=&#39;a-value&#39;]&quot;</span>
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">4.0</span></code> there is a convenient API for setting and mutating values
that may need escaping. Especially for attributes.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">selectorParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;postcss-selector-parser&quot;</span><span class="p">);</span>

<span class="c1">// The constructor requires you specify the exact escape sequence</span>
<span class="kd">let</span> <span class="nx">className</span> <span class="o">=</span> <span class="nx">selectorParser</span><span class="p">.</span><span class="nx">className</span><span class="p">({</span><span class="nx">value</span><span class="o">:</span> <span class="s2">&quot;illegal class name&quot;</span><span class="p">,</span> <span class="nx">raws</span><span class="o">:</span> <span class="p">{</span><span class="nx">value</span><span class="o">:</span> <span class="s2">&quot;illegal\\ class\\ name&quot;</span><span class="p">}});</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &#39;.illegal\\ class\\ name&#39;</span>

<span class="c1">// So it&#39;s better to set the value as a property</span>
<span class="nx">className</span> <span class="o">=</span> <span class="nx">selectorParser</span><span class="p">.</span><span class="nx">className</span><span class="p">();</span>
<span class="c1">// Most properties that deal with identifiers work like this</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;escape for me&quot;</span><span class="p">;</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="c1">// =&gt; &#39;escape for me&#39;</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &#39;.escape\\ for\\ me&#39;</span>

<span class="c1">// emoji and all non-ascii are escaped to ensure it works in every css file.</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;😱🦄😍&quot;</span><span class="p">;</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="c1">// =&gt; &#39;😱🦄😍&#39;</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &#39;.\\1F631\\1F984\\1F60D&#39;</span>

<span class="c1">// you can control the escape sequence if you want, or do bad bad things</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">setPropertyAndEscape</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;xxxx&#39;</span><span class="p">,</span> <span class="s1">&#39;yyyy&#39;</span><span class="p">);</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="c1">// =&gt; &quot;xxxx&quot;</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &quot;.yyyy&quot;</span>

<span class="c1">// Pass a value directly through to the css output without escaping it. </span>
<span class="nx">className</span><span class="p">.</span><span class="nx">setPropertyWithoutEscape</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;$REPLACE_ME$&#39;</span><span class="p">);</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="c1">// =&gt; &quot;$REPLACE_ME$&quot;</span>
<span class="nx">className</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &quot;.$REPLACE_ME$&quot;</span>

<span class="c1">// The biggest changes are to the Attribute class</span>
<span class="c1">// passing quoteMark explicitly is required to avoid a deprecation warning.</span>
<span class="kd">let</span> <span class="nx">attr</span> <span class="o">=</span> <span class="nx">selectorParser</span><span class="p">.</span><span class="nx">attribute</span><span class="p">({</span><span class="nx">attribute</span><span class="o">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="nx">operator</span><span class="o">:</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s2">&quot;a-value&quot;</span><span class="p">,</span> <span class="nx">quoteMark</span><span class="o">:</span> <span class="kc">null</span><span class="p">});</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &quot;[id=a-value]&quot;</span>
<span class="c1">// Get the value with quotes on it and any necessary escapes.</span>
<span class="c1">// This is the same as reading attr.value in 3.x.</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">getQuotedValue</span><span class="p">();</span> <span class="c1">// =&gt; &quot;a-value&quot;;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">quoteMark</span><span class="p">;</span> <span class="c1">// =&gt; null</span>

<span class="c1">// Add quotes to an attribute&#39;s value.</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">quoteMark</span> <span class="o">=</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">;</span> <span class="c1">// This is all that&#39;s required.</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &quot;[id=&#39;a-value&#39;]&quot;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">quoted</span><span class="p">;</span> <span class="c1">// =&gt; true</span>
<span class="c1">// The value is still the same, only the quotes have changed.</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="c1">// =&gt; a-value</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">getQuotedValue</span><span class="p">();</span> <span class="c1">// =&gt; &quot;&#39;a-value&#39;&quot;;</span>

<span class="c1">// deprecated assignment, no warning because there&#39;s no escapes</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;new-value&quot;</span><span class="p">;</span>
<span class="c1">// no quote mark is needed so it is removed</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">getQuotedValue</span><span class="p">();</span> <span class="c1">// =&gt; &quot;new-value&quot;;</span>

<span class="c1">// deprecated assignment, </span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;\&quot;a &#39;single quoted&#39; value\&quot;&quot;</span><span class="p">;</span>
<span class="c1">// &gt; (node:27859) DeprecationWarning: Assigning an attribute a value containing characters that might need to be escaped is deprecated. Call attribute.setValue() instead.</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">getQuotedValue</span><span class="p">();</span> <span class="c1">// =&gt; &#39;&quot;a \&#39;single quoted\&#39; value&quot;&#39;;</span>
<span class="c1">// quote mark inferred from first and last characters.</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">quoteMark</span><span class="p">;</span> <span class="c1">// =&gt; &#39;&quot;&#39;</span>

<span class="c1">// setValue takes options to make manipulating the value simple.</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">smart</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="c1">// foo doesn&#39;t require any escapes or quotes.</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &#39;[id=foo]&#39;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">quoteMark</span><span class="p">;</span> <span class="c1">// =&gt; null </span>

<span class="c1">// An explicit quote mark can be specified</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">quoteMark</span><span class="o">:</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">});</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &#39;[id=&quot;foo&quot;]&#39;</span>

<span class="c1">// preserves quote mark by default</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &#39;[id=&quot;bar&quot;]&#39;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">quoteMark</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &#39;[id=bar]&#39;</span>

<span class="c1">// with no arguments, it preserves quote mark even when it&#39;s not a great idea</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s1">&#39;a value \n that should be quoted&#39;</span><span class="p">);</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &#39;[id=a\\ value\\ \\A\\ that\\ should\\ be\\ quoted]&#39;</span>

<span class="c1">// smart preservation with a specified default</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s1">&#39;a value \n that should be quoted&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">smart</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">preferCurrentQuoteMark</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">quoteMark</span><span class="o">:</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">});</span>
<span class="c1">// =&gt; &quot;[id=&#39;a value \\A  that should be quoted&#39;]&quot;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">quoteMark</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">;</span>
<span class="c1">// =&gt; &#39;[id=&quot;a value \\A  that should be quoted&quot;]&#39;</span>

<span class="c1">// this keeps double quotes because it wants to quote the value and the existing value has double quotes.</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s1">&#39;this should be quoted&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">smart</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">preferCurrentQuoteMark</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">quoteMark</span><span class="o">:</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">});</span>
<span class="c1">// =&gt; &#39;[id=&quot;this should be quoted&quot;]&#39;</span>

<span class="c1">// picks single quotes because the value has double quotes</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s1">&#39;a &quot;double quoted&quot; value&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">smart</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">preferCurrentQuoteMark</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">quoteMark</span><span class="o">:</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">});</span>
<span class="c1">// =&gt; &quot;[id=&#39;a &quot;double quoted&quot; value&#39;]&quot;</span>

<span class="c1">// setPropertyAndEscape lets you do anything you want. Even things that are a bad idea and illegal.</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">setPropertyAndEscape</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;xxxx&#39;</span><span class="p">,</span> <span class="s1">&#39;the password is 42&#39;</span><span class="p">);</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="c1">// =&gt; &quot;xxxx&quot;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &quot;[id=the password is 42]&quot;</span>

<span class="c1">// Pass a value directly through to the css output without escaping it. </span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">setPropertyWithoutEscape</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;$REPLACEMENT$&#39;</span><span class="p">);</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span> <span class="c1">// =&gt; &quot;$REPLACEMENT$&quot;</span>
<span class="nx">attr</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &quot;[id=$REPLACEMENT$]&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h1>3.1.2<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fix: Removed dot-prop dependency since it’s no longer written in es5.</p></li>
</ul>
</div>
<div class="section" id="id7">
<h1>3.1.1<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fix: typescript definitions weren’t in the published package.</p></li>
</ul>
</div>
<div class="section" id="id8">
<h1>3.1.0<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixed numerous bugs in attribute nodes relating to the handling of comments
and whitespace. There’s significant changes to <code class="docutils literal notranslate"><span class="pre">attrNode.spaces</span></code> and <code class="docutils literal notranslate"><span class="pre">attrNode.raws</span></code> since the <code class="docutils literal notranslate"><span class="pre">3.0.0</span></code> release.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">Attribute#offsetOf(part)</span></code> to get the offset location of
attribute parts like <code class="docutils literal notranslate"><span class="pre">&quot;operator&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;value&quot;</span></code>. This is most
often added to <code class="docutils literal notranslate"><span class="pre">Attribute#sourceIndex</span></code> for error reporting.</p></li>
</ul>
</div>
<div class="section" id="id9">
<h1>3.0.0<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h1>
<div class="section" id="breaking-changes">
<h2>Breaking changes<a class="headerlink" href="#breaking-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Some tweaks to the tokenizer/attribute selector parsing mean that whitespace
locations might be slightly different to the 2.x code.</p></li>
<li><p>Better attribute selector parsing with more validation; postcss-selector-parser
no longer uses regular expressions to parse attribute selectors.</p></li>
<li><p>Added an async API (thanks to &#64;jacobp100); the default <code class="docutils literal notranslate"><span class="pre">process</span></code> API is now
async, and the sync API is now accessed through <code class="docutils literal notranslate"><span class="pre">processSync</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">process()</span></code> and <code class="docutils literal notranslate"><span class="pre">processSync()</span></code> now return a string instead of the Processor
instance.</p></li>
<li><p>Tweaks handling of Less interpolation (thanks to &#64;jwilsson).</p></li>
<li><p>Removes support for Node 0.12.</p></li>
</ul>
</div>
<div class="section" id="other-changes">
<h2>Other changes<a class="headerlink" href="#other-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ast()</span></code> and <code class="docutils literal notranslate"><span class="pre">astSync()</span></code> methods have been added to the <code class="docutils literal notranslate"><span class="pre">Processor</span></code>. These
return the <code class="docutils literal notranslate"><span class="pre">Root</span></code> node of the selectors after processing them.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform()</span></code> and <code class="docutils literal notranslate"><span class="pre">transformSync()</span></code> methods have been added to the
<code class="docutils literal notranslate"><span class="pre">Processor</span></code>. These return the value returned by the processor callback
after processing the selectors.</p></li>
<li><p>Set the parent when inserting a node (thanks to &#64;chriseppstein).</p></li>
<li><p>Correctly adjust indices when using insertBefore/insertAfter (thanks to &#64;tivac).</p></li>
<li><p>Fixes handling of namespaces with qualified tag selectors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">process</span></code>, <code class="docutils literal notranslate"><span class="pre">ast</span></code> and <code class="docutils literal notranslate"><span class="pre">transform</span></code> (and their sync variants) now accept a
<code class="docutils literal notranslate"><span class="pre">postcss</span></code> rule node. When provided, better errors are generated and selector
processing is automatically set back to the rule selector (unless the <code class="docutils literal notranslate"><span class="pre">updateSelector</span></code> option is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>.)</p></li>
<li><p>Now more memory efficient when tokenizing selectors.</p></li>
</ul>
<div class="section" id="upgrade-hints">
<h3>Upgrade hints<a class="headerlink" href="#upgrade-hints" title="Permalink to this headline">¶</a></h3>
<p>The pattern of:</p>
<p><code class="docutils literal notranslate"><span class="pre">rule.selector</span> <span class="pre">=</span> <span class="pre">processor.process(rule.selector).result.toString();</span></code></p>
<p>is now:</p>
<p><code class="docutils literal notranslate"><span class="pre">processor.processSync(rule)</span></code></p>
</div>
</div>
</div>
<div class="section" id="id10">
<h1>2.2.3<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Resolves an issue where the parser would not reduce multiple spaces between an
ampersand and another simple selector in lossy mode (thanks to &#64;adam-26).</p></li>
</ul>
</div>
<div class="section" id="id11">
<h1>2.2.2<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>No longer hangs on an unescaped semicolon; instead the parser will throw
an exception for these cases.</p></li>
</ul>
</div>
<div class="section" id="id12">
<h1>2.2.1<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Allows a consumer to specify whitespace tokens when creating a new Node
(thanks to &#64;Semigradsky).</p></li>
</ul>
</div>
<div class="section" id="id13">
<h1>2.2.0<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Added a new option to normalize whitespace when parsing the selector string
(thanks to &#64;adam-26).</p></li>
</ul>
</div>
<div class="section" id="id14">
<h1>2.1.1<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Better unquoted value handling within attribute selectors
(thanks to &#64;evilebottnawi).</p></li>
</ul>
</div>
<div class="section" id="id15">
<h1>2.1.0<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Added: Use string constants for all node types &amp; expose them on the main
parser instance (thanks to &#64;Aweary).</p></li>
</ul>
<p># 2.0.0</p>
<p>This release contains the following breaking changes:</p>
<ul class="simple">
<li><p>Renamed all <code class="docutils literal notranslate"><span class="pre">eachInside</span></code> iterators to <code class="docutils literal notranslate"><span class="pre">walk</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">eachTag</span></code> is now
<code class="docutils literal notranslate"><span class="pre">walkTags</span></code>, and <code class="docutils literal notranslate"><span class="pre">eachInside</span></code> is now <code class="docutils literal notranslate"><span class="pre">walk</span></code>.</p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">Node#removeSelf()</span></code> to <code class="docutils literal notranslate"><span class="pre">Node#remove()</span></code>.</p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">Container#remove()</span></code> to <code class="docutils literal notranslate"><span class="pre">Container#removeChild()</span></code>.</p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">Node#raw</span></code> to <code class="docutils literal notranslate"><span class="pre">Node#raws</span></code> (thanks to &#64;davidtheclark).</p></li>
<li><p>Now parses <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> as the <em>nesting</em> selector, rather than a <em>tag</em> selector.</p></li>
<li><p>Fixes misinterpretation of Sass interpolation (e.g. <code class="docutils literal notranslate"><span class="pre">#{foo}</span></code>) as an
id selector (thanks to &#64;davidtheclark).</p></li>
</ul>
<p>and;</p>
<ul class="simple">
<li><p>Fixes parsing of attribute selectors with equals signs in them
(e.g. <code class="docutils literal notranslate"><span class="pre">[data-attr=&quot;foo=bar&quot;]</span></code>) (thanks to &#64;montmanu).</p></li>
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">quoted</span></code> and <code class="docutils literal notranslate"><span class="pre">raw.unquoted</span></code> properties to attribute nodes
(thanks to &#64;davidtheclark).</p></li>
</ul>
</div>
<div class="section" id="id16">
<h1>1.3.3<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixes an infinite loop on <code class="docutils literal notranslate"><span class="pre">)</span></code> and <code class="docutils literal notranslate"><span class="pre">]</span></code> tokens when they had no opening pairs.
Now postcss-selector-parser will throw when it encounters these lone tokens.</p></li>
</ul>
<p># 1.3.2</p>
<ul class="simple">
<li><p>Now uses plain integers rather than <code class="docutils literal notranslate"><span class="pre">str.charCodeAt(0)</span></code> for compiled builds.</p></li>
</ul>
</div>
<div class="section" id="id17">
<h1>1.3.1<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Update flatten to v1.x (thanks to &#64;shinnn).</p></li>
</ul>
</div>
<div class="section" id="id18">
<h1>1.3.0<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Adds a new node type, <code class="docutils literal notranslate"><span class="pre">String</span></code>, to fix a crash on selectors such as
<code class="docutils literal notranslate"><span class="pre">foo:bar(&quot;test&quot;)</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id19">
<h1>1.2.1<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixes a crash when the parser encountered a trailing combinator.</p></li>
</ul>
</div>
<div class="section" id="id20">
<h1>1.2.0<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>A more descriptive error is thrown when the parser expects to find a
pseudo-class/pseudo-element (thanks to &#64;ashelley).</p></li>
<li><p>Adds support for line/column locations for selector nodes, as well as a
<code class="docutils literal notranslate"><span class="pre">Node#sourceIndex</span></code> method (thanks to &#64;davidtheclark).</p></li>
</ul>
</div>
<div class="section" id="id21">
<h1>1.1.4<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixes a crash when a selector started with a <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> combinator. The module will
now no longer throw if a selector has a leading/trailing combinator node.</p></li>
</ul>
</div>
<div class="section" id="id22">
<h1>1.1.3<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixes a crash on <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> tokens.</p></li>
</ul>
</div>
<div class="section" id="id23">
<h1>1.1.2<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixes an infinite loop caused by using parentheses in a non-pseudo element
context.</p></li>
</ul>
</div>
<div class="section" id="id24">
<h1>1.1.1<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixes a crash when a backslash ended a selector string.</p></li>
</ul>
</div>
<div class="section" id="id25">
<h1>1.1.0<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Adds support for replacing multiple nodes at once with <code class="docutils literal notranslate"><span class="pre">replaceWith</span></code>
(thanks to &#64;jonathantneal).</p></li>
<li><p>Parser no longer throws on sequential IDs and trailing commas, to support
parsing of selector hacks.</p></li>
</ul>
</div>
<div class="section" id="id26">
<h1>1.0.1<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixes using <code class="docutils literal notranslate"><span class="pre">insertAfter</span></code> and <code class="docutils literal notranslate"><span class="pre">insertBefore</span></code> during iteration.</p></li>
</ul>
</div>
<div class="section" id="id27">
<h1>1.0.0<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">clone</span></code> and <code class="docutils literal notranslate"><span class="pre">replaceWith</span></code> methods to nodes.</p></li>
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">insertBefore</span></code> and <code class="docutils literal notranslate"><span class="pre">insertAfter</span></code> to containers.</p></li>
<li><p>Stabilises API.</p></li>
</ul>
</div>
<div class="section" id="id28">
<h1>0.0.5<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixes crash on extra whitespace inside a pseudo selector’s parentheses.</p></li>
<li><p>Adds sort function to the container class.</p></li>
<li><p>Enables the parser to pass its input through without transforming.</p></li>
<li><p>Iteration-safe <code class="docutils literal notranslate"><span class="pre">each</span></code> and <code class="docutils literal notranslate"><span class="pre">eachInside</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id29">
<h1>0.0.4<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Tidy up redundant duplication.</p></li>
<li><p>Fixes a bug where the parser would loop infinitely on universal selectors
inside pseudo selectors.</p></li>
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">length</span></code> getter and <code class="docutils literal notranslate"><span class="pre">eachInside</span></code>, <code class="docutils literal notranslate"><span class="pre">map</span></code>, <code class="docutils literal notranslate"><span class="pre">reduce</span></code> to the container class.</p></li>
<li><p>When a selector has been removed from the tree, the root node will no longer
cast it to a string.</p></li>
<li><p>Adds node type iterators to the container class (e.g. <code class="docutils literal notranslate"><span class="pre">eachComment</span></code>).</p></li>
<li><p>Adds filter function to the container class.</p></li>
<li><p>Adds split function to the container class.</p></li>
<li><p>Create new node types by doing <code class="docutils literal notranslate"><span class="pre">parser.id(opts)</span></code> etc.</p></li>
<li><p>Adds support for pseudo classes anywhere in the selector.</p></li>
</ul>
</div>
<div class="section" id="id30">
<h1>0.0.3<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">next</span></code> and <code class="docutils literal notranslate"><span class="pre">prev</span></code> to the node class.</p></li>
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">first</span></code> and <code class="docutils literal notranslate"><span class="pre">last</span></code> getters to the container class.</p></li>
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">every</span></code> and <code class="docutils literal notranslate"><span class="pre">some</span></code> iterators to the container class.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">empty</span></code> alias for <code class="docutils literal notranslate"><span class="pre">removeAll</span></code>.</p></li>
<li><p>Combinators are now types of node.</p></li>
<li><p>Fixes the at method so that it is not an alias for <code class="docutils literal notranslate"><span class="pre">index</span></code>.</p></li>
<li><p>Tidy up creation of new nodes in the parser.</p></li>
<li><p>Refactors how namespaces are handled for consistency &amp; less redundant code.</p></li>
<li><p>Refactors AST to use <code class="docutils literal notranslate"><span class="pre">nodes</span></code> exclusively, and eliminates excessive nesting.</p></li>
<li><p>Fixes nested pseudo parsing.</p></li>
<li><p>Fixes whitespace parsing.</p></li>
</ul>
</div>
<div class="section" id="id31">
<h1>0.0.2<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Adds support for namespace selectors.</p></li>
<li><p>Adds support for selectors joined by escaped spaces - such as <code class="docutils literal notranslate"><span class="pre">.\31\</span> <span class="pre">0</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id32">
<h1>0.0.1<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Initial release.</p></li>
</ul>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AyrtonB/ESDA-Spatial",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-postcss-selector-parser-6.0.2-934cf799d016c83411859e09dcecade01286ec5c-integrity/node_modules/postcss-selector-parser"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ayrton Bourn, Santiago De La Fuente, Clem Attwood, Joanna Kuleszo, Camilo Perico<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../../../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>