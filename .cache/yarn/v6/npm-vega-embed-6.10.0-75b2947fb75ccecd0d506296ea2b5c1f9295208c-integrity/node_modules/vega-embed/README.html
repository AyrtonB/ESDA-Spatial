
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vega-Embed &#8212; Spatial Analysis for Energy</title>
    
  <link rel="stylesheet" href="../../../../../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  <img src="../../../../../../_static/logo.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Spatial Analysis for Energy</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Intro.html">
   UCL Energy Systems &amp; Data Analytics - Spatial Module
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/03-Working-with-Vector-Data.html">
   Working with Vector Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../tutorials/04-Working-with-Raster-Data.html">
   Working with Raster Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Extensions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../extensions/01-Mapping-with-ggplot.html">
   Mapping with ggplot
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Setup.html">
   Set-Up Instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/Jupyter-Anaconda.html">
   What is Jupyter/Anaconda?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../md/ESDA%20Course.html">
   ESDA Course
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-vega-embed-6.10.0-75b2947fb75ccecd0d506296ea2b5c1f9295208c-integrity/node_modules/vega-embed/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-examples">
   Basic Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#directly-in-the-browser">
     Directly in the Browser
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#javascript-or-typescript">
     JavaScript or TypeScript
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#in-observable">
     In Observable
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api-reference">
   API Reference
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#options">
     Options
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#common-questions">
   Common questions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-do-i-send-cookies-when-loading-data">
     How do I send cookies when loading data?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#build-process">
   Build Process
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-process">
   Release Process
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="vega-embed">
<h1>Vega-Embed<a class="headerlink" href="#vega-embed" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://www.npmjs.com/package/vega-embed"><img alt="npm version" src="https://img.shields.io/npm/v/vega-embed.svg" /></a>
<a class="reference external" href="https://www.jsdelivr.com/package/npm/vega-embed"><img alt="" src="https://data.jsdelivr.com/v1/package/npm/vega-embed/badge?style=rounded" /></a>
<a class="reference external" href="https://github.com/vega/vega-embed/actions"><img alt="Build Status" src="https://github.com/vega/vega-embed/workflows/Test/badge.svg" /></a>
<a class="reference external" href="https://codecov.io/gh/vega/vega-embed"><img alt="codecov" src="https://codecov.io/gh/vega/vega-embed/branch/master/graph/badge.svg" /></a>
<a class="reference external" href="https://github.com/prettier/prettier"><img alt="code style: prettier" src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=rounded" /></a></p>
<p><a class="reference external" href="http://github.com/vega/vega-embed">Vega-Embed</a> makes it easy to embed interactive <a class="reference external" href="https://vega.github.io/vega">Vega</a> and <a class="reference external" href="https://vega.github.io/vega-lite">Vega-Lite</a> views into web pages. With Vega Embed, you can:</p>
<ul class="simple">
<li><p>Load Vega/Vega-Lite specs from source text, parsed JSON, or URLs.</p></li>
<li><p>Patch Vega specs (even ones generated from Vega-Lite) to add additional functionality; for example, see <a class="reference external" href="https://observablehq.com/&#64;domoritz/rotating-earth">Rotating Earth</a>.</p></li>
<li><p>Add action links such as “View Source” and “Open in Vega Editor”.</p></li>
<li><p>Includes <a class="reference external" href="https://github.com/vega/vega-tooltip">Vega Tooltip</a>.</p></li>
<li><p>Includes <a class="reference external" href="https://github.com/vega/vega-themes">Vega Themes</a>. <strong>Experimental: themes are not stable yet</strong></p></li>
</ul>
<p><strong>Vega-Lite works well with <a class="reference external" href="https://beta.observablehq.com/">Observable</a>. Learn how to use it in <a class="reference external" href="https://beta.observablehq.com/&#64;domoritz/hello-vega-embed">our example notebook</a>.</strong></p>
<img src="embed.gif" width="500">
<div class="section" id="basic-examples">
<h2>Basic Examples<a class="headerlink" href="#basic-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="directly-in-the-browser">
<h3>Directly in the Browser<a class="headerlink" href="#directly-in-the-browser" title="Permalink to this headline">¶</a></h3>
<p>You can import Vega-Embed from a local copy or (as shown below) <a class="reference external" href="https://www.jsdelivr.com/package/npm/vega-embed">from jsDelivr</a>. Please replace <code class="docutils literal notranslate"><span class="pre">[VERSION]</span></code> with the correct <a class="reference external" href="https://www.jsdelivr.com/package/npm/vega">Vega</a>, <a class="reference external" href="https://www.jsdelivr.com/package/npm/vega-lite">Vega-Lite</a>, and <a class="reference external" href="https://www.jsdelivr.com/package/npm/vega-embed">Vega-Embed</a> versions. We recommend that you specify the major versions (<code class="docutils literal notranslate"><span class="pre">vega&#64;5</span></code>, <code class="docutils literal notranslate"><span class="pre">vega-lite&#64;4</span></code>, <code class="docutils literal notranslate"><span class="pre">vega-embed&#64;6</span></code>).</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="c">&lt;!-- Import Vega &amp; Vega-Lite (does not have to be from CDN) --&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.jsdelivr.net/npm/vega@[VERSION]&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.jsdelivr.net/npm/vega-lite@[VERSION]&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="c">&lt;!-- Import vega-embed --&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.jsdelivr.net/npm/vega-embed@[VERSION]&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;vis&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
  <span class="kd">var</span> <span class="nx">spec</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/vega/vega/master/docs/examples/bar-chart.vg.json&quot;</span><span class="p">;</span>
  <span class="nx">vegaEmbed</span><span class="p">(</span><span class="s1">&#39;#vis&#39;</span><span class="p">,</span> <span class="nx">spec</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view</span>
  <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Look at the example online in the <a class="reference external" href="https://bl.ocks.org/domoritz/455e1c7872c4b38a58b90df0c3d7b1b9">Vega-Embed Block</a>.</p>
</div>
<div class="section" id="javascript-or-typescript">
<h3>JavaScript or TypeScript<a class="headerlink" href="#javascript-or-typescript" title="Permalink to this headline">¶</a></h3>
<p>The basic example below needs to be transpiled and bundled (using rollup, webpack, etc..) before it can be loaded in a browser.</p>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">embed</span> <span class="nx">from</span> <span class="s1">&#39;vega-embed&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">spec</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">embed</span><span class="p">(</span><span class="s1">&#39;#vis&#39;</span><span class="p">,</span> <span class="nx">spec</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">view</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="in-observable">
<h3>In Observable<a class="headerlink" href="#in-observable" title="Permalink to this headline">¶</a></h3>
<p>You can require embed with <code class="docutils literal notranslate"><span class="pre">embed</span> <span class="pre">=</span> <span class="pre">require('vega-embed&#64;6')</span></code> and then embed a chart with <code class="docutils literal notranslate"><span class="pre">viewof</span> <span class="pre">view</span> <span class="pre">=</span> <span class="pre">embed(...)</span></code>. Check the <a class="reference external" href="https://beta.observablehq.com/&#64;domoritz/hello-vega-embed">our example notebook</a> for more details.</p>
</div>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<p>When using a <code class="docutils literal notranslate"><span class="pre">script</span></code> tag, the default export of Vega-Embed is a wrapper function that automatically chooses between <a class="reference external" href="#embed"><code class="docutils literal notranslate"><span class="pre">embed</span></code></a> and <a class="reference external" href="#container"><code class="docutils literal notranslate"><span class="pre">container</span></code></a> based on the provided arguments. Vega-Embed provides this convenience for imports in interactive environments like <a class="reference external" href="https://www.observablehq.com/">Observable</a>. When using the Vega-Embed npm package, the default export is the <a class="reference external" href="#embed"><code class="docutils literal notranslate"><span class="pre">embed</span></code></a> function.</p>
<p><a href="#embed" name="embed">#</a>
<b>embed</b>(<i>el</i>, <i>spec</i>[, <i>opt</i>])
<a class="reference external" href="https://github.com/vega/vega-embed/blob/master/src/embed.ts">&lt;&gt;</a></p>
<p>Returns a <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> that resolves to a result object. The result object contains:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Property</p></th>
<th class="text-align:left head"><p>Type</p></th>
<th class="text-align:left head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">view</span></code></p></td>
<td class="text-align:left"><p>String</p></td>
<td class="text-align:left"><p>The instantiated <a class="reference external" href="https://github.com/vega/vega-view#vega-view">Vega <code class="docutils literal notranslate"><span class="pre">View</span></code> instance</a>.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">spec</span></code></p></td>
<td class="text-align:left"><p>Object</p></td>
<td class="text-align:left"><p>A copy of the parsed JSON Vega or Vega-Lite spec.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">vgSpec</span></code></p></td>
<td class="text-align:left"><p>Object</p></td>
<td class="text-align:left"><p>The compiled Vega spec.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">finalize</span></code></p></td>
<td class="text-align:left"><p>Function</p></td>
<td class="text-align:left"><p>A method to prepare embed to be removed. To prevent unwanted behaviors and memory leaks, this method unregisters any timers and removes any event listeners the visualization has registered on external DOM elements. Applications should invoke this method when a Embed or the View instance is no longer needed. This method calls <a class="reference external" href="https://vega.github.io/vega/docs/api/view/#view_finalize"><code class="docutils literal notranslate"><span class="pre">view.finalize</span></code></a>.</p></td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">embed</span></code> function accepts the following arguments:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Property</p></th>
<th class="text-align:left head"><p>Type</p></th>
<th class="text-align:left head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">el</span></code></p></td>
<td class="text-align:left"><p>String</p></td>
<td class="text-align:left"><p>A DOM element or CSS selector indicating the element on the page in which to add the embedded view.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">spec</span></code></p></td>
<td class="text-align:left"><p>String / Object</p></td>
<td class="text-align:left"><p><em>String</em> : A URL string from which to load the Vega specification. This URL will be subject to standard browser security restrictions. Typically this URL will point to a file on the same host and port number as the web page itself. <br> <em>Object</em> :  The Vega/Vega-Lite specification as a parsed JSON object.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">opt</span></code></p></td>
<td class="text-align:left"><p>Object</p></td>
<td class="text-align:left"><p><em>(Optional)</em> A JavaScript object containing options for embedding.</p></td>
</tr>
</tbody>
</table>
<p><em>Note: Internet Explorer does not support <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">the ES6 Promise</a> feature. To make it work correctly, please follow <a class="reference external" href="https://vega.github.io/vega/usage/#ie">the instructions on the Vega website</a>.</em></p>
<p><a href="#container" name="container">#</a>
<b>container</b>(<i>spec</i>[, <i>opt</i>])
<a class="reference external" href="https://github.com/vega/vega-embed/blob/master/src/container.ts">&lt;&gt;</a></p>
<p>Returns a <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>* that resolves to an HTML element with the <a class="reference external" href="https://github.com/vega/vega-view#vega-view">Vega <code class="docutils literal notranslate"><span class="pre">View</span></code> instance</a> as the <code class="docutils literal notranslate"><span class="pre">value</span></code> property. The function is designed to work with <a class="reference external" href="https://observablehq.com/">Observable</a>. The <code class="docutils literal notranslate"><span class="pre">container</span></code> function accepts the following arguments:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Property</p></th>
<th class="text-align:left head"><p>Type</p></th>
<th class="text-align:left head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">spec</span></code></p></td>
<td class="text-align:left"><p>String / Object</p></td>
<td class="text-align:left"><p><em>String</em> : A URL string from which to load the Vega specification. This URL will be subject to standard browser security restrictions. Typically this URL will point to a file on the same host and port number as the web page itself. <br> <em>Object</em> :  The Vega/Vega-Lite specification as a parsed JSON object.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">opt</span></code></p></td>
<td class="text-align:left"><p>Object</p></td>
<td class="text-align:left"><p><em>(Optional)</em> A JavaScript object containing options for embedding.</p></td>
</tr>
</tbody>
</table>
<div class="section" id="options">
<h3>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<p>You can configure Vega Embed with an options object. You can pass options as an argument to the <a class="reference external" href="#api-reference">embed function</a> or as <code class="docutils literal notranslate"><span class="pre">usermeta.embedOptions</span></code> as part of the Vega or Vega-Lite specification.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">opt</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">config</span><span class="o">:</span> <span class="p">...,</span>
  <span class="nx">theme</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">defaultStyle</span><span class="o">:</span> <span class="p">...,</span>

  <span class="c1">// view config options</span>
  <span class="nx">renderer</span><span class="o">:</span> <span class="p">...,</span>
  <span class="nx">loader</span><span class="o">:</span> <span class="p">...,</span>
  <span class="nx">logLevel</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">tooltip</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">patch</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">width</span><span class="o">:</span> <span class="p">...,</span>
  <span class="nx">height</span><span class="o">:</span> <span class="p">...,</span>
  <span class="nx">padding</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
    <span class="kr">export</span><span class="o">:</span> <span class="p">...,</span>
    <span class="nx">source</span><span class="o">:</span> <span class="p">...,</span>
    <span class="nx">compiled</span><span class="o">:</span> <span class="p">...,</span>
    <span class="nx">editor</span><span class="o">:</span> <span class="p">...</span>
  <span class="p">},</span>

  <span class="nx">scaleFactor</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">editorUrl</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">sourceHeader</span><span class="o">:</span> <span class="p">...,</span>
  <span class="nx">sourceFooter</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">hover</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">hoverSet</span><span class="o">:</span> <span class="p">...,</span>
    <span class="nx">updateSet</span><span class="o">:</span> <span class="p">...,</span>
  <span class="p">},</span>

  <span class="nx">downloadFileName</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">formatLocale</span><span class="o">:</span> <span class="p">...,</span>
  <span class="nx">timeFormatLocale</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">ast</span><span class="o">:</span> <span class="p">...,</span>

  <span class="nx">i18n</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">COMPILED_ACTION</span><span class="o">:</span> <span class="p">...,</span>
    <span class="nx">EDITOR_ACTION</span><span class="o">:</span> <span class="p">...,</span>
    <span class="nx">PNG_ACTION</span><span class="o">:</span> <span class="p">...,</span>
    <span class="nx">SOURCE_ACTION</span><span class="o">:</span> <span class="p">...,</span>
    <span class="nx">SVG_ACTION</span><span class="o">:</span> <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Property</p></th>
<th class="text-align:left head"><p>Type</p></th>
<th class="text-align:left head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">mode</span></code></p></td>
<td class="text-align:left"><p>String</p></td>
<td class="text-align:left"><p>If specified, tells Vega-Embed to parse the spec as <code class="docutils literal notranslate"><span class="pre">vega</span></code> or <code class="docutils literal notranslate"><span class="pre">vega-lite</span></code>. Vega-Embed will parse the <a class="reference external" href="https://github.com/vega/schema"><code class="docutils literal notranslate"><span class="pre">$schema</span></code> url</a> if the mode is not specified. Vega-Embed will default to <code class="docutils literal notranslate"><span class="pre">vega</span></code> if neither <code class="docutils literal notranslate"><span class="pre">mode</span></code>, nor <code class="docutils literal notranslate"><span class="pre">$schema</span></code> are specified.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">config</span></code></p></td>
<td class="text-align:left"><p>String / Object</p></td>
<td class="text-align:left"><p><em>String</em> : A URL string from which to load a <a class="reference external" href="https://vega.github.io/vega/docs/config/">Vega</a>/<a class="reference external" href="https://vega.github.io/vega-lite/docs/config.html">Vega-Lite</a> or <a class="reference external" href="https://vega.github.io/vega-lite/docs/config.html">Vega-Lite</a> configuration file. This URL will be subject to standard browser security restrictions. Typically this URL will point to a file on the same host and port number as the web page itself. <br> <em>Object</em> : A Vega/Vega-Lite configuration as a parsed JSON object to override the default configuration options.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">theme</span></code></p></td>
<td class="text-align:left"><p>String</p></td>
<td class="text-align:left"><p>If specified, tells Vega-Embed use the theme from <a class="reference external" href="https://github.com/vega/vega-themes">Vega Themes</a>. <strong>Experimental: we may update themes with minor version updates of Vega-Embed.</strong></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">defaultStyle</span></code></p></td>
<td class="text-align:left"><p>Boolean or String</p></td>
<td class="text-align:left"><p>If set to <code class="docutils literal notranslate"><span class="pre">true</span></code> (default), the embed actions are shown in a menu. Set to <code class="docutils literal notranslate"><span class="pre">false</span></code> to use simple links. Provide a string to set the style sheet.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">renderer</span></code></p></td>
<td class="text-align:left"><p>String</p></td>
<td class="text-align:left"><p>The renderer to use for the view. One of <code class="docutils literal notranslate"><span class="pre">&quot;canvas&quot;</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">&quot;svg&quot;</span></code>. See <a class="reference external" href="https://vega.github.io/vega/docs/api/view/#view_renderer">Vega docs</a> for details.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">logLevel</span></code></p></td>
<td class="text-align:left"><p>Level</p></td>
<td class="text-align:left"><p>Sets the current log level. See <a class="reference external" href="https://vega.github.io/vega/docs/api/view/#view_logLevel">Vega docs</a> for details.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">tooltip</span></code></p></td>
<td class="text-align:left"><p>Handler or Boolean or Object</p></td>
<td class="text-align:left"><p>Provide a <a class="reference external" href="https://vega.github.io/vega/docs/api/view/#view_tooltip">tooltip handler</a>, customize the default <a class="reference external" href="https://github.com/vega/vega-tooltip">Vega Tooltip</a> handler, or disable the default handler.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">loader</span></code></p></td>
<td class="text-align:left"><p>Loader / Object</p></td>
<td class="text-align:left"><p><em>Loader</em> : Sets a custom Vega loader. <em>Object</em> : Vega loader options for a loader that will be created. <br> See <a class="reference external" href="https://vega.github.io/vega/docs/api/view/#view">Vega docs</a> for details.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">patch</span></code></p></td>
<td class="text-align:left"><p>Function / Object[] / String</p></td>
<td class="text-align:left"><p>A function to modify the Vega specification before it is parsed. Alternatively, a <a class="reference external" href="https://tools.ietf.org/html/rfc6902">JSON-Patch RFC6902</a> to modify the Vega specification. If you use Vega-Lite, the compiled Vega will be patched. Alternatively to the function or the object, a URL string from which to load the patch can be provided. This URL will be subject to standard browser security restrictions. Typically this URL will point to a file on the same host and port number as the web page itself.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">width</span></code></p></td>
<td class="text-align:left"><p>Number</p></td>
<td class="text-align:left"><p>Sets the view width in pixels. See <a class="reference external" href="https://vega.github.io/vega/docs/api/view/#view_width">Vega docs</a> for details. Note that Vega-Lite overrides this option.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">height</span></code></p></td>
<td class="text-align:left"><p>Number</p></td>
<td class="text-align:left"><p>Sets the view height in pixels. See <a class="reference external" href="https://vega.github.io/vega/docs/api/view/#view_height">Vega docs</a> for details. Note that Vega-Lite overrides this option.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">padding</span></code></p></td>
<td class="text-align:left"><p>Object</p></td>
<td class="text-align:left"><p>Sets the view padding in pixels. See <a class="reference external" href="https://vega.github.io/vega/docs/api/view/#view_padding">Vega docs</a> for details.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">actions</span></code></p></td>
<td class="text-align:left"><p>Boolean / Object</p></td>
<td class="text-align:left"><p>Determines if action links (“Export as PNG/SVG”, “View Source”, “View Vega” (only for Vega-Lite), “Open in Vega Editor”) are included with the embedded view. If the value is <code class="docutils literal notranslate"><span class="pre">true</span></code>, all action links will be shown and none if the value is <code class="docutils literal notranslate"><span class="pre">false</span></code>.  This property can take a key-value mapping object that maps keys (<code class="docutils literal notranslate"><span class="pre">export</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">compiled</span></code>, <code class="docutils literal notranslate"><span class="pre">editor</span></code>) to boolean values for determining if each action link should be shown.  By default, <code class="docutils literal notranslate"><span class="pre">export</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>, and <code class="docutils literal notranslate"><span class="pre">editor</span></code> are true and <code class="docutils literal notranslate"><span class="pre">compiled</span></code> is false. These defaults can be overridden: for example, if <code class="docutils literal notranslate"><span class="pre">actions</span></code> is <code class="docutils literal notranslate"><span class="pre">{export:</span> <span class="pre">false,</span> <span class="pre">source:</span> <span class="pre">true}</span></code>, the embedded visualization will have two links – “View Source” and “Open in Vega Editor”.  The <code class="docutils literal notranslate"><span class="pre">export</span></code> property can take a key-value mapping object that maps keys (svg, png) to boolean values for determining if each export action link should be shown. By default, <code class="docutils literal notranslate"><span class="pre">svg</span></code> and <code class="docutils literal notranslate"><span class="pre">png</span></code> are true.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">scaleFactor</span></code></p></td>
<td class="text-align:left"><p>Number</p></td>
<td class="text-align:left"><p>The number by which to multiply the width and height (default <code class="docutils literal notranslate"><span class="pre">1</span></code>) of an exported PNG or SVG image.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">editorUrl</span></code></p></td>
<td class="text-align:left"><p>String</p></td>
<td class="text-align:left"><p>The URL at which to open embedded Vega specs in a Vega editor. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;http://vega.github.io/editor/&quot;</span></code>. Internally, Vega-Embed uses <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage">HTML5 postMessage</a> to pass the specification information to the editor.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">sourceHeader</span></code></p></td>
<td class="text-align:left"><p>String</p></td>
<td class="text-align:left"><p>HTML to inject into the <code class="docutils literal notranslate"><span class="pre">head</span></code> tag of the page generated by the “View Source” and “View Vega” action link. For example, this can be used to add code for <a class="reference external" href="https://highlightjs.org/">syntax highlighting</a>.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">sourceFooter</span></code></p></td>
<td class="text-align:left"><p>String</p></td>
<td class="text-align:left"><p>HTML to inject into the end of the page generated by the “View Source” and “View Vega” action link. The text will be added immediately before the closing <code class="docutils literal notranslate"><span class="pre">body</span></code> tag.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">hover</span></code></p></td>
<td class="text-align:left"><p>Boolean or Object</p></td>
<td class="text-align:left"><p>Enable <a class="reference external" href="https://vega.github.io/vega/docs/api/view/#view_hover">hover event processing</a>. Hover event processing is enabled on Vega by default.<br> <em>Boolean</em>: Enables/disables hover event processing.<br> <em>Object</em>: Optional keys (<code class="docutils literal notranslate"><span class="pre">hoverSet</span></code>, <code class="docutils literal notranslate"><span class="pre">updateSet</span></code>) to specify which named encoding sets to invoke upon mouseover and mouseout.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">i18n</span></code></p></td>
<td class="text-align:left"><p>Object</p></td>
<td class="text-align:left"><p>This property maps keys (<code class="docutils literal notranslate"><span class="pre">COMPILED_ACTION</span></code>, <code class="docutils literal notranslate"><span class="pre">EDITOR_ACTION</span></code>, <code class="docutils literal notranslate"><span class="pre">PNG_ACTION</span></code>, <code class="docutils literal notranslate"><span class="pre">SOURCE_ACTION</span></code>, <code class="docutils literal notranslate"><span class="pre">SVG_ACTION</span></code>) to string values for the action’s text. By default, the text is in English.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">downloadFileName</span></code></p></td>
<td class="text-align:left"><p>String</p></td>
<td class="text-align:left"><p>Sets the file name (default: <code class="docutils literal notranslate"><span class="pre">visualization</span></code>) for charts downloaded using the <code class="docutils literal notranslate"><span class="pre">png</span></code> or <code class="docutils literal notranslate"><span class="pre">svg</span></code> action.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">formatLocale</span></code></p></td>
<td class="text-align:left"><p>Object</p></td>
<td class="text-align:left"><p>Sets the default locale definition for number formatting. See the <a class="reference external" href="https://github.com/d3/d3-format/tree/master/locale">d3-format locale collection</a> for definition files for a variety of languages. Note that this is a global setting.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">timeFormatLocale</span></code></p></td>
<td class="text-align:left"><p>Object</p></td>
<td class="text-align:left"><p>Sets the default locale definition for date/time formatting. See the <a class="reference external" href="https://github.com/d3/d3-time-format/tree/master/locale">d3-time-format locale collection</a> for definition files for a variety of languages. Note that this is a global setting.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">ast</span></code></p></td>
<td class="text-align:left"><p>Boolean</p></td>
<td class="text-align:left"><p>Generate an <a class="reference external" href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">Abstract Syntax Tree (AST)</a> instead of expressions and use an interpreter instead of native evaluation. While the interpreter is slower, it adds support for Vega expressions that are <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">Content Security Policy (CSP)</a>-compliant. In addition to enabling the <code class="docutils literal notranslate"><span class="pre">ast</span></code> option, you need to load the Vega interpreter module before loading Vega. See https://github.com/vega/vega/pull/2658 for details.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="common-questions">
<h2>Common questions<a class="headerlink" href="#common-questions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-do-i-send-cookies-when-loading-data">
<h3>How do I send cookies when loading data?<a class="headerlink" href="#how-do-i-send-cookies-when-loading-data" title="Permalink to this headline">¶</a></h3>
<p>By default, the Vega loader does not send the credentials of the current page with requests. You can override this behavior by passing <code class="docutils literal notranslate"><span class="pre">{loader:</span> <span class="pre">{</span> <span class="pre">http:</span> <span class="pre">{</span> <span class="pre">credentials:</span> <span class="pre">'same-origin'</span> <span class="pre">}}}</span></code> as the embed option.</p>
</div>
</div>
<div class="section" id="build-process">
<h2>Build Process<a class="headerlink" href="#build-process" title="Permalink to this headline">¶</a></h2>
<p>To build <code class="docutils literal notranslate"><span class="pre">vega-embed.js</span></code> and view the test examples, you must have <a class="reference external" href="https://yarnpkg.com/en/">yarn</a> installed.</p>
<ol class="simple">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">yarn</span></code> in the Vega-Embed folder to install dependencies.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">yarn</span> <span class="pre">build</span></code>. This will create <code class="docutils literal notranslate"><span class="pre">vega-embed.js</span></code> and the minified <code class="docutils literal notranslate"><span class="pre">vega-embed.min.js</span></code>.</p></li>
<li><p>Run a local webserver with <code class="docutils literal notranslate"><span class="pre">yarn</span> <span class="pre">start</span></code> then point your web browser at the test page (e.g., <code class="docutils literal notranslate"><span class="pre">http://localhost:8000/test-vg.html</span></code>(Vega) or <code class="docutils literal notranslate"><span class="pre">http://localhost:8000/test-vl.html</span></code>(Vega-Lite)).</p></li>
</ol>
</div>
<div class="section" id="release-process">
<h2>Release Process<a class="headerlink" href="#release-process" title="Permalink to this headline">¶</a></h2>
<p>To release a new version, make sure that everything works. Then run <code class="docutils literal notranslate"><span class="pre">yarn</span> <span class="pre">version</span></code> and bump the version number. Lastly, push to GitHub (with the release tag). <a class="reference external" href="https://travis-ci.org/vega/vega-embed/builds">Travis</a> will build a bundle and make the <a class="reference external" href="https://www.npmjs.com/package/vega-embed">npm release</a> automatically.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AyrtonB/ESDA-Spatial",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-vega-embed-6.10.0-75b2947fb75ccecd0d506296ea2b5c1f9295208c-integrity/node_modules/vega-embed"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Ayrton Bourn, Santiago De La Fuente, Clem Attwood, Joanna Kuleszo, Camilo Perico<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../../../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>